/*! For license information please see component---src-pages-index-js-db7c55893288d6563c66.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{0:function(e,t){},"0vGO":function(e,t,n){"use strict";var r=n("U8pU"),i=n("KQm4"),a=n("rePB"),o=n("1OyB"),s=n("vuIU"),u=n("5ku3"),c=Object(u.a)();function l(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(r){return null}}var f=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(o.a)(this,e),this.storage=l(r),this.id=t,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return Object(s.a)(e,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function(e){if(Object.assign(this.config,e),this.storage){var t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}},{key:"_loadConfiguration",value:function(){var e={};if(this.storage){var t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}]),e}(),d=n("K9nA");function h(){if(!c){var e=d.a.hrtime();return e[0]+e[1]/1e6}return d.b.performance?d.b.performance.now():Date.now()}h();function v(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>r&&(n=Math.min(n,r/e.width));var a=e.width*n,o=e.height*n,s=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(a/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(a,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}var g={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function b(e){return"string"==typeof e?g[e.toUpperCase()]||g.WHITE:e}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n),i=!0,a=!1,o=void 0;try{for(var s,u=function(){var n=s.value;"function"==typeof e[n]&&(t.find((function(e){return n===e}))||(e[n]=e[n].bind(e)))},c=r[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)u()}catch(l){a=!0,o=l}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}}function p(e,t){if(!e)throw new Error(t||"Assertion failed")}var y={debug:c&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},_={enabled:!1,priority:0};function O(){}var E={};var j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id;Object(o.a)(this,e),this.id=n,this.VERSION="2.1.0",this._startTs=h(),this._deltaTs=h(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new f("__probe-".concat(this.id,"__"),_),this.userData={},this.timeStamp("".concat(this.id," started")),m(this),Object.seal(this)}return Object(s.a)(e,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getPriority",value:function(){return this._storage.config.priority}},{key:"getLevel",value:function(){return this._storage.config.priority}},{key:"getTotal",value:function(){return Number((h()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((h()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({priority:e}),this}},{key:"assert",value:function(e,t){p(e,t)}},{key:"warn",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this._getLogFunction({message:e,args:n,method:y.warn,once:!0})}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this._getLogFunction({message:e,args:n,method:y.error})}},{key:"deprecated",value:function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:r,method:y.log,time:!0,once:!0})}},{key:"log",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:r,method:y.debug})}},{key:"info",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:r,method:console.info})}},{key:"once",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:r,method:y.debug||y.info,once:!0})}},{key:"table",value:function(e,t,n){if(t){var r=function(e){for(var t in e)for(var n in e[t])return n||"untitled";return"empty"}(t);return this._getLogFunction({priority:e,message:t,args:n&&[n],tag:r,method:console.table||O})}return O}},{key:"image",value:function(e){var t=e.priority,n=e.image,r=e.message,i=void 0===r?"":r,a=e.scale,o=void 0===a?1:a;return t>this.getPriority()?O:c?this._logImageInBrowser({image:n,message:i,scale:o}):this._logImageInNode({image:n,message:i,scale:o})}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,t){this._storage.updateConfiguration(Object(a.a)({},e,t))}},{key:"_logImageInNode",value:function(e){var t=e.image,r=(e.message,e.scale),i=void 0===r?1:r,a=null;try{a=n(0)}catch(o){}return a?function(){return a(t,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then((function(e){return console.log(e)}))}:O}},{key:"_logImageInBrowser",value:function(e){var t=e.image,n=e.message,r=void 0===n?"":n,a=e.scale,o=void 0===a?1:a;if("string"==typeof t){var s=new Image;return s.onload=function(){var e,t=v(s,r,o);(e=console).log.apply(e,Object(i.a)(t))},s.src=t,O}var u,c=t.nodeName||"";if("img"===c.toLowerCase())return(u=console).log.apply(u,Object(i.a)(v(t,r,o))),O;if("canvas"===c.toLowerCase()){var l=new Image;return l.onload=function(){var e;return(e=console).log.apply(e,Object(i.a)(v(l,r,o)))},l.src=t.toDataURL(),O}return O}},{key:"time",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeStamp||O})}},{key:"group",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=n=this._normalizeArguments({priority:e,message:t,opts:n}),i=r.collapsed;return this._getLogFunction({priority:e,message:t,opts:n,method:(i?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction({priority:e,message:"",method:console.groupEnd||O})}},{key:"withGroup",value:function(e,t,n){var r=this._normalizeArguments({priority:e,message:t});this.group(r);try{n()}finally{this.groupEnd(r.message)}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return 0===(e=this._normalizePriority(e))||this.isEnabled()&&this.getPriority()>=e}},{key:"_getElapsedTime",value:function(){var e=this.getTotal(),t=this.getDelta();return this._deltaTs=h(),{total:e,delta:t}}},{key:"_getLogFunction",value:function(e){if(this._shouldLog(e.priority)){var t=e.method;e=this._parseArguments(e),p(t);var n=e.message,r=e.tag||e.message;if(e.once){if(E[r])return O;E[r]=h()}return n=this._decorateMessage(n,e),t.bind.apply(t,[console,n].concat(Object(i.a)(e.args)))}return O}},{key:"_parseArguments",value:function(e){var t=this._normalizeArguments(e),n=this._getElapsedTime(),r=n.delta,i=n.total;return Object.assign(e,t,{delta:r,total:i})}},{key:"_normalizePriority",value:function(e){var t;switch(Object(r.a)(e)){case"number":t=e;break;case"object":t=e.priority||0;break;default:t=0}return p(Number.isFinite(t)&&t>=0),t}},{key:"_normalizeArguments",value:function(e){var t=e.priority,n=e.message,i=e.args,a=void 0===i?[]:i,o=e.opts,s={priority:this._normalizePriority(t),message:n,args:a};switch(Object(r.a)(t)){case"string":case"function":void 0!==n&&a.unshift(n),Object.assign(s,{message:t});break;case"object":Object.assign(s,t)}return"function"==typeof s.message&&(s.message=this._shouldLog(s.priority)?s.message():""),p("string"==typeof s.message||"object"===Object(r.a)(s.message)),Object.assign(s,o)}},{key:"_decorateMessage",value:function(e,t){if("string"==typeof e){var n="";if(t.time){var r=this._getElapsedTime().total;n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}((s=r)<10?"".concat(s.toFixed(2),"ms"):s<100?"".concat(s.toFixed(1),"ms"):s<1e3?"".concat(s.toFixed(0),"ms"):"".concat((s/1e3).toFixed(2),"s"))}e=t.time?"".concat(this.id,": ").concat(n,"  ").concat(e):"".concat(this.id,": ").concat(e),i=e,a=t.color,o=t.background,c||"string"!=typeof i||(a&&(a=b(a),i="[".concat(a,"m").concat(i,"[39m")),o&&(a=b(o),i="[".concat(o+10,"m").concat(i,"[49m"))),e=i}var i,a,o,s;return e}},{key:"priority",set:function(e){return this._storage.updateConfiguration({priority:e}),this},get:function(){return this._storage.config.priority}}]),e}();j.VERSION="2.1.0";t.a=new j({id:"luma"}).enable()},"0z1g":function(e,t,n){"use strict";(function(e){var t,r=n("rePB"),i=n("TjS6");function a(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function o(e){return e&&!0}var s=(t={},Object(r.a)(t,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){a(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(r.a)(t,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){a(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(r.a)(t,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){a(!1)}}),Object(r.a)(t,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){a(!1)},deleteQuery:function(){a(!1)},beginQuery:function(){a(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},queryCounter:function(){},getQueryObject:function(){}}),Object(r.a)(t,"EXT_disjoint_timer_query_webgl2",{meta:{suffix:"EXT"},queryCounter:null}),Object(r.a)(t,"OVERRIDES",{readBuffer:function(e,t,n){o(e)&&t(n)},getVertexAttrib:function(e,t,n,r){var i,a=function(e,t){return{webgl2:o(e),ext:e.getExtension(t)}}(e,"ANGLE_instanced_arrays"),s=a.webgl2,u=a.ext;switch(r){case 35069:i=!!s&&void 0;break;case 35070:i=s||u?void 0:0}return void 0!==i?i:t(n,r)},getProgramParameter:function(e,t,n,r){if(!o(e))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return t(n,r)},getInternalformatParameter:function(e,t,n,r,i){if(!o(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(n,r,i)},getTexParameter:function(e,t,n,r){switch(r){case 34046:var i=e.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(n,r)},getParameter:i.a,hint:function(e,t,n,r){return t(n,r)}}),t);function u(e,t){var n=t.extension,r=t.target,i=t.target2,o=s[n];a(o);var u=o.meta,c=(void 0===u?{}:u).suffix,l=void 0===c?"":c,f=e.getExtension(n);Object.keys(o).forEach((function(t){var n="".concat(t).concat(l),a=null;"meta"===t||"function"==typeof e[t]||(f&&"function"==typeof f[n]?a=function(){return f[n].apply(f,arguments)}:"function"==typeof o[t]&&(a=o[t].bind(r))),a&&(r[t]=a,i[t]=a)}))}(void 0!==e?e:window).polyfillContext=function(e){if(e.luma=e.luma||{},function(e){e.luma.extensions={};var t=e.getSupportedExtensions()||[],n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.luma[s]=e.getExtension(s)}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}(e),!e.luma.polyfilled){for(var t in s)"overrides"!==t&&u(e,{extension:t,target:e.luma,target2:e});!function(e,t){var n=t.target,r=t.target2,i=s.OVERRIDES;Object.keys(i).forEach((function(t){if("function"==typeof i[t]){var a=e[t]?e[t].bind(e):function(){},o=i[t].bind(null,e,a);n[t]=o,r[t]=o}}))}(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0}return e}}).call(this,n("yLpj"))},1:function(e,t){},"1OyB":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},"1TsT":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=!("undefined"==typeof window||!window.document||!window.document.createElement);var i=void 0;function a(){return void 0===i&&(i=function(){if(!r)return!1;if(!window.addEventListener||!window.removeEventListener||!Object.defineProperty)return!1;var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t)}catch(i){}return e}()),i}function o(e){e.handlers===e.nextHandlers&&(e.nextHandlers=e.handlers.slice())}function s(e){this.target=e,this.events={}}s.prototype.getEventHandlers=function(e,t){var n,r=String(e)+" "+String((n=t)?!0===n?100:(n.capture<<0)+(n.passive<<1)+(n.once<<2):0);return this.events[r]||(this.events[r]={handlers:[],handleEvent:void 0},this.events[r].nextHandlers=this.events[r].handlers),this.events[r]},s.prototype.handleEvent=function(e,t,n){var r=this.getEventHandlers(e,t);r.handlers=r.nextHandlers,r.handlers.forEach((function(e){e&&e(n)}))},s.prototype.add=function(e,t,n){var r=this,i=this.getEventHandlers(e,n);o(i),0===i.nextHandlers.length&&(i.handleEvent=this.handleEvent.bind(this,e,n),this.target.addEventListener(e,i.handleEvent,n)),i.nextHandlers.push(t);var a=!0;return function(){if(a){a=!1,o(i);var s=i.nextHandlers.indexOf(t);i.nextHandlers.splice(s,1),0===i.nextHandlers.length&&(r.target&&r.target.removeEventListener(e,i.handleEvent,n),i.handleEvent=void 0)}}};function u(e,t,n,r){e.__consolidated_events_handlers__||(e.__consolidated_events_handlers__=new s(e));var i=function(e){if(e)return a()?e:!!e.capture}(r);return e.__consolidated_events_handlers__.add(t,n,i)}},"1gqn":function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},2:function(e,t){},"5ku3":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n("U8pU"),i=n("I0ug");function a(){return!("object"===(void 0===e?"undefined":Object(r.a)(e))&&"[object process]"===String(e)&&!e.browser)||Object(i.a)()}}).call(this,n("8oxB"))},"62Ki":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return _}));var r,i,a,o=n("KQm4"),s=n("rePB"),u=n("xo4u"),c=(n("lvHR"),r={},Object(s.a)(r,3042,!1),Object(s.a)(r,32773,new Float32Array([0,0,0,0])),Object(s.a)(r,32777,32774),Object(s.a)(r,34877,32774),Object(s.a)(r,32969,1),Object(s.a)(r,32968,0),Object(s.a)(r,32971,1),Object(s.a)(r,32970,0),Object(s.a)(r,3106,new Float32Array([0,0,0,0])),Object(s.a)(r,3107,[!0,!0,!0,!0]),Object(s.a)(r,2884,!1),Object(s.a)(r,2885,1029),Object(s.a)(r,2929,!1),Object(s.a)(r,2931,1),Object(s.a)(r,2932,513),Object(s.a)(r,2928,new Float32Array([0,1])),Object(s.a)(r,2930,!0),Object(s.a)(r,3024,!0),Object(s.a)(r,36006,null),Object(s.a)(r,2886,2305),Object(s.a)(r,33170,4352),Object(s.a)(r,2849,1),Object(s.a)(r,32823,!1),Object(s.a)(r,32824,0),Object(s.a)(r,10752,0),Object(s.a)(r,32938,1),Object(s.a)(r,32939,!1),Object(s.a)(r,3089,!1),Object(s.a)(r,3088,new Int32Array([0,0,1024,1024])),Object(s.a)(r,2960,!1),Object(s.a)(r,2961,0),Object(s.a)(r,2968,4294967295),Object(s.a)(r,36005,4294967295),Object(s.a)(r,2962,519),Object(s.a)(r,2967,0),Object(s.a)(r,2963,4294967295),Object(s.a)(r,34816,519),Object(s.a)(r,36003,0),Object(s.a)(r,36004,4294967295),Object(s.a)(r,2964,7680),Object(s.a)(r,2965,7680),Object(s.a)(r,2966,7680),Object(s.a)(r,34817,7680),Object(s.a)(r,34818,7680),Object(s.a)(r,34819,7680),Object(s.a)(r,2978,new Int32Array([0,0,1024,1024])),Object(s.a)(r,3333,4),Object(s.a)(r,3317,4),Object(s.a)(r,37440,!1),Object(s.a)(r,37441,!1),Object(s.a)(r,37443,37444),Object(s.a)(r,35723,4352),Object(s.a)(r,36010,null),Object(s.a)(r,35977,!1),Object(s.a)(r,3330,0),Object(s.a)(r,3332,0),Object(s.a)(r,3331,0),Object(s.a)(r,3314,0),Object(s.a)(r,32878,0),Object(s.a)(r,3316,0),Object(s.a)(r,3315,0),Object(s.a)(r,32877,0),r),l=function(e,t,n){return t?e.enable(n):e.disable(n)},f=function(e,t,n){return e.hint(n,t)},d=function(e,t,n){return e.pixelStorei(n,t)},h=(i={},Object(s.a)(i,3042,l),Object(s.a)(i,32773,(function(e,t){return e.blendColor.apply(e,Object(o.a)(t))})),Object(s.a)(i,32777,"blendEquation"),Object(s.a)(i,34877,"blendEquation"),Object(s.a)(i,32969,"blendFunc"),Object(s.a)(i,32968,"blendFunc"),Object(s.a)(i,32971,"blendFunc"),Object(s.a)(i,32970,"blendFunc"),Object(s.a)(i,3106,(function(e,t){return e.clearColor.apply(e,Object(o.a)(t))})),Object(s.a)(i,3107,(function(e,t){return e.colorMask.apply(e,Object(o.a)(t))})),Object(s.a)(i,2884,l),Object(s.a)(i,2885,(function(e,t){return e.cullFace(t)})),Object(s.a)(i,2929,l),Object(s.a)(i,2931,(function(e,t){return e.clearDepth(t)})),Object(s.a)(i,2932,(function(e,t){return e.depthFunc(t)})),Object(s.a)(i,2928,(function(e,t){return e.depthRange.apply(e,Object(o.a)(t))})),Object(s.a)(i,2930,(function(e,t){return e.depthMask(t)})),Object(s.a)(i,3024,l),Object(s.a)(i,35723,f),Object(s.a)(i,36006,(function(e,t){var n=Object(u.n)(e)?36009:36160;return e.bindFramebuffer(n,t)})),Object(s.a)(i,2886,(function(e,t){return e.frontFace(t)})),Object(s.a)(i,33170,f),Object(s.a)(i,2849,(function(e,t){return e.lineWidth(t)})),Object(s.a)(i,32823,l),Object(s.a)(i,32824,"polygonOffset"),Object(s.a)(i,10752,"polygonOffset"),Object(s.a)(i,35977,l),Object(s.a)(i,32938,"sampleCoverage"),Object(s.a)(i,32939,"sampleCoverage"),Object(s.a)(i,3089,l),Object(s.a)(i,3088,(function(e,t){return e.scissor.apply(e,Object(o.a)(t))})),Object(s.a)(i,2960,l),Object(s.a)(i,2961,(function(e,t){return e.clearStencil(t)})),Object(s.a)(i,2968,(function(e,t){return e.stencilMaskSeparate(1028,t)})),Object(s.a)(i,36005,(function(e,t){return e.stencilMaskSeparate(1029,t)})),Object(s.a)(i,2962,"stencilFuncFront"),Object(s.a)(i,2967,"stencilFuncFront"),Object(s.a)(i,2963,"stencilFuncFront"),Object(s.a)(i,34816,"stencilFuncBack"),Object(s.a)(i,36003,"stencilFuncBack"),Object(s.a)(i,36004,"stencilFuncBack"),Object(s.a)(i,2964,"stencilOpFront"),Object(s.a)(i,2965,"stencilOpFront"),Object(s.a)(i,2966,"stencilOpFront"),Object(s.a)(i,34817,"stencilOpBack"),Object(s.a)(i,34818,"stencilOpBack"),Object(s.a)(i,34819,"stencilOpBack"),Object(s.a)(i,2978,(function(e,t){return e.viewport.apply(e,Object(o.a)(t))})),Object(s.a)(i,3333,d),Object(s.a)(i,3317,d),Object(s.a)(i,37440,d),Object(s.a)(i,37441,d),Object(s.a)(i,37443,d),Object(s.a)(i,3330,d),Object(s.a)(i,3332,d),Object(s.a)(i,3331,d),Object(s.a)(i,36010,(function(e,t){return e.bindFramebuffer(36008,t)})),Object(s.a)(i,3314,d),Object(s.a)(i,32878,d),Object(s.a)(i,3316,d),Object(s.a)(i,3315,d),Object(s.a)(i,32877,d),i),v={blendEquation:function(e,t){return e.blendEquationSeparate(t[32777],t[34877])},blendFunc:function(e,t){return e.blendFuncSeparate(t[32969],t[32968],t[32971],t[32970])},polygonOffset:function(e,t){return e.polygonOffset(t[32824],t[10752])},sampleCoverage:function(e,t){return e.sampleCoverage(t[32938],t[32939])},stencilFuncFront:function(e,t){return e.stencilFuncSeparate(1028,t[2962],t[2967],t[2963])},stencilFuncBack:function(e,t){return e.stencilFuncSeparate(1029,t[34816],t[36003],t[36004])},stencilOpFront:function(e,t){return e.stencilOpSeparate(1028,t[2964],t[2965],t[2966])},stencilOpBack:function(e,t){return e.stencilOpSeparate(1029,t[34817],t[34818],t[34819])}},g=function(e,t){return e.isEnabled(t)},b=(a={},Object(s.a)(a,3042,g),Object(s.a)(a,2884,g),Object(s.a)(a,2929,g),Object(s.a)(a,3024,g),Object(s.a)(a,32823,g),Object(s.a)(a,32926,g),Object(s.a)(a,32928,g),Object(s.a)(a,3089,g),Object(s.a)(a,2960,g),Object(s.a)(a,35977,g),a);function m(e,t){var n={};for(var r in t){var i=Number(r),a=h[r];a&&("string"==typeof a?n[a]=!0:a(e,t[r],i))}var o=e.state&&e.state.cache;if(o){var s=Object.assign({},o,t);for(var u in n){(0,v[u])(e,s)}}}function p(e,t){var n=b[t];return n?n(e,Number(t)):e.getParameter(Number(t))}function y(e,t){t=t||c;var n=Array.isArray(t)?t:Object.keys(t),r={},i=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;r[l]=p(e,l)}}catch(f){a=!0,o=f}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}function _(e){m(e,Object.assign({},c,{}))}},"6Sts":function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r,i=n("1OyB"),a=n("md7G"),o=n("foSv"),s=n("vuIU"),u=n("Ji7U"),c=n("rePB"),l=n("NaB/"),f=n("Gujg"),d=n("Sr2d"),h=n("xo4u"),v=n("ket5"),g=n("lvHR"),b=[9729,9728],m=(r={},Object(c.a)(r,6407,{dataFormat:6407,types:[5121,33635]}),Object(c.a)(r,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(c.a)(r,6406,{dataFormat:6406,types:[5121]}),Object(c.a)(r,6409,{dataFormat:6409,types:[5121]}),Object(c.a)(r,6410,{dataFormat:6410,types:[5121]}),Object(c.a)(r,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(c.a)(r,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(c.a)(r,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(c.a)(r,34836,{dataFormat:6408,types:[5126],gl2:!0}),r);function p(e,t){var n=m[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Object(h.n)(e)&&n.gl2||n.gl1;return"string"==typeof r?e.getExtension(r):r}function y(e,t){var n=m[t];switch(n&&n.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}var _=function(e){function t(e,n){var r;Object(i.a)(this,t);var s=n.id,u=void 0===s?Object(v.i)("texture"):s,c=n.handle,l=n.target;return(r=Object(a.a)(this,Object(o.a)(t).call(this,e,{id:u,handle:c}))).target=l,r.hasFloatTexture=e.getExtension("OES_texture_float"),r.textureUnit=void 0,r}return Object(u.a)(t,e),Object(s.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,r=t.linearFiltering,i=!0;return n&&(i=(i=i&&p(e,n))&&(!r||y(e,n))),i}}]),Object(s.a)(t,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.pixels,r=void 0===n?null:n,i=e.format,a=void 0===i?6408:i,o=e.type,s=void 0===o?5121:o,u=e.border,l=void 0===u?0:u,f=e.recreate,d=void 0!==f&&f,h=e.parameters,g=void 0===h?{}:h,b=e.pixelStore,m=void 0===b?{}:b,p=e.textureUnit,y=void 0===p?void 0:p,_=e.unpackFlipY,O=void 0===_||_,E=e.mipmaps,j=void 0===E||E;t||(t=r);var w=e.width,x=e.height,A=e.dataFormat,k=this._deduceParameters({format:a,type:s,dataFormat:A,compressed:!1,data:t,width:w,height:x});w=k.width,x=k.height,A=k.dataFormat,this.width=w,this.height=x,this.format=a,this.type=s,this.dataFormat=A,this.border=l,this.textureUnit=y,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var T=Object(c.a)({},37440,O),S=Object.assign({},T,m);this._isNPOT()&&j&&(v.g.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),j=!1,this._updateForNPOT(g)),this.mipmaps=j,this.setImageData({data:t,width:w,height:x,format:a,type:s,dataFormat:A,border:l,mipmaps:j,parameters:S}),j&&this.generateMipmap(),this.setParameters(g),d&&(this.data=t)}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),Object(d.c)(this.gl,t,(function(){e.gl.generateMipmap(e.target)})),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(e){var t=e.target,n=void 0===t?this.target:t,r=e.pixels,i=void 0===r?null:r,a=e.data,o=void 0===a?null:a,s=e.width,u=void 0===s?this.width:s,c=e.height,l=void 0===c?this.height:c,f=e.level,v=void 0===f?0:f,b=e.format,m=void 0===b?this.format:b,p=e.type,y=void 0===p?this.type:p,_=e.dataFormat,O=void 0===_?this.dataFormat:_,E=e.offset,j=void 0===E?0:E,w=e.border,x=void 0===w?this.border:w,A=e.compressed,k=void 0!==A&&A,T=e.parameters,S=void 0===T?{}:T;o||(o=i);var P=this._deduceParameters({format:m,type:y,dataFormat:O,compressed:k,data:o,width:u,height:l});y=P.type,O=P.dataFormat,k=P.compressed,u=P.width,l=P.height;var L=this.gl;L.bindTexture(this.target,this.handle);var F,I=this._getDataType({data:o,compressed:k});o=I.data,F=I.dataType,Object(d.c)(this.gl,S,(function(){switch(F){case"null":L.texImage2D(n,v,m,u,l,x,O,y,o);break;case"typed-array":L.texImage2D(n,v,m,u,l,x,O,y,o,j);break;case"buffer":Object(h.d)(L),L.bindBuffer(35052,o.handle||o),L.texImage2D(n,v,m,u,l,x,O,y,j),L.bindBuffer(35052,null);break;case"browser-object":Object(h.n)(L)?L.texImage2D(n,v,m,u,l,x,O,y,o):L.texImage2D(n,v,m,O,y,o);break;case"compressed":L.compressedTexImage2D(n,v,m,u,l,x,o);break;default:Object(g.a)(!1,"Unknown image data type")}}))}},{key:"setSubImageData",value:function(e){var t=this,n=e.target,r=void 0===n?this.target:n,i=e.pixels,a=void 0===i?null:i,o=e.data,s=void 0===o?null:o,u=e.x,c=void 0===u?0:u,l=e.y,v=void 0===l?0:l,g=e.width,b=void 0===g?this.width:g,m=e.height,p=void 0===m?this.height:m,y=e.level,_=void 0===y?0:y,O=e.format,E=void 0===O?this.format:O,j=e.type,w=void 0===j?this.type:j,x=e.dataFormat,A=void 0===x?this.dataFormat:x,k=e.compressed,T=void 0!==k&&k,S=e.offset,P=void 0===S?0:S,L=e.border,F=(void 0===L&&this.border,e.parameters),I=void 0===F?{}:F,R=this._deduceParameters({format:E,type:w,dataFormat:A,compressed:T,data:s,width:b,height:p});if(w=R.type,A=R.dataFormat,T=R.compressed,b=R.width,p=R.height,s||(s=a),s&&s.data){var N=s;s=N.data,b=N.shape[0],p=N.shape[1]}s instanceof f.a&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Object(d.c)(this.gl,I,(function(){T?t.gl.compressedTexSubImage2D(r,_,c,v,b,p,E,s):null===s?t.gl.texSubImage2D(r,_,c,v,b,p,A,w,null):ArrayBuffer.isView(s)?t.gl.texSubImage2D(r,_,c,v,b,p,A,w,s,P):s instanceof h.b?(Object(h.d)(t.gl),t.gl.bindBuffer(35052,s),t.gl.texSubImage2D(r,_,c,v,b,p,A,w,P),t.gl.bindBuffer(35052,null)):Object(h.n)(t.gl)?t.gl.texSubImage2D(r,_,c,v,b,p,A,w,s):t.gl.texSubImage2D(r,_,c,v,A,w,s)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(e){var t=e.target,n=(void 0===t&&this.target,e.framebuffer),r=e.x,i=void 0===r?0:r,a=e.y,o=void 0===a?0:a,s=e.width,u=e.height,c=e.level,l=void 0===c?0:c,f=e.internalFormat,d=void 0===f?6408:f,h=e.border,v=void 0===h?0:h;n&&n.bind(),this.bind(0),this.gl.copyTexImage2D(this.target,l,d,i,o,s,u,v),this.unbind(),n&&n.unbind()}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,this.gl.activeTexture(33984+e),this.gl.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,null),this.textureUnit}},{key:"_getDataType",value:function(e){var t=e.data,n=e.compressed;return void 0!==n&&n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof f.a?{data:t.handle,dataType:"buffer"}:t instanceof h.b?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"setImage3D",value:function(e){var t=e.level,n=void 0===t?0:t,r=e.internalformat,i=void 0===r?6408:r,a=e.width,o=e.height,s=e.depth,u=void 0===s?1:s,c=e.border,l=void 0===c?0:c,d=e.format,h=e.type,v=void 0===h?5121:h,g=e.offset,b=void 0===g?0:g,m=e.pixels;return ArrayBuffer.isView(m)?(this.gl.texImage3D(this.target,n,i,a,o,u,l,d,v,m),this):(m instanceof f.a&&(this.gl.bindBuffer(35052,m.handle),this.gl.texImage3D(this.target,n,i,a,o,u,l,d,v,b)),this)}},{key:"_deduceParameters",value:function(e){var t=e.format,n=e.data,r=e.width,i=e.height,a=e.dataFormat,o=e.type,s=e.compressed,u=m[t];a=a||u&&u.dataFormat,o=o||u&&u.types[0],s=s||u&&u.compressed;var c=this._deduceImageSize(n,r,i);return{dataFormat:a,type:o,compressed:s,width:r=c.width,height:i=c.height,format:t,data:n}}},{key:"_deduceImageSize",value:function(e,t,n){var r;return r="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:n}:{width:t>=0?t:1,height:n>=0?n:1},Object(g.a)(r,"Could not deduced texture size"),Object(g.a)(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),Object(g.a)(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle)}},{key:"_getParameter",value:function(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Object(g.a)(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!(Object(h.n)(this.gl)||Object(v.f)(this.width)&&Object(v.f)(this.height))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case 10241:-1===b.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}]),t}(l.a)},"7pNt":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o}));function r(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clamped,r=void 0===n||n;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function a(e){var t=e.data,n=e.width,r=e.height,i=e.bytesPerPixel,a=void 0===i?4:i,o=e.temp,s=n*a;o=o||new Uint8Array(s);for(var u=0;u<r/2;++u){var c=u*s,l=(r-u-1)*s;o.set(t.subarray(c,c+s)),t.copyWithin(c,l,l+s),t.set(o,l)}}function o(e){for(var t=e.data,n=e.width,r=e.height,i=Math.round(n/2),a=Math.round(r/2),o=new Uint8Array(i*a*4),s=0;s<a;s++)for(var u=0;u<i;u++)for(var c=0;c<4;c++)o[4*(s*i+u)+c]=t[4*(2*s*n+2*u)+c];return{data:o,width:i,height:a}}},"9lTW":function(e,t,n){"use strict";(function(t){var r=n("YVoz");function i(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=n("MCLT"),s=Object.prototype.hasOwnProperty,u=Array.prototype.slice,c="foo"===function(){}.name;function l(e){return Object.prototype.toString.call(e)}function f(e){return!a(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var d=e.exports=p,h=/\s*function\s+([^\(\s]*)\s*/;function v(e){if(o.isFunction(e)){if(c)return e.name;var t=e.toString().match(h);return t&&t[1]}}function g(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function b(e){if(c||!o.isFunction(e))return o.inspect(e);var t=v(e);return"[Function"+(t?": "+t:"")+"]"}function m(e,t,n,r,i){throw new d.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function p(e,t){e||m(e,!0,t,"==",d.ok)}function y(e,t,n,r){if(e===t)return!0;if(a(e)&&a(t))return 0===i(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(f(e)&&f(t)&&l(e)===l(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var s=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==s&&s===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=_(e),a=_(t);if(i&&!a||!i&&a)return!1;if(i)return e=u.call(e),t=u.call(t),y(e,t,n);var s,c,l=j(e),f=j(t);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),c=l.length-1;c>=0;c--)if(l[c]!==f[c])return!1;for(c=l.length-1;c>=0;c--)if(s=l[c],!y(e[s],t[s],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function _(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function O(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function E(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(n){t=n}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&m(i,n,"Missing expected exception"+r);var a="string"==typeof r,s=!e&&i&&!n;if((!e&&o.isError(i)&&a&&O(i,n)||s)&&m(i,n,"Got unwanted exception"+r),e&&i&&n&&!O(i,n)||!e&&i)throw i}d.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return g(b(e.actual),128)+" "+e.operator+" "+g(b(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=v(t),a=r.indexOf("\n"+i);if(a>=0){var o=r.indexOf("\n",a+1);r=r.substring(o+1)}this.stack=r}}},o.inherits(d.AssertionError,Error),d.fail=m,d.ok=p,d.equal=function(e,t,n){e!=t&&m(e,t,n,"==",d.equal)},d.notEqual=function(e,t,n){e==t&&m(e,t,n,"!=",d.notEqual)},d.deepEqual=function(e,t,n){y(e,t,!1)||m(e,t,n,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(e,t,n){y(e,t,!0)||m(e,t,n,"deepStrictEqual",d.deepStrictEqual)},d.notDeepEqual=function(e,t,n){y(e,t,!1)&&m(e,t,n,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=function e(t,n,r){y(t,n,!0)&&m(t,n,r,"notDeepStrictEqual",e)},d.strictEqual=function(e,t,n){e!==t&&m(e,t,n,"===",d.strictEqual)},d.notStrictEqual=function(e,t,n){e===t&&m(e,t,n,"!==",d.notStrictEqual)},d.throws=function(e,t,n){E(!0,e,t,n)},d.doesNotThrow=function(e,t,n){E(!1,e,t,n)},d.ifError=function(e){if(e)throw e},d.strict=r((function e(t,n){t||m(t,!0,n,"==",e)}),d,{equal:d.strictEqual,deepEqual:d.deepStrictEqual,notEqual:d.notStrictEqual,notDeepEqual:d.notDeepStrictEqual}),d.strict.strict=d.strict;var j=Object.keys||function(e){var t=[];for(var n in e)s.call(e,n)&&t.push(n);return t}}).call(this,n("yLpj"))},A2OQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("1OyB"),i=n("vuIU"),a=n("md7G"),o=n("foSv"),s=n("Ji7U"),u=n("JX7q"),c=n("6Sts"),l=n("lvHR"),f=[34069,34070,34071,34072,34073,34074],d=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,t),(n=Object(a.a)(this,Object(o.a)(t).call(this,e,Object.assign({},i,{target:34067})))).initialize(i),Object.seal(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,n=void 0===t?6408:t,r=e.mipmaps,i=void 0===r||r,a=e.width,o=void 0===a?1:a,s=e.height,u=void 0===s?1:s,c=e.type,f=void 0===c?5121:c,d=e.dataFormat,h=this._deduceParameters({format:n,type:f,dataFormat:d});f=h.type,d=h.dataFormat;var v=this._deduceImageSize({data:e[34069],width:o,height:u});o=v.width,u=v.height,Object(l.a)(o===u),this.setCubeMapImageData(e),i&&this.generateMipmap(e),this.opts=e}},{key:"subImage",value:function(e){var t=e.face,n=e.data,r=e.x,i=void 0===r?0:r,a=e.y,o=void 0===a?0:a,s=e.mipmapLevel,u=void 0===s?0:s;return this._subImage({target:t,data:n,x:i,y:o,mipmapLevel:u})}},{key:"setCubeMapImageData",value:function(e){var t=e.width,n=e.height,r=e.pixels,i=e.data,a=e.border,o=void 0===a?0:a,s=e.format,u=void 0===s?6408:s,c=e.type,l=void 0===c?5121:c,d=(e.generateMipmap,this.gl);if(r=r||i,this.bind(),this.width||this.height)for(var h=0;h<f.length;h++){var v=f[h];d.texImage2D(v,0,u,t,n,o,u,l,r[v])}else for(var g=0;g<f.length;g++){var b=f[g];d.texImage2D(b,0,u,u,l,r[b])}}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index;return void 0!==t&&this.gl.activeTexture(33984+t),this.gl.bindTexture(34067,this.handle),t}},{key:"unbind",value:function(){return this.gl.bindTexture(34067,null),this}}]),t}(c.a);d.FACES=f},AyRc:function(e,t,n){"use strict";(function(e){var r=n("U8pU");t.a="undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type||!(void 0===e||"object"!==Object(r.a)(e.versions)||!Boolean(e.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}).call(this,n("8oxB"))},FVJL:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("RHh3"),i=n("1OyB"),a=n("vuIU"),o=n("7pNt"),s=n("0vGO"),u=n("lvHR"),c={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},l=function(){function e(){var t=this;Object(i.a)(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];r.forEach((function(e){return t._assign(e)})),Object.freeze(this)}return Object(a.a)(e,null,[{key:"getBytesPerElement",value:function(e){return Object(o.c)(e.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){return Object(u.a)(e.size),Object(o.c)(e.type||5126).BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Object(r.a)(e,[c].concat(n))}}]),Object(a.a)(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==e.type&&(this.type!==e.type&&s.a.warn("accessor type mismatch"),this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size!==e.size&&s.a.warn("accessor size mismatch"),this.size=e.size),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.instanced&&(s.a.deprecated("Accessor.instanced","Accessor.divisor"),this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(s.a.deprecated("Accessor.isInstanced","Accessor.divisor"),this.divisor=e.isInstanced?1:0),void 0!==e.index&&(this.index=e.index?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return e.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return e.getBytesPerVertex(this)}}]),e}()},Gujg:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("1OyB"),i=n("vuIU"),a=n("md7G"),o=n("foSv"),s=n("Ji7U"),u=n("JX7q"),c=n("NaB/"),l=n("FVJL"),f=n("xo4u"),d=n("7pNt"),h=n("ket5"),v=n("lvHR"),g=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,t),(n=Object(a.a)(this,Object(o.a)(t).call(this,e,i))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),n.target=i.target||(n.gl.webgl2?36662:34962),n._initialize(i),Object.seal(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"getElementCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l.a.getBytesPerElement(e))}},{key:"getVertexCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l.a.getBytesPerVertex(e))}},{key:"initialize",value:function(e){return this._initialize(e)}},{key:"setProps",value:function(e){return"data"in e&&this.setData(e),this}},{key:"setAccessor",value:function(e){return this.accessor=e,this}},{key:"reallocate",value:function(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,n=t.data,r=t.offset,i=void 0===r?0:r,a=t.srcOffset,o=void 0===a?0:a,s=e.byteLength||e.length;Object(v.a)(n);var u=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(u,this.handle),0!==o||void 0!==s?(Object(f.d)(this.gl),this.gl.bufferSubData(this.target,i,n,o,s)):this.gl.bufferSubData(u,i,n),this.gl.bindBuffer(u,null),this.debugData=null,this.accessor.type||this.setAccessor(new l.a(this.accessor,{type:Object(d.b)(n)})),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,n=e.readOffset,r=void 0===n?0:n,i=e.writeOffset,a=void 0===i?0:i,o=e.size,s=this.gl;return Object(f.d)(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,a,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,n=void 0===t?null:t,r=e.srcByteOffset,i=void 0===r?0:r,a=e.dstOffset,o=void 0===a?0:a,s=e.length,u=void 0===s?0:s;Object(f.d)(this.gl);var c,l,h=Object(d.c)(this.accessor.type||5126,{clamped:!1}),g=this._getAvailableElementCount(i),b=o;n?c=(l=n.length)-b:l=b+(c=Math.min(g,u||g));var m=Math.min(g,c);return u=u||m,Object(v.a)(u<=m),n=n||new h(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,o,u),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r,a=e.offset,o=void 0===a?0:a,s=e.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,i,this.handle,o,s):(Object(v.a)(0===o),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r,a=35345===n||35982===n;return a?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:10}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e.bytes&&h.g.deprecated("bytes","byteLength");var t=e.byteLength||e.bytes||0;return this.usage=e.usage||35044,this.setAccessor(new l.a(e,e.accessor)),e.data?this._setData(e.data):this._setByteLength(t)}},{key:"_setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(v.a)(ArrayBuffer.isView(e));var n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,e,t),this.gl.bindBuffer(n,null),this.usage=t,this.debugData=e.slice(0,10),this.byteLength=e.byteLength,this.bytesUsed=e.byteLength;var r=Object(d.b)(e);return Object(v.a)(r),this.setAccessor(new l.a(this.accessor,{type:r})),this}},{key:"_setByteLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(v.a)(e>=0);var n=e;0===e&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.byteLength=e,this.bytesUsed=e,this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(e){var t=e/Object(d.c)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle)}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"updateAccessor",value:function(e){return h.g.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)"),this.accessor=new l.a(this.accessor,e),this}},{key:"setByteLength",value:function(e){return h.g.deprecated("setByteLength","reallocate"),this.reallocate(e)}},{key:"data",get:function(){h.g.removed("Buffer.data","N/A","v6.0")}},{key:"bytes",get:function(){return h.g.deprecated("Buffer.bytes","Buffer.byteLength","v6.1"),this.byteLength}}]),t}(c.a)},I0ug:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n("U8pU");function i(t){if("undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"===Object(r.a)(e.versions)&&Boolean(e.versions.electron))return!0;var n="object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,i=t||n;return!!(i&&i.indexOf("Electron")>=0)}}).call(this,n("8oxB"))},JD4l:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return v}));var r=n("1OyB"),i=n("oWct"),a=n("r9/M"),o=null,s=function(){throw new Error("luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.")};if(!a.a)try{s=n(1),o=n(2)}catch(g){}var u=function e(){Object(r.a)(this,e)},c=o||i.a,l=c.WebGLRenderingContext,f=void 0===l?u:l,d=(c.WebGLProgram,c.WebGLShader,c.WebGLBuffer),h=void 0===d?u:d;c.WebGLFramebuffer,c.WebGLRenderbuffer,c.WebGLTexture,c.WebGLUniformLocation,c.WebGLActiveInfo,c.WebGLShaderPrecisionFormat;var v=i.a.WebGL2RenderingContext||function e(){Object(r.a)(this,e)};i.a.Image},JX7q:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},Ji7U:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("s4An");function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},K9nA:function(e,t,n){"use strict";(function(e,r){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var i=n("U8pU"),a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===(void 0===r?"undefined":Object(i.a)(r))&&r},o=a.window||a.self||a.global,s=a.process||{};console}).call(this,n("yLpj"),n("8oxB"))},KKCa:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},MCLT:function(e,t,n){(function(e){n("E9XD");var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,o=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),u=r[n];n<a;u=r[++n])g(u)||!_(u)?o+=" "+u:o+=" "+s(u);return o},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var a,o={};function s(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),p(r.showHidden)&&(r.showHidden=!1),p(r.depth)&&(r.depth=2),p(r.colors)&&(r.colors=!1),p(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function c(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&j(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return m(i)||(i=l(e,i,r)),i}var a=function(e,t){if(p(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(b(t))return e.stylize(""+t,"number");if(v(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,n);if(a)return a;var o=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),E(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(n);if(0===o.length){if(j(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(y(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return f(n)}var c,_="",w=!1,x=["{","}"];(h(n)&&(w=!0,x=["[","]"]),j(n))&&(_=" [Function"+(n.name?": "+n.name:"")+"]");return y(n)&&(_=" "+RegExp.prototype.toString.call(n)),O(n)&&(_=" "+Date.prototype.toUTCString.call(n)),E(n)&&(_=" "+f(n)),0!==o.length||w&&0!=n.length?r<0?y(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=w?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)T(t,String(o))?a.push(d(e,t,n,r,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(d(e,t,n,r,i,!0))})),a}(e,n,r,s,o):o.map((function(t){return d(e,n,r,s,t,w)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,_,x)):x[0]+_+x[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),T(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=g(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),p(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function h(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function g(e){return null===e}function b(e){return"number"==typeof e}function m(e){return"string"==typeof e}function p(e){return void 0===e}function y(e){return _(e)&&"[object RegExp]"===w(e)}function _(e){return"object"==typeof e&&null!==e}function O(e){return _(e)&&"[object Date]"===w(e)}function E(e){return _(e)&&("[object Error]"===w(e)||e instanceof Error)}function j(e){return"function"==typeof e}function w(e){return Object.prototype.toString.call(e)}function x(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(p(a)&&(a={}.NODE_DEBUG||""),n=n.toUpperCase(),!o[n])if(new RegExp("\\b"+n+"\\b","i").test(a)){var r=e.pid;o[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else o[n]=function(){};return o[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=v,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=b,t.isString=m,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=p,t.isRegExp=y,t.isObject=_,t.isDate=O,t.isError=E,t.isFunction=j,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n("1gqn");var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var e=new Date,t=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",k(),t.format.apply(t,arguments))},t.inherits=n("KKCa"),t._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var S="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(S&&e[S]){var t;if("function"!=typeof(t=e[S]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,S,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],a=0;a<arguments.length;a++)i.push(arguments[a]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(o){n(o)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),S&&Object.defineProperty(t,S,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=S,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return i.apply(a,arguments)};t.apply(this,n).then((function(t){e.nextTick(o,null,t)}),(function(t){e.nextTick(P,t,o)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n("8oxB"))},"NaB/":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("1OyB"),i=n("vuIU"),a=n("c8wm"),o=n("xo4u"),s=n("ket5"),u=n("lvHR"),c="Resource subclass must define virtual methods",l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,e),Object(o.e)(t);var i=n.id,a=n.userData,u=void 0===a?{}:a;this.gl=t,this.id=i||Object(s.i)(this.constructor.name),this.userData=u,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this._addStats()}return Object(i.a)(e,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteChildren,n=void 0!==t&&t,r=this._handle&&this._deleteHandle(this._handle);return this._handle=null,this._removeStats(),r&&n&&r.filter(Boolean).forEach((function(e){e.delete()})),this}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(o.j)(this.gl,e),Object(u.a)(e);var n=this.constructor.PARAMETERS||{},r=n[e];if(r){var i=Object(o.n)(this.gl),a=(!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension));if(!a){var s=r.webgl1,c="webgl2"in r?r.webgl2:r.webgl1,l=i?c:s;return l}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=t.parameters,r=t.keys,i=this.constructor.PARAMETERS||{},a=Object(o.n)(this.gl),s={},u=n||Object.keys(i),c=!0,l=!1,f=void 0;try{for(var d,h=u[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var v=d.value,g=i[v],b=g&&(!("webgl2"in g)||a)&&(!("extension"in g)||this.gl.getExtension(g.extension));if(b){var m=r?Object(o.i)(this.gl,v):v;s[m]=this.getParameter(v,e),r&&"GLenum"===g.type&&(s[m]=Object(o.i)(this.gl,s[m]))}}}catch(p){l=!0,f=p}finally{try{c||null==h.return||h.return()}finally{if(l)throw f}}return s}},{key:"setParameter",value:function(e,t){e=Object(o.j)(this.gl,e),Object(u.a)(e);var n=(this.constructor.PARAMETERS||{})[e];if(n){var r=Object(o.n)(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(t=Object(o.j)(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function(e,t,n){return Object(s.h)(this,e,t,n)}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(c)}},{key:"_deleteHandle",value:function(){throw new Error(c)}},{key:"_bindHandle",value:function(){throw new Error(c)}},{key:"_getOptsFromHandle",value:function(){throw new Error(c)}},{key:"_getParameter",value:function(e,t){throw new Error(c)}},{key:"_setParameter",value:function(e,t){throw new Error(c)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=a.default.stats;t.resourceCount=t.resourceCount||0,t.resourceMap=t.resourceMap||{},t.resourceCount++,t.resourceMap[e]=t.resourceMap[e]||{created:0,active:0},t.resourceMap[e].created++,t.resourceMap[e].active++}},{key:"_removeStats",value:function(){var e=this.constructor.name;a.default.stats.resourceMap[e].active--}},{key:"handle",get:function(){return this._handle}}]),e}()},NhK1:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.installParameterDefinitions=function(){},t.TEXTURE_PARAMETERS=t.SAMPLER_PARAMETERS=t.RENDERBUFFER_PARAMETERS=t.PROGRAM_PARAMETERS=t.FRAMEBUFFER_STATUS=t.FRAMEBUFFER_ATTACHMENT_PARAMETERS=t.FENCE_SYNC_PARAMETERS=t.BUFFER_PARAMETERS=t.GLboolean=t.GLuint=t.GLint=t.GLfloat=t.GLenum=void 0;var i,a,o,s,u,c,l=r(n("lSNA"));t.GLenum="GLenum";t.GLfloat="GLfloat";t.GLint="GLint";t.GLuint="GLint";t.GLboolean="GLboolean";var f=(i={},(0,l.default)(i,34660,{webgl1:0}),(0,l.default)(i,34661,{webgl1:0}),i);t.BUFFER_PARAMETERS=f;t.FENCE_SYNC_PARAMETERS=[37138,37140,37139,37141];t.FRAMEBUFFER_ATTACHMENT_PARAMETERS=[36049,36048,36051,36050,33296,36052,33298,33299,33300,33301,33302,33303,33297];var d=(a={},(0,l.default)(a,36053,"Success. Framebuffer is correctly set up"),(0,l.default)(a,36054,"Framebuffer attachment types mismatched or some attachment point not attachment complete"),(0,l.default)(a,36055,"Framebuffer has no attachment"),(0,l.default)(a,36057,"Framebuffer attachments do not have the same size"),(0,l.default)(a,36061,"Framebuffer attachment format not supported or depth and stencil attachments are not same"),(0,l.default)(a,36182,"Framebuffer attachement SAMPLES differs among renderbuffers, or are mixed with textures"),a);t.FRAMEBUFFER_STATUS=d;var h=(o={},(0,l.default)(o,35712,{webgl1:0}),(0,l.default)(o,35714,{webgl1:0}),(0,l.default)(o,35715,{webgl1:0}),(0,l.default)(o,35717,{webgl1:0}),(0,l.default)(o,35721,{webgl1:0}),(0,l.default)(o,35718,{webgl1:0}),(0,l.default)(o,35967,{webgl2:0}),(0,l.default)(o,35971,{webgl2:0}),(0,l.default)(o,35382,{webgl2:0}),o);t.PROGRAM_PARAMETERS=h;var v=(s={},(0,l.default)(s,36162,{webgl1:0}),(0,l.default)(s,36163,{webgl1:0}),(0,l.default)(s,36164,{type:"GLenum",webgl1:32854}),(0,l.default)(s,36177,{webgl1:0}),(0,l.default)(s,36178,{webgl1:0}),(0,l.default)(s,36176,{webgl1:0}),(0,l.default)(s,36179,{webgl1:0}),(0,l.default)(s,36180,{webgl1:0}),(0,l.default)(s,36181,{webgl1:0}),(0,l.default)(s,36011,{webgl2:1}),s);t.RENDERBUFFER_PARAMETERS=v;var g=(u={},(0,l.default)(u,10240,{webgl2:!0}),(0,l.default)(u,10241,{webgl2:!0}),(0,l.default)(u,10242,{webgl2:!0}),(0,l.default)(u,10243,{webgl2:!0}),(0,l.default)(u,32882,{webgl2:!0}),(0,l.default)(u,33084,{webgl2:!0}),(0,l.default)(u,33085,{webgl2:!0}),(0,l.default)(u,34893,{webgl2:!0}),(0,l.default)(u,34892,{webgl2:!0}),(0,l.default)(u,33082,{webgl2:!0}),(0,l.default)(u,33083,{webgl2:!0}),u);t.SAMPLER_PARAMETERS=g;var b=(c={},(0,l.default)(c,10240,{type:"GLenum",webgl1:9729}),(0,l.default)(c,10241,{type:"GLenum",webgl1:9986}),(0,l.default)(c,10242,{type:"GLenum",webgl1:10497}),(0,l.default)(c,10243,{type:"GLenum",webgl1:10497}),(0,l.default)(c,32882,{type:"GLenum",webgl2:10497}),(0,l.default)(c,33084,{webgl2:0}),(0,l.default)(c,33085,{webgl2:1e3}),(0,l.default)(c,34893,{type:"GLenum",webgl2:515}),(0,l.default)(c,34892,{type:"GLenum",webgl2:0}),(0,l.default)(c,33082,{webgl2:-1e3}),(0,l.default)(c,33083,{webgl2:1e3}),(0,l.default)(c,4096,{webgl1:0}),(0,l.default)(c,4097,{webgl1:0}),c);t.TEXTURE_PARAMETERS=b},Nx27:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("1OyB"),i=n("md7G"),a=n("foSv"),o=n("vuIU"),s=n("Ji7U"),u=n("JX7q"),c=n("xo4u"),l=n("Sr2d"),f=n("6Sts"),d=n("Gujg"),h=function(e){function t(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,t),Object(c.d)(e),(n=Object(i.a)(this,Object(a.a)(t).call(this,e,Object.assign({},o,{target:o.target||32879})))).width=null,n.height=null,n.depth=null,Object.seal(Object(u.a)(Object(u.a)(n))),n.setImageData(o),o.generateMipmap&&n.generateMipmap(),n}return Object(s.a)(t,e),Object(o.a)(t,null,[{key:"isSupported",value:function(e){return Object(c.n)(e)}}]),Object(o.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Object.assign({},this.opts,t);var n=this.opts,r=n.pixels,i=n.settings;i&&(Object(l.c)(i,(function(){r&&e.setImage3D(e.opts)})),this.setParameters(t))}},{key:"setImage3D",value:function(e){var t=e.level,n=void 0===t?0:t,r=e.internalformat,i=void 0===r?6408:r,a=e.width,o=e.height,s=e.depth,u=void 0===s?1:s,c=e.border,l=void 0===c?0:c,f=e.format,h=e.type,v=void 0===h?5121:h,g=e.offset,b=void 0===g?0:g,m=e.pixels;ArrayBuffer.isView(m)?this.gl.texImage3D(this.target,n,i,a,o,u,l,f,v,m):m instanceof d.a&&(this.gl.bindBuffer(35052,m.handle),this.gl.texImage3D(this.target,n,i,a,o,u,l,f,v,b),this.gl.bindBuffer(35052,m.handle))}}]),t}(f.a)},ODXe:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("BsWD");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},QFcT:function(e,t,n){var r=n("I+eb"),i=Math.hypot,a=Math.abs,o=Math.sqrt;r({target:"Math",stat:!0,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,i=0,s=0,u=arguments.length,c=0;s<u;)c<(n=a(arguments[s++]))?(i=i*(r=c/n)*r+1,c=n):i+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*o(i)}})},RHh3:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("s4An");function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function a(e,t,n){return(a=i()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&Object(r.a)(a,n.prototype),a}).apply(null,arguments)}},RXBc:function(e,t,n){"use strict";n.r(t);n("E9XD");var r=n("q1tI"),i=n.n(r),a=n("Bl7J"),o=n("dI71"),s=n("Y3Mf"),u=n("uuth"),c=(n("WsjP"),n("gBGw"),n("ggbK")),l=n("xo4u"),f=n("JD4l");function d(e){var t=e.width,n=e.height,r=e.opts,i=e.onError,a=r.webgl1;if(r.webgl2&&!a)return i("headless-gl does not support WebGL2");if(!f.d)return i("Failed to create WebGL context in Node.js, headless gl not available");var o=Object(f.d)(t,n,r);return o||i("Failed to create WebGL context in Node.js, headless gl returned null")}var h,v=n("ket5"),g=v.c&&"undefined"!=typeof document,b=g&&"complete"===document.readyState;function m(){return h||(h=g?new Promise((function(e,t){if(g&&"complete"===document.readyState)return b=!0,void e(document);window.onload=function(){b=!0,e(document)}})):Promise.resolve({})),h}function p(e){var t,n=e.canvas,r=e.width,i=e.height,a=e.onError,o=void 0===a?function(){}:a;return"string"==typeof n?(b||o("createGLContext called on canvas '".concat(n,"' before page was loaded")),t=document.getElementById(n)):t=n||function(e){var t=e.width,n=void 0===t?800:t,r=e.height,i=void 0===r?600:r,a=e.id,o=void 0===a?"gl-canvas":a,s=e.insert,u=void 0===s||s,c=document.createElement("canvas");if(c.id=o,c.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",c.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",u){var l=document.body;l.insertBefore(c,l.firstChild)}return c}({id:"lumagl-canvas",width:r,height:i,onError:o}),t}function y(e){var t=e.canvas,n=e.opts,r=void 0===n?{}:n,i=e.onError,a=void 0===i?function(e){return null}:i;function o(e){a("WebGL context: ".concat(e.statusMessage||"Unknown error"))}t.addEventListener("webglcontextcreationerror",o,!1);var s=r.webgl1,u=void 0===s||s,c=r.webgl2,l=void 0===c||c,f=null;return l&&(f=(f=f||t.getContext("webgl2",r))||t.getContext("experimental-webgl2",r)),u&&(f=(f=f||t.getContext("webgl",r))||t.getContext("experimental-webgl",r)),t.removeEventListener("webglcontextcreationerror",o,!1),f||a("Failed to create ".concat(l&&!u?"WebGL2":"WebGL"," context"))}var _=n("r+5q"),O=n("1OyB"),E=n("oWct");function j(e){return e.luma=e.luma||{},e.luma}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.debug,r=void 0===n||n;return null===e?null:r?A(e):x(e)}function x(e){if(null===e)return null;var t=j(e);return t.realContext?t.realContext:e}function A(e){if(null===e)return null;if(!E.a.WebGLDebug)return v.g.warn('WebGL debug mode not activated. import "luma.gl/debug" to enable.')(),e;var t=j(e);if(t.realContext)return e;if(t.debugContext)return t.debugContext;var n=E.a.WebGLDebug.makeDebugContext(e,T,S);return Object.assign(function e(){Object(O.a)(this,e)}.prototype,n),t.debugContext=n,n.debug=!0,n.gl=e,v.g.info("debug context actived."),n}function k(e,t){var n=E.a.WebGLDebug.glFunctionArgsToString(e,t);return n="".concat(n.slice(0,100)).concat(n.length>100?"...":""),"gl.".concat(e,"(").concat(n,")")}function T(e,t,n){var r=E.a.WebGLDebug.glEnumToString(e),i=E.a.WebGLDebug.glFunctionArgsToString(t,n),a="".concat(r," in gl.").concat(t,"(").concat(i,")");if(v.g.throw)throw new Error(a);v.g.error(a)()}function S(e,t){var n;if(v.g.priority>=4&&(n=k(e,t),v.g.log(4,n)()),v.g.break){n=n||k(e,t);v.g.break&&v.g.break.every((function(e){return-1!==n.indexOf(e)}))}var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){if(void 0===o.value){if(n=n||k(e,t),v.g.throw)throw new Error("Undefined argument: ".concat(n));v.g.error("Undefined argument: ".concat(n))}}}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}var P,L=n("rePB");P={},Object(L.a)(P,33902,{gl1:new Float32Array([1,1])}),Object(L.a)(P,33901,{gl1:new Float32Array([1,1])}),Object(L.a)(P,3379,{gl1:64,gl2:2048}),Object(L.a)(P,34076,{gl1:16}),Object(L.a)(P,34930,{gl1:8}),Object(L.a)(P,35661,{gl1:8}),Object(L.a)(P,35660,{gl1:0}),Object(L.a)(P,34024,{gl1:1}),Object(L.a)(P,36348,{gl1:8}),Object(L.a)(P,34921,{gl1:8}),Object(L.a)(P,36347,{gl1:128}),Object(L.a)(P,36349,{gl1:16}),Object(L.a)(P,3386,{gl1:new Int32Array([0,0])}),Object(L.a)(P,32883,{gl1:0,gl2:256}),Object(L.a)(P,35071,{gl1:0,gl2:256}),Object(L.a)(P,37447,{gl1:0,gl2:0}),Object(L.a)(P,36063,{gl1:0,gl2:4}),Object(L.a)(P,35379,{gl1:0,gl2:0}),Object(L.a)(P,35374,{gl1:0,gl2:0}),Object(L.a)(P,35377,{gl1:0,gl2:0}),Object(L.a)(P,34852,{gl1:0,gl2:4}),Object(L.a)(P,36203,{gl1:0,gl2:0}),Object(L.a)(P,33001,{gl1:0,gl2:0}),Object(L.a)(P,33e3,{gl1:0,gl2:0}),Object(L.a)(P,37157,{gl1:0,gl2:0}),Object(L.a)(P,35373,{gl1:0,gl2:0}),Object(L.a)(P,35657,{gl1:0,gl2:0}),Object(L.a)(P,36183,{gl1:0,gl2:0}),Object(L.a)(P,37137,{gl1:0,gl2:0}),Object(L.a)(P,34045,{gl1:0,gl2:0}),Object(L.a)(P,35978,{gl1:0,gl2:0}),Object(L.a)(P,35979,{gl1:0,gl2:0}),Object(L.a)(P,35968,{gl1:0,gl2:0}),Object(L.a)(P,35376,{gl1:0,gl2:0}),Object(L.a)(P,35375,{gl1:0,gl2:0}),Object(L.a)(P,35659,{gl1:0,gl2:0}),Object(L.a)(P,37154,{gl1:0,gl2:0}),Object(L.a)(P,35371,{gl1:0,gl2:0}),Object(L.a)(P,35658,{gl1:0,gl2:0}),Object(L.a)(P,35076,{gl1:0,gl2:-8,negative:!0}),Object(L.a)(P,35077,{gl1:0,gl2:7}),Object(L.a)(P,35380,{gl1:0,gl2:0});var F=n("vuIU"),I=function(e){return e},R=new(function(){function e(){Object(O.a)(this,e),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return Object(F.a)(e,[{key:"poll",value:function(e){this.cancelInvalidQueries(e);var t=!0,n=!1,r=void 0;try{for(var i,a=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.isResultAvailable()){var s=o.getResult();this.resolveQuery(o,s)}}}catch(u){n=!0,r=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"setInvalidator",value:function(e){var t=e.queryType,n=e.errorMessage,r=e.checkInvalid;this.invalidQueryType=t,this.invalidErrorMessage=n,this.checkInvalid=r}},{key:"beginQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I;this.cancelInvalidQueries(e.gl),this.cancelQuery(e);var r={};return e.promise=new Promise((function(e,t){r.resolve=e,r.reject=t})),Object.assign(e.promise,r),this.pendingQueries.add(e),e.promise.then(t).catch(n)}},{key:"resolveQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise.resolve(t)}},{key:"rejectQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise&&e.promise.reject(new Error(t))}},{key:"deleteQuery",value:function(e){return this.rejectQuery(e,"Query was deleted before result was available")}},{key:"cancelQuery",value:function(e){return this.rejectQuery(e,"Query was canceled before result was available")}},{key:"invalidateQuery",value:function(e){e instanceof this.invalidQueryType&&this.rejectQuery(e,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function(e){if(this.checkInvalid(e)){var t=!0,n=!1,r=void 0;try{for(var i,a=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this.invalidateQuery(o)}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}}]),e}()),N=n("lvHR");function M(e){return Boolean(e&&(e instanceof l.a||32874===e.TEXTURE_BINDING_3D))}var B={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function C(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t=Object.assign({},B,t),r=n.canvas,i=n.width,a=n.height,o=n.throwOnError,s=n.manageState,u=n.debug;function c(e){if(o)throw new Error(e);return null}if(v.c){var l=p({canvas:r,width:i,height:a,onError:c});e=y({canvas:l,opts:t})}else e=d({width:i,height:a,opts:t,onError:c});return e?(s&&Object(_.a)(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.g.log.apply(v.g,[1].concat(t))()}}),v.c&&u&&(e=w(e,{debug:u}),v.g.priority=Math.max(v.g.priority,1)),D(e),e):null}function D(e){var t=M(e)?"WebGL2":"WebGL1",n=function(e){return function(e){var t=e.getParameter(7936),n=e.getParameter(7937),r=e.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e)}(e),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=e.debug?" debug":"";v.g.once(0,"".concat(t).concat(i," context ").concat(r))()}var U=n("Sr2d"),G={VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:["WEBGL_color_buffer_float","EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:[!1,"EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},z={};Object.keys(G).forEach((function(e){z[e]=e}));function W(e,t){var n=G[t];Object(N.a)(n,t);var r=Object(l.n)(e)&&n[1]||n[0],i="string"==typeof r?Boolean(e.getExtension(r)):r;return Object(N.a)(!1===i||!0===i),i}function V(e,t){return H(e,t)}function H(e,t){return(t=Array.isArray(t)?t:[t]).every((function(t){return W(e,t)}))}var X=n("Gujg"),q=n("md7G"),Q=n("foSv"),K=n("Ji7U"),Y=n("NaB/"),J=function(e){function t(e,n){var r;Object(O.a)(this,t),Object(l.e)(e),Object(N.a)("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string");var i=Object(l.k)(n.source,null)||n.id||Object(v.i)("unnamed ".concat(t.getTypeName(n.shaderType)));return(r=Object(q.a)(this,Object(Q.a)(t).call(this,e,{id:i}))).shaderType=n.shaderType,r.source=n.source,r.initialize(n),r}return Object(K.a)(t,e),Object(F.a)(t,null,[{key:"getTypeName",value:function(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Object(N.a)(!1),"unknown"}}}]),Object(F.a)(t,[{key:"initialize",value:function(e){var t=e.source,n=Object(l.k)(t,null);n&&(this.id=Object(v.i)(n)),this._compile(t)}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(this.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return Object(l.k)(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var e=this.gl.getShaderInfoLog(this.handle),t=Object(l.o)(e,this.source,this.shaderType,this.id),n=t.shaderName,r=t.errors,i=t.warnings;throw v.g.error("GLSL compilation errors in ".concat(n,"\n").concat(r))(),v.g.warn("GLSL compilation warnings in ".concat(n,"\n").concat(i))(),new Error("GLSL compilation errors in ".concat(n))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),t}(Y.a),Z=function(e){function t(e,n){return Object(O.a)(this,t),"string"==typeof n&&(v.g.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),n={source:n}),Object(q.a)(this,Object(Q.a)(t).call(this,e,Object.assign({},n,{shaderType:35633})))}return Object(K.a)(t,e),Object(F.a)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),t}(J),$=function(e){function t(e,n){return Object(O.a)(this,t),"string"==typeof n&&(v.g.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),n={source:n}),Object(q.a)(this,Object(Q.a)(t).call(this,e,Object.assign({},n,{shaderType:35632})))}return Object(K.a)(t,e),Object(F.a)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),t}(J);function ee(e,t,n){return(ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(Q.a)(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var te,ne=n("JX7q"),re=n("6Sts"),ie=n("ODXe"),ae=n("SR+o"),oe="EXT_color_buffer_float",se=(te={},Object(L.a)(te,33189,{}),Object(L.a)(te,33190,{gl2:!0}),Object(L.a)(te,36012,{gl2:!0}),Object(L.a)(te,36168,{}),Object(L.a)(te,34041,{}),Object(L.a)(te,35056,{gl2:!0}),Object(L.a)(te,36013,{gl2:!0}),Object(L.a)(te,32854,{}),Object(L.a)(te,36194,{}),Object(L.a)(te,32855,{}),Object(L.a)(te,33321,{gl2:!0}),Object(L.a)(te,33330,{gl2:!0}),Object(L.a)(te,33329,{gl2:!0}),Object(L.a)(te,33332,{gl2:!0}),Object(L.a)(te,33331,{gl2:!0}),Object(L.a)(te,33334,{gl2:!0}),Object(L.a)(te,33333,{gl2:!0}),Object(L.a)(te,33323,{gl2:!0}),Object(L.a)(te,33336,{gl2:!0}),Object(L.a)(te,33335,{gl2:!0}),Object(L.a)(te,33338,{gl2:!0}),Object(L.a)(te,33337,{gl2:!0}),Object(L.a)(te,33340,{gl2:!0}),Object(L.a)(te,33339,{gl2:!0}),Object(L.a)(te,32849,{gl2:!0}),Object(L.a)(te,32856,{gl2:!0}),Object(L.a)(te,32857,{gl2:!0}),Object(L.a)(te,36220,{gl2:!0}),Object(L.a)(te,36238,{gl2:!0}),Object(L.a)(te,36975,{gl2:!0}),Object(L.a)(te,36214,{gl2:!0}),Object(L.a)(te,36232,{gl2:!0}),Object(L.a)(te,36226,{gl2:!0}),Object(L.a)(te,36208,{gl2:!0}),Object(L.a)(te,33325,{gl2:oe}),Object(L.a)(te,33327,{gl2:oe}),Object(L.a)(te,34842,{gl2:oe}),Object(L.a)(te,33326,{gl2:oe}),Object(L.a)(te,33328,{gl2:oe}),Object(L.a)(te,34836,{gl2:oe}),Object(L.a)(te,35898,{gl2:oe}),te);function ue(e,t,n){var r=n[t];if(!r)return!1;var i=Object(l.n)(e)&&r.gl2||r.gl1;return"string"==typeof i?e.getExtension(i):i}var ce=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(O.a)(this,t),(n=Object(q.a)(this,Object(Q.a)(t).call(this,e,r))).initialize(r),Object.seal(Object(ne.a)(Object(ne.a)(n))),n}return Object(K.a)(t,e),Object(F.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format;return!n||ue(e,n,se)}},{key:"getSamplesForFormat",value:function(e,t){var n=t.format;return e.getInternalformatParameter(36161,n,32937)}}]),Object(F.a)(t,[{key:"initialize",value:function(e){var t=e.format,n=e.width,r=void 0===n?1:n,i=e.height,a=void 0===i?1:i,o=e.samples,s=void 0===o?0:o;return Object(N.a)(t,"Needs format"),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&Object(l.n)(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,t,r,a):this.gl.renderbufferStorage(36161,t,r,a),this.format=t,this.width=r,this.height=a,this.samples=s,this}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),t}(Y.a);function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.color,a=void 0===i?null:i,o=t.depth,s=void 0===o?null:o,u=t.stencil,c=void 0===u?null:u,l={};r&&(l.framebuffer=r);var f=0;a&&(f|=16384,!0!==a&&(l.clearColor=a)),s&&(f|=256,!0!==s&&(l.clearDepth=s)),c&&(f|=1024,!0!==s&&(l.clearStencil=s)),Object(N.a)(0!==f,"clear: bad arguments"),Object(U.c)(e,l,(function(){e.clear(f)}))}function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.buffer,a=void 0===i?6144:i,o=t.drawBuffer,s=void 0===o?0:o,u=t.value,c=void 0===u?[0,0,0,0]:u;Object(l.d)(e),Object(U.c)(e,{framebuffer:r},(function(){switch(a){case 6144:switch(c.constructor){case Int32Array:e.clearBufferiv(a,s,c);break;case Uint32Array:e.clearBufferuiv(a,s,c);break;case Float32Array:default:e.clearBufferfv(a,s,c)}break;case 6145:e.clearBufferfv(6145,0,[c]);break;case 6146:e.clearBufferiv(6146,0,[c]);break;case 34041:var t=Object(ie.a)(c,2),n=t[0],r=t[1];e.clearBufferfi(34041,0,n,r);break;default:Object(N.a)(!1,"clear: bad arguments")}}))}var de=n("7pNt");function he(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(N.a)(!1),0}}var ve=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(O.a)(this,t),(n=Object(q.a)(this,Object(Q.a)(t).call(this,e,r))).width=null,n.height=null,n.attachments={},n.readBuffer=36064,n.drawBuffers=[36064],n.initialize(r),Object.seal(Object(ne.a)(Object(ne.a)(n))),n}return Object(K.a)(t,e),Object(F.a)(t,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colorBufferFloat,r=t.colorBufferHalfFloat;return n&&e.getExtension(Object(l.n)(e)?"EXT_color_buffer_float":"WEBGL.color_buffer_float"),r&&e.getExtension(Object(l.n)(e)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new t(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),Object(F.a)(t,[{key:"initialize",value:function(e){var t=e.width,n=void 0===t?1:t,r=e.height,i=void 0===r?1:r,a=e.attachments,o=void 0===a?null:a,s=e.color,u=void 0===s||s,c=e.depth,l=void 0===c||c,f=e.stencil,d=void 0!==f&&f,h=e.check,v=void 0===h||h,g=e.readBuffer,b=e.drawBuffers;if(Object(N.a)(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,o)for(var m in o){var p=o[m];(Array.isArray(p)?p[0]:p).resize({width:n,height:i})}else o=this._createDefaultAttachments(u,l,d,n,i);this.update({clearAttachments:!0,attachments:o,readBuffer:g,drawBuffers:b}),o&&v&&this.checkStatus()}},{key:"update",value:function(e){var t=e.attachments,n=void 0===t?{}:t,r=e.readBuffer,i=e.drawBuffers,a=e.clearAttachments,o=void 0!==a&&a,s=e.resizeAttachments,u=void 0===s||s;this.attach(n,{clearAttachments:o,resizeAttachments:u});var c=this.gl,l=c.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),c.bindFramebuffer(36160,l||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;if(null===this.handle)return Object(N.a)(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&v.g.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(n)),this.attachments)this.attachments[r].resize({width:t,height:n});return this.width=t,this.height=n,this}},{key:"attach",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clearAttachments,i=void 0!==r&&r,a=n.resizeAttachments,o=void 0===a||a,s={};i&&Object.keys(this.attachments).forEach((function(e){s[e]=null})),Object.assign(s,e);var u=this.gl.bindFramebuffer(36160,this.handle);for(var c in s){Object(N.a)(void 0!==c,"Misspelled framebuffer binding point?");var l=Number(c),f=s[l],d=f;if(d)if(d instanceof ce)this._attachRenderbuffer({attachment:l,renderbuffer:d});else if(Array.isArray(f)){var h=Object(ie.a)(f,3),v=h[0],g=h[1],b=void 0===g?0:g,m=h[2],p=void 0===m?0:m;d=v,this._attachTexture({attachment:l,texture:v,layer:b,level:p})}else this._attachTexture({attachment:l,texture:d,layer:0,level:0});else this._unattach(l);o&&d&&d.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,u||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter((function(e){return!t.attachments[e]})).forEach((function(e){delete t.attachments[e]}))}},{key:"checkStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);if(e.bindFramebuffer(36160,t||null),36053!==n)throw new Error(function(e){return(ve.STATUS||{})[e]||"Framebuffer error ".concat(e)}(n));return this}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.depth,r=e.stencil,i=e.drawBuffers,a=void 0===i?[]:i,o=this.gl.bindFramebuffer(36160,this.handle);return(t||n||r)&&le(this.gl,{color:t,depth:n,stencil:r}),a.forEach((function(e,t){fe({drawBuffer:t,value:e})})),this.gl.bindFramebuffer(36160,o||null),this}},{key:"readPixels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,a=e.width,o=void 0===a?this.width:a,s=e.height,u=void 0===s?this.height:s,c=e.format,l=void 0===c?6408:c,f=e.type,d=e.pixelArray,h=void 0===d?null:d,v=e.attachment,g=void 0===v?36064:v;this.gl;if(36064===g&&null===this.handle&&(g=1028),Object(N.a)(this.attachments[g]),f=f||this.attachments[g].type,!h){f=f||5121;var b=Object(de.c)(f,{clamped:!1}),m=he(l);h=h||new b(o*u*m)}f=f||Object(de.b)(h);var p=this.gl.bindFramebuffer(36160,this.handle);return this.gl.readPixels(n,i,o,u,l,f,h),this.gl.bindFramebuffer(36160,p||null),h}},{key:"readPixelsToBuffer",value:function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,a=e.width,o=void 0===a?this.width:a,s=e.height,u=void 0===s?this.height:s,c=e.format,f=void 0===c?6408:c,d=e.type,h=e.buffer,v=void 0===h?null:h,g=e.byteOffset,b=void 0===g?0:g,m=this.gl;if(Object(l.d)(m),d=d||(v?v.type:5121),!v){var p=he(f),y=function(e){switch(e){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return Object(N.a)(!1),0}}(d),_=b+o*u*p*y;v=new X.a(m,{bytes:_,type:d,size:p})}return v.bind({target:35051}),Object(U.c)(m,{framebuffer:this},(function(){m.readPixels(n,i,o,u,f,d,b)})),v.unbind({target:35051}),v}},{key:"copyToDataUrl",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attachment,n=void 0===t?36064:t,r=e.maxHeight,i=void 0===r?Number.MAX_SAFE_INTEGER:r,a=this.readPixels({attachment:n}),o=this.width,s=this.height;s>i;){var u=Object(l.q)({data:a,width:o,height:s});a=u.data,o=u.width,s=u.height}Object(l.h)({data:a,width:o,height:s});var c=document.createElement("canvas");c.width=o,c.height=s;var f=c.getContext("2d"),d=f.createImageData(o,s);return d.data.set(a),f.putImageData(d,0,0),c.toDataURL()}},{key:"copyToImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,n=void 0===t?null:t,r=e.attachment,i=void 0===r?36064:r,a=e.maxHeight,o=(void 0===a&&Number.MAX_SAFE_INTEGER,this.readDataUrl({attachment:i}));return(n=n||new Image).src=o,n}},{key:"copyToTexture",value:function(e){var t=e.texture,n=e.target,r=e.xoffset,i=void 0===r?0:r,a=e.yoffset,o=void 0===a?0:a,s=e.zoffset,u=void 0===s?0:s,c=e.mipmapLevel,l=void 0===c?0:c,f=(e.attachment,e.x),d=void 0===f?0:f,h=e.y,v=void 0===h?0:h,g=e.width,b=e.height,m=this.gl,p=m.bindFramebuffer(36160,this.handle);switch(Object(N.a)(n||t),t&&(g=Number.isFinite(g)?g:t.width,b=Number.isFinite(b)?b:t.height,t.bind(0)),t.target){case 3553:case 34067:m.copyTexSubImage2D(n||t.target,l,i,o,d,v,g,b);break;case 35866:case 32879:m.copyTexSubImage3D(n||t.target,l,i,o,u,d,v,g,b)}return t&&t.unbind(),m.bindFramebuffer(36160,p||null),t}},{key:"blit",value:function(e){var t=e.srcFramebuffer,n=e.attachment,r=void 0===n?36064:n,i=e.srcX0,a=void 0===i?0:i,o=e.srcY0,s=void 0===o?0:o,u=e.srcX1,c=e.srcY1,f=e.dstX0,d=void 0===f?0:f,h=e.dstY0,v=void 0===h?0:h,g=e.dstX1,b=e.dstY1,m=e.color,p=void 0===m||m,y=e.depth,_=void 0!==y&&y,O=e.stencil,E=void 0!==O&&O,j=e.mask,w=void 0===j?0:j,x=e.filter,A=void 0===x?9728:x,k=this.gl;Object(l.d)(k),t.handle||36064!==r||(r=1028),p&&(w|=16384),_&&(w|=256),E&&(w|=1024),Object(N.a)(w),u=void 0===u?t.width:u,c=void 0===c?t.height:c,g=void 0===g?this.width:g,b=void 0===b?this.height:b;var T=k.bindFramebuffer(36009,this.handle),S=k.bindFramebuffer(36008,t.handle);return k.readBuffer(r),k.blitFramebuffer(a,s,u,c,d,v,g,b,w,A),k.readBuffer(this.readBuffer),k.bindFramebuffer(36008,S||null),k.bindFramebuffer(36009,T||null),this}},{key:"invalidate",value:function(e){var t=e.attachments,n=void 0===t?[]:t,r=e.x,i=void 0===r?0:r,a=e.y,o=void 0===a?0:a,s=e.width,u=e.height,c=this.gl;Object(l.d)(c);var f=c.bindFramebuffer(36008,this.handle);return 0===i&&0===o&&void 0===s&&void 0===u?c.invalidateFramebuffer(36008,n):c.invalidateFramebuffer(36008,n,i,o,s,u),c.bindFramebuffer(36008,f),this}},{key:"getAttachmentParameter",value:function(e,t,n){var r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=Object(c.c)(this.gl,r)),r}},{key:"getAttachmentParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],r={},i=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,f=t?Object(c.c)(this.gl,l):l;r[f]=this.getAttachmentParameter(e,l,t)}}catch(d){a=!0,o=d}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}},{key:"getParameters",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.attachments),n={},r=0;r<t.length;r++){var i=t[r],a=Number(i),o=e?Object(c.c)(this.gl,a):a;n[o]=this.getAttachmentParameters(a,e)}return n}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(this.copyToDataUrl(),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>v.g.priority||"undefined"==typeof window)return this;t=t||"Framebuffer ".concat(this.id);var n=this.copyToDataUrl({maxHeight:100});return v.g.image({priority:e,message:t,image:n},t)(),this}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(e,t,n,r,i){var a,o=null;e&&((o=o||{})[36064]=new ae.a(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:(a={},Object(L.a)(a,10241,9728),Object(L.a)(a,10240,9728),Object(L.a)(a,10242,33071),Object(L.a)(a,10243,33071),a)}));return t&&n?(o=o||{})[33306]=new ce(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}):t?(o=o||{})[36096]=new ce(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}):n&&Object(N.a)(!1),o}},{key:"_unattach",value:function(e){var t=this.attachments[e];t&&(t instanceof ce?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.texture,i=e.layer,a=e.level,o=this.gl;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:o.framebufferTextureLayer(36160,n,r.target,a,i);break;case 34067:var s=function(e){return e<34069?e+34069:e}(i);o.framebufferTexture2D(36160,n,s,r.handle,a);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,a);break;default:Object(N.a)(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(e,t){Object(l.n)(e)?e.readBuffer(t):Object(N.a)(36064===t||1029===t,"Multiple render targets not supported"),this.readBuffer=t}},{key:"_setDrawBuffers",value:function(e,t){if(Object(l.n)(e))e.drawBuffers(t);else{var n=e.getExtension("WEBGL.draw_buffers");n?n.drawBuffersWEBGL(t):Object(N.a)(1===t.length&&(36064===t[0]||1029===t[0]),"Multiple render targets not supported")}this.drawBuffers=t}},{key:"_getAttachmentParameterFallback",value:function(e){var t=function(e){if(e.luma=e.luma||{},!e.luma.caps)for(var t in e.luma.caps={},e.luma.caps.webgl2=Object(l.n)(e),G)e.luma.caps[t]=W(e,t);return e.luma.caps}(this.gl);switch(e){case 36052:return t.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.webgl2?null:8;case 33297:return t.webgl2?null:5125;case 33296:return t.webgl2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),t}(Y.a);ve.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];var ge,be=function(e){function t(e,n){var r;return Object(O.a)(this,t),Object(l.d)(e),r=Object(q.a)(this,Object(Q.a)(t).call(this,e,n)),Object.seal(Object(ne.a)(Object(ne.a)(r))),r}return Object(K.a)(t,e),Object(F.a)(t,null,[{key:"isSupported",value:function(e){return Object(l.n)(e)}}]),Object(F.a)(t,[{key:"bind",value:function(e){return this.gl.bindSampler(e,this.handle),this}},{key:"unbind",value:function(e){return this.gl.bindSampler(e,null),this}},{key:"_createHandle",value:function(){return this.gl.createSampler()}},{key:"_deleteHandle",value:function(){this.gl.deleteSampler(this.handle)}},{key:"_getParameter",value:function(e){return this.gl.getSamplerParameter(this.handle,e)}},{key:"_setParameter",value:function(e,t){switch(e){case 33082:case 33083:this.gl.samplerParameterf(this.handle,e,t);break;default:this.gl.samplerParameteri(this.handle,e,t)}return this}}]),t}(Y.a),me=(ge={},Object(L.a)(ge,5126,(function(e,t,n){return e.uniform1fv(t,je(n,1))})),Object(L.a)(ge,35664,(function(e,t,n){return e.uniform2fv(t,je(n,2))})),Object(L.a)(ge,35665,(function(e,t,n){return e.uniform3fv(t,je(n,3))})),Object(L.a)(ge,35666,(function(e,t,n){return e.uniform4fv(t,je(n,4))})),Object(L.a)(ge,5124,(function(e,t,n){return e.uniform1iv(t,we(n,1))})),Object(L.a)(ge,35667,(function(e,t,n){return e.uniform2iv(t,we(n,2))})),Object(L.a)(ge,35668,(function(e,t,n){return e.uniform3iv(t,we(n,3))})),Object(L.a)(ge,35669,(function(e,t,n){return e.uniform4iv(t,we(n,4))})),Object(L.a)(ge,35670,(function(e,t,n){return e.uniform1iv(t,we(n,1))})),Object(L.a)(ge,35671,(function(e,t,n){return e.uniform2iv(t,we(n,2))})),Object(L.a)(ge,35672,(function(e,t,n){return e.uniform3iv(t,we(n,3))})),Object(L.a)(ge,35673,(function(e,t,n){return e.uniform4iv(t,we(n,4))})),Object(L.a)(ge,35674,(function(e,t,n){return e.uniformMatrix2fv(t,!1,je(n,4))})),Object(L.a)(ge,35675,(function(e,t,n){return e.uniformMatrix3fv(t,!1,je(n,9))})),Object(L.a)(ge,35676,(function(e,t,n){return e.uniformMatrix4fv(t,!1,je(n,16))})),Object(L.a)(ge,35678,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,35680,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,5125,(function(e,t,n){return e.uniform1uiv(t,xe(n,1))})),Object(L.a)(ge,36294,(function(e,t,n){return e.uniform2uiv(t,xe(n,2))})),Object(L.a)(ge,36295,(function(e,t,n){return e.uniform3uiv(t,xe(n,3))})),Object(L.a)(ge,36296,(function(e,t,n){return e.uniform4uiv(t,xe(n,4))})),Object(L.a)(ge,35685,(function(e,t,n){return e.uniformMatrix2x3fv(t,!1,je(n,6))})),Object(L.a)(ge,35686,(function(e,t,n){return e.uniformMatrix2x4fv(t,!1,je(n,8))})),Object(L.a)(ge,35687,(function(e,t,n){return e.uniformMatrix3x2fv(t,!1,je(n,6))})),Object(L.a)(ge,35688,(function(e,t,n){return e.uniformMatrix3x4fv(t,!1,je(n,12))})),Object(L.a)(ge,35689,(function(e,t,n){return e.uniformMatrix4x2fv(t,!1,je(n,8))})),Object(L.a)(ge,35690,(function(e,t,n){return e.uniformMatrix4x3fv(t,!1,je(n,12))})),Object(L.a)(ge,35679,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,35682,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,36289,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,36292,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,36293,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,36298,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,36299,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,36300,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,36303,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,36306,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,36307,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,36308,(function(e,t,n){return e.uniform1i(t,n)})),Object(L.a)(ge,36311,(function(e,t,n){return e.uniform1i(t,n)})),ge),pe={},ye={},_e={},Oe=[0];function Ee(e,t,n,r){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(Oe[0]=e,e=Oe);var i=e.length;if(i%t&&v.g.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof n)return e;var a=r[i];a||(a=new n(i),r[i]=a);for(var o=0;o<i;o++)a[o]=e[o];return a}function je(e,t){return Ee(e,t,Float32Array,pe)}function we(e,t){return Ee(e,t,Int32Array,ye)}function xe(e,t){return Ee(e,t,Uint32Array,_e)}function Ae(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=e.match(/([^\[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function ke(e,t,n){var r=me[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r.bind(null,e,t)}function Te(e,t,n){for(var r in e){var i=e[r];if((!n||Boolean(n[r]))&&!Se(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(r),i),new Error("".concat(t," Bad uniform ").concat(r))}return!0}function Se(e){return Array.isArray(e)||ArrayBuffer.isView(e)?function(e){if(0===e.length)return!1;for(var t=Math.min(e.length,16),n=0;n<t;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof re.a||e instanceof be||(e instanceof ce||e instanceof ve&&Boolean(e.texture))))}function Pe(e,t){if(Array.isArray(e)||ArrayBuffer.isView(e)){if(!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return e===t}function Le(e){return Array.isArray(e)||ArrayBuffer.isView(e)?e.slice():e}var Fe,Ie=n("FVJL"),Re=(Fe={},Object(L.a)(Fe,5126,[5126,1,"float"]),Object(L.a)(Fe,35664,[5126,2,"vec2"]),Object(L.a)(Fe,35665,[5126,3,"vec3"]),Object(L.a)(Fe,35666,[5126,4,"vec4"]),Object(L.a)(Fe,5124,[5124,1,"int"]),Object(L.a)(Fe,35667,[5124,2,"ivec2"]),Object(L.a)(Fe,35668,[5124,3,"ivec3"]),Object(L.a)(Fe,35669,[5124,4,"ivec4"]),Object(L.a)(Fe,5125,[5125,1,"uint"]),Object(L.a)(Fe,36294,[5125,2,"uvec2"]),Object(L.a)(Fe,36295,[5125,3,"uvec3"]),Object(L.a)(Fe,36296,[5125,4,"uvec4"]),Object(L.a)(Fe,35670,[5126,1,"bool"]),Object(L.a)(Fe,35671,[5126,2,"bvec2"]),Object(L.a)(Fe,35672,[5126,3,"bvec3"]),Object(L.a)(Fe,35673,[5126,4,"bvec4"]),Object(L.a)(Fe,35674,[5126,8,"mat2"]),Object(L.a)(Fe,35685,[5126,8,"mat2x3"]),Object(L.a)(Fe,35686,[5126,8,"mat2x4"]),Object(L.a)(Fe,35675,[5126,12,"mat3"]),Object(L.a)(Fe,35687,[5126,12,"mat3x2"]),Object(L.a)(Fe,35688,[5126,12,"mat3x4"]),Object(L.a)(Fe,35676,[5126,16,"mat4"]),Object(L.a)(Fe,35689,[5126,16,"mat4x2"]),Object(L.a)(Fe,35690,[5126,16,"mat4x3"]),Fe);function Ne(e){switch(e){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Object(N.a)(!1),0}}function Me(e){var t=Re[e];if(!t)return null;var n=Object(ie.a)(t,2);return{type:n[0],components:n[1]}}function Be(e,t){switch(e){case 5120:case 5121:case 5122:case 5123:e=5126}for(var n in Re){var r=Object(ie.a)(Re[n],3),i=r[0],a=r[1],o=r[2];if(i===e&&a===t)return{glType:n,name:o}}return null}var Ce=function(){function e(t){Object(O.a)(this,e),this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}return Object(F.a)(e,[{key:"getAttributeInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfos[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var t=e.gl,n=t.getProgramParameter(e.handle,35721),r=0;r<n;r++){var i=t.getActiveAttrib(e.handle,r),a=i.name,o=i.type,s=i.size,u=t.getAttribLocation(e.handle,a);u>=0&&this._addAttribute(u,a,o,s)}this.attributeInfos.sort((function(e,t){return e.location-t.location}))}},{key:"_readVaryingsFromProgram",value:function(e){var t=e.gl;if(Object(l.n)(t)){for(var n=t.getProgramParameter(e.handle,35971),r=0;r<n;r++){var i=t.getTransformFeedbackVarying(e.handle,r),a=i.name,o=i.type,s=i.size;this._addVarying(r,a,o,s)}this.varyingInfos.sort((function(e,t){return e.location-t.location}))}}},{key:"_addAttribute",value:function(e,t,n,r){var i=Me(n),a={type:i.type,size:r*i.components};this._inferProperties(e,t,a);var o={location:e,name:t,accessor:new Ie.a(a)};this.attributeInfos.push(o),this.attributeInfosByName[o.name]=o}},{key:"_inferProperties",value:function(e,t,n){/instance/i.test(t)&&(n.divisor=1)}},{key:"_addVarying",value:function(e,t,n,r){var i=Me(n),a=i.type,o=i.components,s={location:e,name:t,accessor:new Ie.a({type:a,size:r*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),e}(),De=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(O.a)(this,t),(n=Object(q.a)(this,Object(Q.a)(t).call(this,e,r))).stubRemovedMethods("Program","v6.0",["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"]),n._isCached=!1,n.initialize(r),Object.seal(Object(ne.a)(Object(ne.a)(n))),n._setId(r.id),n}return Object(K.a)(t,e),Object(F.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vs,n=e.fs,r=e.varyings,i=e.bufferMode,a=void 0===i?35981:i;return this.vs="string"==typeof t?new Z(this.gl,{id:"".concat(e.id,"-vs"),source:t}):t,this.fs="string"==typeof n?new $(this.gl,{id:"".concat(e.id,"-fs"),source:n}):n,Object(N.a)(this.vs instanceof Z),Object(N.a)(this.fs instanceof $),this.uniforms={},this.samplers={},r&&(Object(l.d)(this.gl),this.varyings=r,this.gl.transformFeedbackVaryings(this.handle,r,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Ce(this),this.setProps(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:ee(Object(Q.a)(t.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function(e){return"uniforms"in e&&this.setUniforms(e.uniforms,e.samplers),this}},{key:"draw",value:function(e){var t=this,n=e.logPriority,r=e.drawMode,i=void 0===r?4:r,a=e.vertexCount,o=e.offset,s=void 0===o?0:o,u=e.start,f=e.end,d=e.isIndexed,h=void 0!==d&&d,g=e.indexType,b=void 0===g?5123:g,m=e.isInstanced,p=void 0!==m&&m,y=e.instanceCount,_=void 0===y?0:y,O=e.vertexArray,E=void 0===O?null:O,j=e.transformFeedback,w=e.framebuffer,x=e.parameters,A=void 0===x?{}:x,k=e.uniforms,T=void 0===k?{}:k,S=e.samplers,P=void 0===S?{}:S;if(void 0!==n){var L=w?w.id:"default",F="mode=".concat(Object(c.a)(this.gl,i)," verts=").concat(a," ")+"instances=".concat(_," indexType=").concat(Object(c.a)(this.gl,b)," ")+"isInstanced=".concat(p," isIndexed=").concat(h," ")+"Framebuffer=".concat(L);v.g.log(n,F)()}return this.gl.useProgram(this.handle),Object(N.a)(E),E.bindForDraw(a,_,(function(){if(T&&(v.g.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)"),t.setUniforms(T,P)),t._bindTextures(),void 0!==w&&(A=Object.assign({},A,{framebuffer:w})),j){var e=Ne(i);j.begin(e)}Object(U.c)(t.gl,A,(function(){h&&p?t.gl.drawElementsInstanced(i,a,b,s,_):h&&Object(l.n)(t.gl)&&!isNaN(u)&&!isNaN(f)?t.gl.drawRangeElements(i,u,f,a,b,s):h?t.gl.drawElements(i,a,b,s):p?t.gl.drawArraysInstanced(i,s,a,_):t.gl.drawArrays(i,s,a)})),j&&j.end()})),this}},{key:"setSamplers",value:function(e){Object.assign(this.samplers,e)}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=!1,i={};for(var a in e)Pe(this.uniforms[a],e[a])||(r=!0,i[a]=e[a],this.uniforms[a]=Le(e[a]));return r&&(n(),Te(i,this.id,this._uniformSetters),Object.assign(this.samplers,t),this._setUniforms(i)),this}},{key:"_bindTextures",value:function(){for(var e in this.uniforms){var t=this._uniformSetters[e];if(t&&void 0!==t.textureIndex){var n=this.uniforms[e],r=this.samplers[e];n instanceof ve&&(n=n.texture),n instanceof re.a&&n.bind(t.textureIndex),r&&r.bind(t.textureIndex)}}}},{key:"_setUniforms",value:function(e){for(var t in this.gl.useProgram(this.handle),e){var n=e[t],r=this._uniformSetters[t];if(r)if(n instanceof ve&&(n=n.texture),n instanceof re.a){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var i=n,a=r.textureIndex;i.bind(a),r(a)}else r(n)}return this}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(e){var t=this.gl.getAttachedShaders(e),n={},r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new Z({handle:u});break;case 35632:n.fs=new $({handle:u})}}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=Object(v.i)(t)}}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=(e=e.replace(/shader/i,""))?"".concat(e,"-program"):"program"}},{key:"_compileAndLink",value:function(){var e=this.gl;if((e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),v.g.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),v.g.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||v.g.priority>0)&&(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var n=this.gl.getActiveUniform(this.handle,t),r=Ae(n.name),i=r.name,a=(r.isArray,e.getUniformLocation(this.handle,i));this._uniformSetters[i]=ke(e,a,n)}this._textureIndexCounter=0}},{key:"reset",value:function(){}},{key:"getActiveUniforms",value:function(e,t){return this.gl.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function(e){return this.gl.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function(e,t){return this.gl.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function(e,t){this.gl.uniformBlockBinding(this.handle,e,t)}}]),t}(Y.a),Ue=(n("A2OQ"),Y.a,function(e){return e}),Ge=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(O.a)(this,t),n=Object(q.a)(this,Object(Q.a)(t).call(this,e,r));var i=r.onComplete,a=void 0===i?Ue:i,o=r.onError,s=void 0===o?Ue:o;return n.target=null,n.onComplete=a,n.onError=s,n.promise=null,Object.seal(Object(ne.a)(Object(ne.a)(n))),n}return Object(K.a)(t,e),Object(F.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(l.n)(e),r=H(e,z.TIMER_QUERY),i=n||r,a=!0,o=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var f=u.value;switch(f){case"queries":i=i&&n;break;case"timers":i=i&&r;break;case"timestamps":var d=r?e.getQuery(36392,34916):0;i=i&&d>0;break;default:Object(N.a)(!1)}}}catch(h){o=!0,s=h}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return i}}]),Object(F.a)(t,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.conservative,n=void 0!==t&&t;return this.begin(n?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"getTimestamp",value:function(){R.beginQuery(this,this.onComplete,this.onError);try{this.gl.queryCounter(this.handle,36392)}catch(e){R.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension')}return this}},{key:"begin",value:function(e){R.beginQuery(this,this.onComplete,this.onError),this.target=e;try{this.gl.beginQuery(this.target,this.handle)}catch(t){R.rejectQuery(this,"Query not supported")}return this}},{key:"end",value:function(){return this.target&&(this.gl.endQuery(this.target),this.target=null),this}},{key:"cancel",value:function(){return this.end(),R.cancelQuery(this),this}},{key:"isResultAvailable",value:function(){return this.gl.getQueryParameter(this.handle,34919)}},{key:"getResult",value:function(){var e=this.gl.getQueryParameter(this.handle,34918);return Number.isFinite(e)?e/1e6:0}},{key:"_createHandle",value:function(){return t.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){R.deleteQuery(this),this.gl.deleteQuery(this.handle)}}],[{key:"poll",value:function(e){R.poll(e)}}]),t}(Y.a);R.setInvalidator({queryType:Ge,errorMessage:"Disjoint GPU operation invalidated timer queries",checkInvalid:function(e){return e.getParameter(36795)}});n("Nx27"),re.a;var ze=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(O.a)(this,t),Object(l.d)(e),(n=Object(q.a)(this,Object(Q.a)(t).call(this,e,r))).initialize(r),n.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(ne.a)(Object(ne.a)(n))),n}return Object(K.a)(t,e),Object(F.a)(t,null,[{key:"isSupported",value:function(e){return Object(l.n)(e)}}]),Object(F.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(v.d)(this.buffers)||this.bind((function(){return e._unbindBuffers()})),this.setProps(t),this}},{key:"setProps",value:function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var n in t)e.setBuffer(n,t[n])})),this}},{key:"setBuffer",value:function(e,t){var n=this,r=this._getVaryingIndex(e),i=this._getBufferParams(t),a=i.buffer,o=i.sizeInBytes,s=i.offsetInBytes;return r<0?(this.unused[e]=a,v.g.warn((function(){return"".concat(n.id," unused varying buffer ").concat(e)}))(),this):(this.buffers[r]=t,this.bindOnUse||this._bindBuffer(r,a,s,o),this)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(e){var t,n,r;return e instanceof X.a==!1?(r=e.buffer,n=e.sizeInBytes,t=e.offsetInBytes):r=e,void 0===t&&void 0===n||(t=t||0,n=n||r.byteLength-t),{buffer:r,offsetInBytes:t,sizeInBytes:n}}},{key:"_getVaryingInfo",value:function(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers){var t=this._getBufferParams(this.buffers[e]),n=t.buffer,r=t.sizeInBytes,i=t.offsetInBytes;this._bindBuffer(e,n,i,r)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=t&&t.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,e,i,n,r):this.gl.bindBufferBase(35982,e,i),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),t}(Y.a),We=null;function Ve(e,t){var n;return new e((n=e.BYTES_PER_ELEMENT*t,(!We||We.byteLength<n)&&(We=new ArrayBuffer(n)),We),0,t)}var He=n("K9nA"),Xe=n("5ku3"),qe=n("I0ug");function Qe(e){if(!e&&!Object(Xe.a)())return"Node";if(Object(qe.a)(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":He.b.chrome?"Chrome":He.b.safari?"Safari":He.b.mozInnerScreenX?"Firefox":"Unknown"}var Ke="elements must be GL.ELEMENT_ARRAY_BUFFER",Ye=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(O.a)(this,t);var i=r.id||r.program&&r.program.id;return(n=Object(q.a)(this,Object(Q.a)(t).call(this,e,Object.assign({},r,{id:i})))).hasVertexArrays=t.isSupported(e),n.buffer=null,n.bufferValue=null,n.initialize(r),Object.seal(Object(ne.a)(Object(ne.a)(n))),n}return Object(K.a)(t,e),Object(F.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.constantAttributeZero?Object(l.n)(e)||"Chrome"===Qe():Object(l.n)(e)||e.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new t(e,{handle:null})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return t.MAX_ATTRIBUTES=t.MAX_ATTRIBUTES||e.getParameter(34921),t.MAX_ATTRIBUTES}},{key:"setConstant",value:function(e,n,r){switch(r.constructor){case Float32Array:t._setConstantFloatArray(e,n,r);break;case Int32Array:t._setConstantIntArray(e,n,r);break;case Uint32Array:t._setConstantUintArray(e,n,r);break;default:Object(v.a)(!1)}}}]),Object(F.a)(t,[{key:"delete",value:function(){ee(Object(Q.a)(t.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function(e){return this}},{key:"setElementBuffer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(v.a)(!t||34963===t.target,Ke),this.bind((function(){e.gl.bindBuffer(34963,t?t.handle:null)})),this}},{key:"setBuffer",value:function(e,t,n){if(34963===t.target)return this.setElementBuffer(t,n);var r=n.size,i=n.type,a=n.stride,o=n.offset,s=n.normalized,u=n.integer,c=n.divisor,f=this.gl;return e=Number(e),this.bind((function(){f.bindBuffer(34962,t.handle),u?(Object(v.a)(Object(l.n)(f)),f.vertexAttribIPointer(e,r,i,a,o)):f.vertexAttribPointer(e,r,i,s,a,o),f.enableVertexAttribArray(e),f.vertexAttribDivisor(e,c||0)})),this}},{key:"enable",value:function(e){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!r&&0===e&&!t.isSupported(this.gl,{constantAttributeZero:!0});return i||(e=Number(e),this.bind((function(){return r?n.gl.enableVertexAttribArray(e):n.gl.disableVertexAttribArray(e)}))),this}},{key:"getConstantBuffer",value:function(e,t,n){var r=this._normalizeConstantArrayValue(t,n),i=r.byteLength*e,a=r.length*e,o=!this.buffer;if(this.buffer=this.buffer||new X.a(this.gl,i),o=(o=o||this.buffer.setByteLength(i))||!this._compareConstantArrayValues(r,this.bufferValue)){var s=Ve(t.constructor,a);!function(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,a=e.count,o=void 0===a?1:a,s=n.length,u=o*s,c=0,l=i;c<s;c++)t[l++]=n[c];for(;c<u;)c<u-c?(t.copyWithin(i+c,i,i+c),c*=2):(t.copyWithin(i+c,i,i+u-c),c=u)}({target:s,source:r,start:0,count:a}),this.buffer.subData(s),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(e,t){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.hasVertexArrays=t.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function(e){return this.hasVertexArrays&&this.gl.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function(e){this.hasVertexArrays&&this.gl.bindVertexArray(e)}},{key:"_getParameter",value:function(e,t){var n=this,r=t.location;return Object(v.a)(Number.isFinite(r)),this.bind((function(){switch(e){case 34373:return n.gl.getVertexAttribOffset(r,e);default:return n.gl.getVertexAttrib(r,e)}}))}},{key:"MAX_ATTRIBUTES",get:function(){return t.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(e,t,n){switch(n.length){case 1:e.vertexAttrib1fv(t,n);break;case 2:e.vertexAttrib2fv(t,n);break;case 3:e.vertexAttrib3fv(t,n);break;case 4:e.vertexAttrib4fv(t,n);break;default:Object(v.a)(!1)}}},{key:"_setConstantIntArray",value:function(e,t,n){switch(Object(v.a)(Object(l.n)(e)),n.length){case 1:e.vertexAttribI1iv(t,n);break;case 2:e.vertexAttribI2iv(t,n);break;case 3:e.vertexAttribI3iv(t,n);break;case 4:e.vertexAttribI4iv(t,n);break;default:Object(v.a)(!1)}}},{key:"_setConstantUintArray",value:function(e,t,n){switch(Object(v.a)(Object(l.n)(e)),n.length){case 1:e.vertexAttribI1uiv(t,n);break;case 2:e.vertexAttribI2uiv(t,n);break;case 3:e.vertexAttribI3uiv(t,n);break;case 4:e.vertexAttribI4uiv(t,n);break;default:Object(v.a)(!1)}}}]),t}(Y.a),Je=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(O.a)(this,e);var r=n.id||n.program&&n.program.id;this.id=r,this.gl=t,this.configuration=null,this.elements=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.vertexArrayObject=Ye.isSupported(t)?new Ye(t):Ye.getDefaultArray(t),Object(v.h)(this,"VertexArray","v6.0",["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"]),this.initialize(n),Object.seal(this)}return Object(F.a)(e,[{key:"delete",value:function(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(e){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,e)}},{key:"setAttributes",value:function(e){var t=this;return this.vertexArrayObject.bind((function(){for(var n in e){var r=e[n];if(r instanceof X.a)t.setBuffer(n,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof X.a){var i=r[0],a=r[1];t.setBuffer(n,i,a)}else{if(!ArrayBuffer.isView(r)&&!Array.isArray(r))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");t.setConstant(n,r)}}t.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t);var r=this._resolveLocationAndAccessor(e,t,t.accessor,n),i=r.location,a=r.accessor;return i>=0&&(this.values[i]=t,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(i,t,a)),this}},{key:"setConstant",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(e,t,n),i=r.location,a=r.accessor;return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t,a),this.values[i]=t,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&e.setElementBuffer(null),e.buffer=e.buffer||new X.a(e.gl,{size:4});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof X.a&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var n=e.values[t];n instanceof X.a&&e.setBuffer(t,n)}})),this}},{key:"bindForDraw",value:function(e,t,n){var r,i=this;return this.vertexArrayObject.bind((function(){i._setConstantAttributes(e,t),i.vertexArrayObject.hasVertexArrays||i.bindBuffers(),r=n(),i.vertexArrayObject.hasVertexArrays||i.unbindBuffers()})),r}},{key:"_resolveLocationAndAccessor",value:function(e,t,n,r){var i=this,a=this._getAttributeIndex(e);if(!Number.isFinite(a)||a<0)return this.unused[e]=t,v.g.once(3,(function(){return"unused value ".concat(e," in ").concat(i.id)}))(),this;var o=this._getAttributeInfo(e),s=Ie.a.resolve(o.accessor,n,r),u=s.size,c=s.type;return Object(v.a)(Number.isFinite(u)&&Number.isFinite(c)),{location:a,accessor:s}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){if(this.configuration)return this.configuration.getAttributeLocation(e);var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_setConstantAttributes",value:function(e,t){var n=Math.max(0|e,0|t),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:"_setConstantAttributeZero",value:function(e,t){if(Ye.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var n=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(e,t){Ye.setConstant(this.gl,e,t),this.vertexArrayObject.isDefault&&this.vertexArrayObject.enable(e,!1)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elements.accessor.type),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,t){var n=this.values[t],r=this.accessors[t];if(n){var i=r.divisor>0;if(e.isInstanced=e.isInstanced||i,n instanceof X.a){var a=n;if(i){var o=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,o)}else{var s=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,s)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.g.deprecated("setElements","setElementBuffer"),this.setElementBuffer(e,t)}}]),e}(),Ze=n("s4An");var $e=n("RHh3");function et(e){var t="function"==typeof Map?new Map:void 0;return(et=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Object($e.a)(e,arguments,Object(Q.a)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(Ze.a)(r,e)})(e)}var tt={};function nt(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function rt(e){return Math.round(e/tt.EPSILON)*tt.EPSILON}function it(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.precision,r=void 0===n?tt.precision||4:n;return e=rt(e),parseFloat(e.toPrecision(r))}function at(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&void 0!==e.length}function ot(e,t){if(at(e)){for(var n=(i=e).clone?i.clone():new Array(i),r=0;r<n.length;++r)n[r]=t(n[r],r,n);return n}var i;return t(e)}function st(e){return ot(e,(function(e){return e/180*Math.PI}))}function ut(e,t){if(at(e)&&at(t)){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!ut(e[n],t[n]))return!1;return!0}return Math.abs(e-t)<=tt.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}tt.EPSILON=1e-12,tt.debug=!0,tt.precision=4,tt.printTypes=!1,tt.printDegrees=!1,tt.printRowMajor=!0;var ct=function(e){function t(){return Object(O.a)(this,t),Object(q.a)(this,Object(Q.a)(t).apply(this,arguments))}return Object(K.a)(t,e),Object(F.a)(t,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e[t];return this.check()}},{key:"set",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=(e<0||arguments.length<=e?void 0:arguments[e])||0;return this.check()}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}},{key:"toString",value:function(){return this.formatString(tt)}},{key:"formatString",value:function(e){for(var t="",n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+it(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!ut(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"negate",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"inverse",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=1/this[e];return this.check()}},{key:"lerp",value:function(e,t,n){void 0===n&&(n=t,t=e,e=this);for(var r=0;r<this.ELEMENTS;++r){var i=e[r];this[r]=i+n*(t[r]-i)}return this.check()}},{key:"min",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}},{key:"max",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}},{key:"clamp",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}},{key:"validate",value:function(){for(var e=this.length===this.ELEMENTS,t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}},{key:"check",value:function(){if(tt.debug&&!this.validate(this))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(e){return this.subtract(e)}},{key:"setScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}},{key:"addScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}},{key:"subScalar",value:function(e){return this.addScalar(-e)}},{key:"multiplyScalar",value:function(e){return this.scale(e)}},{key:"divideScalar",value:function(e){return this.scale(1/e)}},{key:"clampScalar",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}}]),t}(et(Array)),lt=function(e,t){if(!e)throw new Error(t)},ft=function(e){function t(){return Object(O.a)(this,t),Object(q.a)(this,Object(Q.a)(t).apply(this,arguments))}return Object(K.a)(t,e),Object(F.a)(t,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-e[n];t+=r*r}return nt(t)}},{key:"dot",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return nt(t)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],a=0;a<this.ELEMENTS;++a)this[a]+=i[a];return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],a=0;a<this.ELEMENTS;++a)this[a]-=i[a];return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],a=0;a<this.ELEMENTS;++a)this[a]*=i[a];return this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],a=0;a<this.ELEMENTS;++a)this[a]/=i[a];return this.check()}},{key:"scale",value:function(e){if(Array.isArray(e))return this.multiply(e);for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"scaleAndAdd",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=this[n]*t+e[n];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(e){return this.distance(e)}},{key:"distanceToSquared",value:function(e){return this.distanceSquared(e)}},{key:"getComponent",value:function(e){return lt(e>=0&&e<this.ELEMENTS,"index is out of range"),nt(this[e])}},{key:"setComponent",value:function(e,t){return lt(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}},{key:"addVectors",value:function(e,t){return this.copy(e).add(t)}},{key:"subVectors",value:function(e,t){return this.copy(e).subtract(t)}},{key:"multiplyVectors",value:function(e,t){return this.copy(e).multiply(t)}},{key:"addScaledVector",value:function(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=nt(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=nt(e)}}]),t}(ct),dt=(n("QFcT"),1e-6),ht="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});vt=new ht(3),ht!=Float32Array&&(vt[0]=0,vt[1]=0,vt[2]=0),gt=vt;var vt,gt,bt=[0,0,0],mt=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(O.a)(this,t),e=Object(q.a)(this,Object(Q.a)(t).call(this,3)),Array.isArray(n)&&1===arguments.length?e.copy(n):e.set(n,r,i),e}return Object(K.a)(t,e),Object(F.a)(t,[{key:"angle",value:function(e){return n=e,r=(t=this)[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2],c=Math.sqrt(r*r+i*i+a*a)*Math.sqrt(o*o+s*s+u*u),l=c&&function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}(t,n)/c,Math.acos(Math.min(Math.max(l,-1),1));var t,n,r,i,a,o,s,u,c,l}},{key:"cross",value:function(e){return function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];e[0]=i*u-a*s,e[1]=a*o-r*u,e[2]=r*s-i*o}(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,n=e.origin;return function(e,t,n,r){var i=[],a=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2]}(this,this,void 0===n?bt:n,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,n=e.origin;return function(e,t,n,r){var i=[],a=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2]}(this,this,void 0===n?bt:n,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,n=e.origin;return function(e,t,n,r){var i=[],a=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2]}(this,this,void 0===n?bt:n,t),this.check()}},{key:"operation",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=nt(e)}}]),t}(ft);function pt(e,t){return e.length===t&&e.every(Number.isFinite)}!function(){var e=function(){var e=new ht(2);return ht!=Float32Array&&(e[0]=0,e[1]=0),e}()}();var yt=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(O.a)(this,t),e=Object(q.a)(this,Object(Q.a)(t).call(this,2)),Array.isArray(n)&&1===arguments.length?e.copy(n):e.set(n,r),e}return Object(K.a)(t,e),Object(F.a)(t,[{key:"cross",value:function(e){return function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];e[0]=e[1]=0,e[2]=r}(this,this,e),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),t}(ft),_t=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(O.a)(this,t),e=Object(q.a)(this,Object(Q.a)(t).call(this,4)),Array.isArray(n)&&1===arguments.length?e.copy(n):e.set(n,r,i,a),e}return Object(K.a)(t,e),Object(F.a)(t,[{key:"applyMatrix4",value:function(e){return e.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=nt(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=nt(e)}}]),t}(ft);function Ot(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],d=t[9],h=t[10],v=t[11],g=t[12],b=t[13],m=t[14],p=t[15],y=n[0],_=n[1],O=n[2],E=n[3];return e[0]=y*r+_*s+O*f+E*g,e[1]=y*i+_*u+O*d+E*b,e[2]=y*a+_*c+O*h+E*m,e[3]=y*o+_*l+O*v+E*p,y=n[4],_=n[5],O=n[6],E=n[7],e[4]=y*r+_*s+O*f+E*g,e[5]=y*i+_*u+O*d+E*b,e[6]=y*a+_*c+O*h+E*m,e[7]=y*o+_*l+O*v+E*p,y=n[8],_=n[9],O=n[10],E=n[11],e[8]=y*r+_*s+O*f+E*g,e[9]=y*i+_*u+O*d+E*b,e[10]=y*a+_*c+O*h+E*m,e[11]=y*o+_*l+O*v+E*p,y=n[12],_=n[13],O=n[14],E=n[15],e[12]=y*r+_*s+O*f+E*g,e[13]=y*i+_*u+O*d+E*b,e[14]=y*a+_*c+O*h+E*m,e[15]=y*o+_*l+O*v+E*p,e}function Et(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function jt(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}function wt(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}!function(){var e=function(){var e=new ht(4);return ht!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();var xt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var At=function(e){function t(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Object(O.a)(this,t),e=Object(q.a)(this,Object(Q.a)(t).call(this,16)),Array.isArray(r[0])&&1===arguments.length?e.copy(r[0]):e.identity(),e}return Object(K.a)(t,e),Object(F.a)(t,[{key:"setRowMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=e,this[1]=i,this[2]=u,this[3]=d,this[4]=t,this[5]=a,this[6]=c,this[7]=h,this[8]=n,this[9]=o,this[10]=l,this[11]=v,this[12]=r,this[13]=s,this[14]=f,this[15]=g,this.check()}},{key:"setColumnMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=a,this[6]=o,this[7]=s,this[8]=u,this[9]=c,this[10]=l,this[11]=f,this[12]=d,this[13]=h,this[14]=v,this[15]=g,this.check()}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?this[e][t]:this[t][e]}},{key:"setElement",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r?this[e][t]=nt(n):this[t][e]=nt(n),this}},{key:"determinant",value:function(){return t=(e=this)[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],d=e[11],h=e[12],v=e[13],g=e[14],b=e[15],(t*o-n*a)*(f*b-d*g)-(t*s-r*a)*(l*b-d*v)+(t*u-i*a)*(l*g-f*v)+(n*s-r*o)*(c*b-d*h)-(n*u-i*o)*(c*g-f*h)+(r*u-i*s)*(c*v-l*h);var e,t,n,r,i,a,o,s,u,c,l,f,d,h,v,g,b}},{key:"identity",value:function(){return this.copy(xt)}},{key:"fromQuaternion",value:function(e){return function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,c=n*o,l=r*o,f=r*s,d=i*o,h=i*s,v=i*u,g=a*o,b=a*s,m=a*u;e[0]=1-f-v,e[1]=l+m,e[2]=d-b,e[3]=0,e[4]=l-m,e[5]=1-c-v,e[6]=h+g,e[7]=0,e[8]=d+b,e[9]=h-g,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this.check()}},{key:"frustum",value:function(e){return function(e,t,n,r,i,a,o){var s=1/(n-t),u=1/(i-r),c=1/(a-o);e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0}(this,e.left,e.right,e.bottom,e.top,e.near,e.far),this.check()}},{key:"lookAt",value:function(e){var t=e.eye,n=e.center,r=void 0===n?[0,0,0]:n,i=e.up;return function(e,t,n,r){var i,a,o,s,u,c,l,f,d,h,v=t[0],g=t[1],b=t[2],m=r[0],p=r[1],y=r[2],_=n[0],O=n[1],E=n[2];Math.abs(v-_)<dt&&Math.abs(g-O)<dt&&Math.abs(b-E)<dt?function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(e):(l=v-_,f=g-O,d=b-E,i=p*(d*=h=1/Math.hypot(l,f,d))-y*(f*=h),a=y*(l*=h)-m*d,o=m*f-p*l,(h=Math.hypot(i,a,o))?(i*=h=1/h,a*=h,o*=h):(i=0,a=0,o=0),s=f*o-d*a,u=d*i-l*o,c=l*a-f*i,(h=Math.hypot(s,u,c))?(s*=h=1/h,u*=h,c*=h):(s=0,u=0,c=0),e[0]=i,e[1]=s,e[2]=l,e[3]=0,e[4]=a,e[5]=u,e[6]=f,e[7]=0,e[8]=o,e[9]=c,e[10]=d,e[11]=0,e[12]=-(i*v+a*g+o*b),e[13]=-(s*v+u*g+c*b),e[14]=-(l*v+f*g+d*b),e[15]=1)}(this,t,r,void 0===i?[0,1,0]:i),this.check()}},{key:"ortho",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,a=e.near,o=void 0===a?.1:a,s=e.far;return function(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),c=1/(a-o);e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*c,e[15]=1}(this,t,n,r,i,o,void 0===s?500:s),this.check()}},{key:"orthographic",value:function(e){var n=e.fovy,r=void 0===n?45*Math.PI/180:n,i=e.aspect,a=void 0===i?1:i,o=e.focalDistance,s=void 0===o?1:o,u=e.near,c=void 0===u?.1:u,l=e.far,f=void 0===l?500:l;if(r>2*Math.PI)throw Error("radians");var d=r/2,h=s*Math.tan(d),v=h*a;return(new t).ortho({left:-v,right:v,bottom:-h,top:h,near:c,far:f})}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fovy,n=e.fov,r=void 0===n?45*Math.PI/180:n,i=e.aspect,a=void 0===i?1:i,o=e.near,s=void 0===o?.1:o,u=e.far,c=void 0===u?500:u;if((t=t||r)>2*Math.PI)throw Error("radians");return jt(this,t,a,s,c),this.check()}},{key:"transpose",value:function(){return function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]}(this,this),this.check()}},{key:"invert",value:function(){return function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],d=t[10],h=t[11],v=t[12],g=t[13],b=t[14],m=t[15],p=n*s-r*o,y=n*u-i*o,_=n*c-a*o,O=r*u-i*s,E=r*c-a*s,j=i*c-a*u,w=l*g-f*v,x=l*b-d*v,A=l*m-h*v,k=f*b-d*g,T=f*m-h*g,S=d*m-h*b,P=p*S-y*T+_*k+O*A-E*x+j*w;P&&(P=1/P,e[0]=(s*S-u*T+c*k)*P,e[1]=(i*T-r*S-a*k)*P,e[2]=(g*j-b*E+m*O)*P,e[3]=(d*E-f*j-h*O)*P,e[4]=(u*A-o*S-c*x)*P,e[5]=(n*S-i*A+a*x)*P,e[6]=(b*_-v*j-m*y)*P,e[7]=(l*j-d*_+h*y)*P,e[8]=(o*T-s*A+c*w)*P,e[9]=(r*A-n*T-a*w)*P,e[10]=(v*E-g*_+m*p)*P,e[11]=(f*_-l*E-h*p)*P,e[12]=(s*x-o*k-u*w)*P,e[13]=(n*k-r*x+i*w)*P,e[14]=(g*y-v*O-b*p)*P,e[15]=(l*O-f*y+d*p)*P)}(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return Ot(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return Ot(this,this,e),this.check()}},{key:"rotateX",value:function(e){return function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],d=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*r,e[5]=o*i+l*r,e[6]=s*i+f*r,e[7]=u*i+d*r,e[8]=c*i-a*r,e[9]=l*i-o*r,e[10]=f*i-s*r,e[11]=d*i-u*r}(this,this,e),this.check()}},{key:"rotateY",value:function(e){return function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[8],l=t[9],f=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*r,e[1]=o*i-l*r,e[2]=s*i-f*r,e[3]=u*i-d*r,e[8]=a*r+c*i,e[9]=o*r+l*i,e[10]=s*r+f*i,e[11]=u*r+d*i}(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[4],l=t[5],f=t[6],d=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*r,e[1]=o*i+l*r,e[2]=s*i+f*r,e[3]=u*i+d*r,e[4]=c*i-a*r,e[5]=l*i-o*r,e[6]=f*i-s*r,e[7]=d*i-u*r}(this,this,e),this.check()}},{key:"rotateXYZ",value:function(e){var t=Object(ie.a)(e,3),n=t[0],r=t[1],i=t[2];return this.rotateX(n).rotateY(r).rotateZ(i)}},{key:"rotateAxis",value:function(e,t){return function(e,t,n,r){var i,a,o,s,u,c,l,f,d,h,v,g,b,m,p,y,_,O,E,j,w,x,A,k,T=r[0],S=r[1],P=r[2],L=Math.hypot(T,S,P);L<dt||(T*=L=1/L,S*=L,P*=L,i=Math.sin(n),o=1-(a=Math.cos(n)),s=t[0],u=t[1],c=t[2],l=t[3],f=t[4],d=t[5],h=t[6],v=t[7],g=t[8],b=t[9],m=t[10],p=t[11],y=T*T*o+a,_=S*T*o+P*i,O=P*T*o-S*i,E=T*S*o-P*i,j=S*S*o+a,w=P*S*o+T*i,x=T*P*o+S*i,A=S*P*o-T*i,k=P*P*o+a,e[0]=s*y+f*_+g*O,e[1]=u*y+d*_+b*O,e[2]=c*y+h*_+m*O,e[3]=l*y+v*_+p*O,e[4]=s*E+f*j+g*w,e[5]=u*E+d*j+b*w,e[6]=c*E+h*j+m*w,e[7]=l*E+v*j+p*w,e[8]=s*x+f*A+g*k,e[9]=u*x+d*A+b*k,e[10]=c*x+h*A+m*k,e[11]=l*x+v*A+p*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,this,e,t),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?Et(this,this,e):Et(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return function(e,t,n){var r,i,a,o,s,u,c,l,f,d,h,v,g=n[0],b=n[1],m=n[2];t===e?(e[12]=t[0]*g+t[4]*b+t[8]*m+t[12],e[13]=t[1]*g+t[5]*b+t[9]*m+t[13],e[14]=t[2]*g+t[6]*b+t[10]*m+t[14],e[15]=t[3]*g+t[7]*b+t[11]*m+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],d=t[9],h=t[10],v=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=f,e[9]=d,e[10]=h,e[11]=v,e[12]=r*g+s*b+f*m+t[12],e[13]=i*g+u*b+d*m+t[13],e[14]=a*g+c*b+h*m+t[14],e[15]=o*g+l*b+v*m+t[15])}(this,this,e),this.check()}},{key:"transformVector2",value:function(e,t){return function(e,t,n){var r=t[0],i=t[1];e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13]}(t=t||new yt,e,this),pt(t,2),t}},{key:"transformVector3",value:function(e,t){return function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o}(t=t||new mt,e,this),pt(t,3),t}},{key:"transformVector4",value:function(e,t){return wt(t=t||new _t,e,this),pt(t,4),t.check()}},{key:"transformVector",value:function(e,t){switch(e.length){case 2:return this.transformVector2(e,t);case 3:return this.transformVector3(e,t);case 4:return this.transformVector4(e,t);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(e,t){return this._transformVector(e,t,0)}},{key:"transformPoint",value:function(e,t){return this._transformVector(e,t,1)}},{key:"_transformVector",value:function(e,t,n){switch(e.length){case 2:wt(t=t||new yt,[e[0],e[1],0,n],this),t.length=2,pt(t,2);break;case 3:wt(t=t||new mt,[e[0],e[1],e[2],n],this),t.length=3,pt(t,3);break;case 4:if(Boolean(n)!==Boolean(e[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");wt(t=t||new _t,e,this),pt(t,4);break;default:throw new Error("Illegal vector")}return t}},{key:"makeRotationX",value:function(e){return this.identity().rotateX(e)}},{key:"makeTranslation",value:function(e,t,n){return this.identity().translate([e,t,n])}},{key:"ELEMENTS",get:function(){return 16}}]),t}(ct),kt=function(){function e(t){var n=t.id;t.display;Object(O.a)(this,e),this.id=n||Object(v.i)(this.constructor.name),this.display=!0,this.position=new mt,this.rotation=new mt,this.scale=new mt(1,1,1),this.matrix=new At,this.userData={}}return Object(F.a)(e,[{key:"toString",value:function(){return"{id: ".concat(this.id,", children: ").concat(this.children,")}")}},{key:"setPosition",value:function(e){return Object(N.a)(3===e.length,"setPosition requires vector argument"),this.position=e,this}},{key:"setRotation",value:function(e){return Object(N.a)(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}},{key:"setScale",value:function(e){return Object(N.a)(3===e.length,"setScale requires vector argument"),this.scale=e,this}},{key:"setMatrixComponents",value:function(e){var t=e.position,n=e.rotation,r=e.scale,i=e.update,a=void 0===i||i;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),a&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var e=this.position,t=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(n),this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,n=e.rotation,r=e.scale;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(e,t){Object(N.a)(e),t=t||this.matrix;var n=new At(e).multiplyRight(t),r=n.invert(),i=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:i}}},{key:"transform",value:function(){if(this.parent){var e=this.parent;this.endPosition.set(this.position.add(e.endPosition)),this.endRotation.set(this.rotation.add(e.endRotation)),this.endScale.set(this.scale.add(e.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var t=this.children,n=0;n<t.length;++n)t[n].transform();return this}}]),e}(),Tt=(n("KQm4"),function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(O.a)(this,e);var r=n.id,i=void 0===r?Object(v.i)("attribute"):r,a=n.type,o=n.isIndexed,s=void 0!==o&&o;this.gl=t,this.id=i,this.isIndexed=s,this.target=s?34963:34962,this.type=a,s&&!a&&(this.type=t&&V(t,z.ELEMENT_INDEX_UINT32)?5125:5123),this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(n),Object.seal(this),this._validateAttributeDefinition()}return Object(F.a)(e,[{key:"delete",value:function(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function(e){var t=e.value,n=e.buffer,r=e.constant,i=void 0===r?this.constant||!1:r;this.constant=i,n?(this.externalBuffer=n,this.constant=!1,this.type=n.accessor.type,void 0!==n.accessor.divisor&&(this.divisor=n.accessor.divisor)):t&&(this.externalBuffer=null,this.value=t,!i&&this.gl&&(this.buffer=this.buffer||new X.a(this.gl,Object.assign({},e,{id:this.id,target:this.target,type:this.type})),this.buffer.setData({data:t}),this.type=this.buffer.accessor.type)),this._setAccessor(e)}},{key:"getBuffer",value:function(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function(){if(this.constant)return this.value;var e=this.externalBuffer||this.buffer;return e?[e,this]:null}},{key:"_setAccessor",value:function(e){var t=e.size,n=void 0===t?this.size:t,r=e.offset,i=void 0===r?this.offset||0:r,a=e.stride,o=void 0===a?this.stride||0:a,s=e.normalized,u=void 0===s?this.normalized||!1:s,c=e.integer,l=void 0===c?this.integer||!1:c,f=e.divisor,d=void 0===f?this.divisor||0:f,h=e.instanced,g=e.isInstanced;this.size=n,this.offset=i,this.stride=o,this.normalized=u,this.integer=l,this.divisor=d,void 0!==g&&(v.g.deprecated("Attribute.isInstanced"),this.divisor=g?1:0),void 0!==h&&(v.g.deprecated("Attribute.instanced"),this.divisor=h?1:0)}},{key:"_validateAttributeDefinition",value:function(){}}]),e}()),St={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};function Pt(e){var t="string"==typeof e?St[e]||St.TRIANGLES:e;return Object(N.a)(t>=0&&t<=St.TRIANGLE_FAN,"Illegal drawMode"),t}var Lt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,e);var n=t.id,r=t.drawMode,i=void 0===r?St.TRIANGLES:r,a=t.vertexCount,o=void 0===a?void 0:a,s=t.attributes;this.id=n||Object(v.i)(this.constructor.name),this.drawMode=Pt(i),this.vertexCount=o,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),s&&this.setAttributes(s)}return Object(F.a)(e,[{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0!==t&&t,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,r}},{key:"setVertexCount",value:function(e){this.vertexCount=e}},{key:"getVertexCount",value:function(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function(e){return Boolean(this.attributes[e])}},{key:"getAttribute",value:function(e){var t=this.attributes[e];return Object(N.a)(t),t.value}},{key:"getArray",value:function(e){var t=this.attributes[e];return Object(N.a)(t),t.value}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){for(var t in e){var n=e[t];n=ArrayBuffer.isView(n)?{value:n}:n,Object(N.a)(ArrayBuffer.isView(n.value),"".concat(this._print(t),": must be typed array or object with value as typed array")),this._autoDetectAttribute(t,n),this.attributes[t]=n}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function(e,t){var n;switch(e){case"indices":n=n||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break;case"indices":t.size=t.size||1,t.isIndexed=void 0===t.isIndexed||t.isIndexed,Object(N.a)(t.value instanceof Uint16Array||t.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}Object(N.a)(t.size,"attribute ".concat(e," needs size"))}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}}]),e}(),Ft="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n",It="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n";function Rt(e,t,n){switch(t){case 300:return n?function(e){return e.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(")}(e):function(e){return e.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(")}(e);case 100:return n?function(e){return e.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e):function(e){return e.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e);default:throw new Error("unknown GLSL version ".concat(t))}}function Nt(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}var Mt=function(){function e(t){var n=t.name,r=t.vs,i=t.fs,a=t.dependencies,o=void 0===a?[]:a,s=t.getUniforms,u=void 0===s?function(){return{}}:s,c=t.deprecations,l=void 0===c?[]:c,f=t.vertexShader,d=t.fragmentShader;Object(O.a)(this,e),Nt("string"==typeof n),this.name=n,this.vs=r||f,this.fs=i||d,this.getModuleUniforms=u,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(l)}return Object(F.a)(e,[{key:"getModuleSource",value:function(e,t){var n;switch(e){case"vs":n=Rt(this.vs||"",t,!0);break;case"fs":n=Rt(this.fs||"",t,!1);break;default:Nt(!1)}return"string"!=typeof n?"":"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(e,t){return this.getModuleUniforms(e,t)}},{key:"checkDeprecations",value:function(e,t){this.deprecations.forEach((function(n){n.regex.test(e)&&(n.deprecated&&t?t.deprecated(n.old,n.new)():t&&t.removed(n.old,n.new)())}))}},{key:"_parseDeprecationDefinitions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach((function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}})),e}}]),e}(),Bt=new(function(){function e(){Object(O.a)(this,e),this.shaderModules={},this.defaultShaderModules=[]}return Object(F.a)(e,[{key:"setDefaultShaderModules",value:function(e){this.defaultShaderModules=this.resolveModules(e)}},{key:"registerShaderModules",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ignoreMultipleRegistrations,r=void 0!==n&&n,i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;this._registerShaderModule(c,r)}}catch(l){a=!0,o=l}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}},{key:"getShaderModule",value:function(e){if(e instanceof Mt)return e;if("string"!=typeof e)return this._registerShaderModule(e,!0);var t=this.shaderModules[e];return t||Nt(!1,"Unknown shader module ".concat(e)),t}},{key:"resolveModules",value:function(e){var t=this;return e.map((function(e){return t.getShaderModule(e)}))}},{key:"_registerShaderModule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof Mt)return e;if(Nt(e.name,"shader module has no name"),this.shaderModules[e.name]&&!t)throw new Error("shader module ".concat(e.name," already registered"));return(e=new Mt(e)).dependencies=this.resolveModules(e.dependencies),this.shaderModules[e.name]=e,this.shaderModules[e.name]}}]),e}());function Ct(e){return e=e.concat(Bt.defaultShaderModules),Dt(e=Bt.resolveModules(e))}function Dt(e){var t={},n={};return Ut({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort((function(e,t){return n[t]-n[e]})).map((function(e){return t[e]}))}function Ut(e){var t=e.modules,n=e.level,r=e.moduleMap,i=e.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var a=!0,o=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;r[l.name]=l,(void 0===i[l.name]||i[l.name]<n)&&(i[l.name]=n)}}catch(m){o=!0,s=m}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var f=!0,d=!1,h=void 0;try{for(var v,g=t[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var b=v.value;b.dependencies&&Ut({modules:b.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(m){d=!0,h=m}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}}function Gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!=typeof window&&window.navigator||{},n=e.userAgent||t.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}var zt={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Wt={};Object.keys(zt).forEach((function(e){Wt[e]=e}));var Vt={};function Ht(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=zt[t];if(Nt(r,t),!Gt(n))return!0;if(t in Vt)return Vt[t];var i=r[0],a=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(a,"\nvoid main(void) {}"),s=e.createShader(35633);e.shaderSource(s,o),e.compileShader(s);var u=e.getShaderParameter(s,35713);return e.deleteShader(s),Vt[t]=u,u}function Xt(e,t){var n=zt[t];Nt(n,t);var r=function(e){return Boolean(e&&("undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||!0))}(e)&&n[1]||n[0],i="string"==typeof r?Boolean(e.getExtension(r)):r;return Nt(!1===i||!0===i),i}function qt(e,t){return(t=Array.isArray(t)?t:[t]).every((function(t){return Xt(e,t)}))}n("9lTW");var Qt,Kt,Yt=(Qt={},Object(L.a)(Qt,"vs","#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(L.a)(Qt,"fs","#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),Qt),Jt=/void main\s*\([^\)]*\)\s*\{\n?/,Zt=/}\n?[^{}]*$/;var $t=(Kt={},Object(L.a)(Kt,"vs","vertex"),Object(L.a)(Kt,"fs","fragment"),Kt);function en(e,t){var n=t.id,r=t.source,i=t.type,a=t.modules,o=void 0===a?[]:a,s=t.defines,u=void 0===s?{}:s,c=t.inject,l=void 0===c?{}:c,f=t.prologue,d=void 0===f||f,h=t.log;Nt("string"==typeof r,"shader source must be a string");var v="vs"===i,g=r.split("\n"),b=100,m="",p=r;0===g[0].indexOf("#version ")&&(b=300,m=g[0],p=g.slice(1).join("\n"));var y=d?"".concat(m,"\n").concat(function(e){var t=e.id,n=e.source,r=e.type;return t&&"string"==typeof t&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(t,"_").concat($t[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(function(e){switch(function(e){var t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||7936),r=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:function(e,t){if(e.match(/NVIDIA/i)||t.match(/NVIDIA/i))return"NVIDIA";if(e.match(/INTEL/i)||t.match(/INTEL/i))return"INTEL";if(e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i))return"AMD";return"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(e),"\n").concat(function(e,t,n){var r="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return qt(e,Wt.GLSL_FRAG_DEPTH)&&(r+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),qt(e,Wt.GLSL_DERIVATIVES)&&Ht(e,Wt.GLSL_DERIVATIVES)&&(r+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),qt(e,Wt.GLSL_FRAG_DATA)&&Ht(e,Wt.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),qt(e,Wt.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),r}(e),"\n").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n="";for(var r in e){0===t&&(n+="\n// APPLICATION DEFINES\n"),t++;var i=e[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(e[r],"\n"))}0===t&&(n+="\n");return n}(u),"\n").concat(v?"":"precision highp float;\n\n","\n"):"".concat(m,"\n"),_=!1,O=!0,E=!1,j=void 0;try{for(var w,x=o[Symbol.iterator]();!(O=(w=x.next()).done);O=!0){var A=w.value;switch(A.name){case"inject":_=!0;break;default:A.checkDeprecations(p,h),y+=A.getModuleSource(i,b)}}}catch(k){E=!0,j=k}finally{try{O||null==x.return||x.return()}finally{if(E)throw j}}return y=function(e,t,n,r){var i="vs"===t,a=function(t){var r=n[t];switch(t){case"vs:#decl":i&&(e=e.replace(Jt,(function(e){return"".concat(r,"\n").concat(e)})));break;case"vs:#main-start":i&&(e=e.replace(Jt,(function(e){return e+r})));break;case"vs:#main-end":i&&(e=e.replace(Zt,(function(e){return r+e})));break;case"fs:#decl":i||(e=e.replace(Jt,(function(e){return"".concat(r,"\n").concat(e)})));break;case"fs:#main-start":i||(e=e.replace(Jt,(function(e){return e+r})));break;case"fs:#main-end":i||(e=e.replace(Zt,(function(e){return r+e})));break;default:e=e.replace(t,(function(e){return e+r}))}};for(var o in n)a(o);return r&&(e=e.replace("}s*$",(function(e){return e+Yt[t]}))),e}(y+=p,i,l,_)}function tn(e){return function(t){var n={},r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value.getUniforms(t,n);Object.assign(n,u)}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}function nn(e){var t,n={},r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=(t=u,Bt.getShaderModule(t));n[u]=c}}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}var rn="uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n";"".concat(rn,"\n").concat("const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n");"".concat(rn);var an=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],on={modelMatrix:an,viewMatrix:an,projectionMatrix:an,cameraPositionWorld:[0,0,0]};var sn="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",un={name:"project",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on,t={};return void 0!==e.modelMatrix&&(t.modelMatrix=e.modelMatrix),void 0!==e.viewMatrix&&(t.viewMatrix=e.viewMatrix),void 0!==e.projectionMatrix&&(t.projectionMatrix=e.projectionMatrix),void 0!==e.cameraPositionWorld&&(t.cameraPositionWorld=e.cameraPositionWorld),void 0===e.projectionMatrix&&void 0===e.viewMatrix||(t.viewProjectionMatrix=new At(e.projectionMatrix).multiplyRight(e.viewMatrix)),t},vs:"".concat(sn,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),fs:"\n".concat(sn)};"".concat("\n","\n").concat("#define LIGHT_MAX 4\n\nuniform bool lighting_uEnableLights;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirection;\nuniform vec3 lighting_uDirectionalColor;\nuniform int  lighting_uPointCount;\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform bool lighting_uEnableReflections;\nvarying vec4 lighting_vPosition;\nvarying vec4 lighting_vNormal;\nvarying vec3 lighting_vColor;\nvarying vec3 lighting_vLightWeighting;\nvarying vec3 lighting_vReflection;\n\nvoid lighting_setPositionAndNormal(vec3 position, vec3 normal) {\n  lighting_vPosition = worldMatrix * vec4(position, 1.);\n  lighting_vNormal = worldInverseTransposeMatrix * vec4(normal, 1.);;\n}\n\nvoid lighting__getLightWeigting() {\n  float directionalLightWeighting = max(dot(lighting_vNormal.xyz, lighting_uDirection), 0.);\n  vec3 pointWeight = vec3(0., 0., 0.);\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec4 mvLightPosition = viewMatrix * vec4(lighting_uPointLocation[i], 1.);\n      vec3 pointLightDirection = normalize(mvLightPosition.xyz - lighting_vPosition.xyz);\n      pointWeight += max(dot(lighting_vNormal.xyz, pointLightDirection), 0.) * pointColor[i];\n     } else {\n       break;\n     }\n   }\n   return ambientColor + (directionalColor * directionalLightWeighting) + pointWeight;\n}\n\nvoid lighting_apply(vec3 position, vec3 normal) {\n  lighting_setPositionAndNormal(position, normal);\n  if(!lighting_uEnableLights) {\n    lighting_vLightWeighting = vec3(1., 1., 1.);\n  } else {\n    lighting_vLightWeighting = lighting__getLightWeighting();\n  }\n}\n\nvoid lighting_set_reflection(vec3 position) {\n  if (lighting_uEnableReflections) {\n    lighting_vReflection = (viewInverseMatrix[3] - (worldMatrix * vec4(position, 1.))).xyz;\n  } else {\n    lighting_vReflection = vec3(1., 1., 1.);\n  }\n}\n","\n"),"".concat("\n","\n").concat("precision highp float;\n\n#define LIGHT_MAX 4\n\nvarying vec3 lighting_vLightWeighting;\n\nvec4 lighting_apply(vec4 color) {\n  return vec4(color.rgb * lighting_vLightWeighting, color.a);\n}\n\nuniform mat4 viewMatrix;\n\n\nvarying vec4 lighting_vColor;\nvarying vec4 lighting_vTransformedNormal;\nvarying vec4 lighting_vPosition;\n\nuniform float shininess;\nuniform bool enableSpecularMap;\nuniform bool enableLights;\n\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform float lighting_uPointSpecularEnable[LIGHT_MAX];\nuniform vec3 lighting_uPointSpecularColor[LIGHT_MAX];\nuniform int numberPoints;\n\n\nvec3 lighting__calculate_light_weighting() {\n\treturn lighting__calculate_light_weighting(shininess);\n}\n\nvec3 lighting__calculate_light_weighting(shininess) {\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0., 0., 0.);\n  vec3 diffuseLight = vec3(0., 0., 0.);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(lighting_uPointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (lighting_uPointSpecularEnable > 0.) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininessVal);\n        specularLight += specularLightWeighting * lighting_uPointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * lighting_uPointColor[i];\n    } else {\n      break;\n    }\n  }\n\n  return ambientColor + diffuseLight + specularLight;\n}\n\nvoid lighting_filterColor(fragmentColor) {\n  if (!lighting_enable) {\n  \treturn fragmentColor;\n  } else {\n  \tvec3 lightWeighting = lighting__calculate_light_weighting();\n  \treturn vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\n  }\n}\n\nuniform vec3 material_uAmbientColor;\nuniform vec3 material_uDiffuseColor;\nuniform vec3 material_uSpecularColor;\nuniform vec3 material_uEmissiveColor;\n\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\n\nuniform mat4 viewMatrix;\n\nvoid apply_lighting(color) {\n  vec3 ambientLightWeighting = ambientColor;\n\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0.0, 0.0, 0.0);\n  vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (enableSpecularHighlights) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n        specularLight += specularLightWeighting * pointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * pointColor[i];\n    } else {\n        break;\n    }\n  }\n\n  vec3 matAmbientColor = material_uAmbientColor * color.rgb;\n  vec3 matDiffuseColor = material_uDiffuseColor * color.rgb;\n  vec3 matSpecularColor = material_uSpecularColor * color.rgb;\n  vec3 matEmissiveColor = material_uEmissiveColor * color.rgb;\n  gl_FragColor = vec4(\n    matAmbientColor * ambientLightWeighting\n    + matDiffuseColor * diffuseLightWeighting\n    + matSpecularColor * specularLightWeighting\n    + matEmissiveColor,\n    color.a\n  );\n}\n\n  vec3 lightWeighting;\n  if (!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 lightDirection;\n    float specularLightWeighting = 0.0;\n    float diffuseLightWeighting = 0.0;\n    vec3  specularLight = vec3(0.0, 0.0, 0.0);\n    vec3  diffuseLight = vec3(0.0, 0.0, 0.0);\n\n    vec3 transformedPointLocation;\n    vec3 normal = vTransformedNormal.xyz;\n\n    vec3 eyeDirection = normalize(-vPosition.xyz);\n    vec3 reflectionDirection;\n\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n        lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n        if (enableSpecular[i] > 0.0) {\n          reflectionDirection = reflect(-lightDirection, normal);\n          specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n          specularLight += specularLightWeighting * pointSpecularColor[i];\n        }\n\n        diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n        diffuseLight += diffuseLightWeighting * pointColor[i];\n      } else {\n        break;\n      }\n    }\n\n    lightWeighting = ambientColor + diffuseLight + specularLight;\n  }\nuniform float reflection;\nuniform float refraction;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n");var cn={lightDirection:new Float32Array([1,1,2])};var ln={name:"dirlight",vs:null,fs:"uniform vec3 dirlight_uLightDirection;\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn,t={};return e.lightDirection&&(t.dirlight_uLightDirection=e.lightDirection),t},dependencies:[un]};new Uint8Array([0,255,255,255]);var fn="void main() {}";"#version 300 es\n".concat(fn);var dn=n("kLp3"),hn=n.n(dn),vn={},gn=function(e){vn[e.id]||(vn[e.id]=e,hn.a.listItem("luma.gl",e.id))},bn=function e(t,n,r){t&&(n.length>1?e(t[n[0]],n.slice(1),r):t[n[0]]=r)},mn=new Map,pn=function(e,t){if(E.b.__SEER_INITIALIZED__&&e){var n=mn.get(e);n&&n.forEach((function(e,n){bn(t,n,e)}))}};function yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,n=void 0===t?"Uniforms":t,r=e.program,i=e.uniforms,a=e.undefinedOnly,o=void 0!==a&&a;Object(N.a)(r);var s=".*_.*",u=".*Matrix",c=r._uniformSetters,l={},f=Object.keys(c).sort(),d=0,h=!0,g=!1,b=void 0;try{for(var m,p=f[Symbol.iterator]();!(h=(m=p.next()).done);h=!0){var y=m.value;y.match(s)||y.match(u)||_n({table:l,header:n,uniforms:i,uniformName:y,undefinedOnly:o})&&d++}}catch(C){g=!0,b=C}finally{try{h||null==p.return||p.return()}finally{if(g)throw b}}var _=!0,O=!1,E=void 0;try{for(var j,w=f[Symbol.iterator]();!(_=(j=w.next()).done);_=!0){var x=j.value;x.match(u)&&_n({table:l,header:n,uniforms:i,uniformName:x,undefinedOnly:o})&&d++}}catch(C){O=!0,E=C}finally{try{_||null==w.return||w.return()}finally{if(O)throw E}}var A=!0,k=!1,T=void 0;try{for(var S,P=f[Symbol.iterator]();!(A=(S=P.next()).done);A=!0){var F=S.value;l[F]||_n({table:l,header:n,uniforms:i,uniformName:F,undefinedOnly:o})&&d++}}catch(C){k=!0,T=C}finally{try{A||null==P.return||P.return()}finally{if(k)throw T}}var I=0,R={};if(!o)for(var M in i){var B=i[M];l[M]||(I++,R[M]=Object(L.a)({Type:"NOT USED: ".concat(B)},n,Object(v.b)(B)))}return{table:l,count:d,unusedTable:R,unusedCount:I}}function _n(e){var t,n=e.table,r=e.header,i=e.uniforms,a=e.uniformName,o=e.undefinedOnly,s=i[a],u=function(e){return null!=e}(s);return(!o||!u)&&(n[a]=(t={},Object(L.a)(t,r,u?Object(v.b)(s):"N/A"),Object(L.a)(t,"Uniform Type",u?s:"NOT PROVIDED"),t),!0)}function On(e,t,n,r){var i,a,o,s,u=e.gl,l="NOT PROVIDED",f="N/A",d="N/A",h="N/A";if(n&&(l=n.type,f=n.size,a=-1!==(l=String(l).replace("Array","")).indexOf("nt")),t instanceof X.a){var g,b,m=t,p=m.getDebugData(),y=p.data;if(o=p.modified?"*":"",s=y,d=(h=m.byteLength)/y.BYTES_PER_ELEMENT/f,n){var _=n.divisor>0;b="".concat(_?"I ":"P "," ").concat(d," (x").concat(f,"=").concat(h," bytes ").concat(Object(c.c)(u,l),")")}else a=!0,b="".concat(h," bytes");return g={},Object(L.a)(g,r,"".concat(o).concat(Object(v.b)(s,{size:f,isInteger:a}))),Object(L.a)(g,"Format ",b),g}return s=t,f=t.length,a=-1!==(l=String(t.constructor.name).replace("Array","")).indexOf("nt"),i={},Object(L.a)(i,r,"".concat(Object(v.b)(s,{size:f,isInteger:a})," (constant)")),Object(L.a)(i,"Format ","".concat(f,"x").concat(l," (constant)")),i}function En(e,t){var n=Be(t.type,t.size);return n?"".concat(e," (").concat(n.name,")"):e}function jn(e){var t=e.accessor,n=Be(t.type,t.size);return n?"".concat(n.name," ").concat(e.name):e.name}hn.a.listenFor("luma.gl",(function(e){var t=vn[e.itemKey];if(t&&"edit"===e.type&&"uniforms"===e.valuePath[0]){var n=e.valuePath.slice(1);!function(e,t,n){E.b.__SEER_INITIALIZED__&&(mn.has(e)||mn.set(e,new Map),mn.get(e).set(t,n))}(e.itemKey,n,e.value);var r=t.getUniforms();bn(r,n,e.value),t.setUniforms(r)}}));var wn=["renderPickingBuffer","pickingEnabled"],xn=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(O.a)(this,t),n=Object(q.a)(this,Object(Q.a)(t).call(this,r)),Object(N.a)(Object(l.m)(e)),n.gl=e,n.lastLogTime=0,n.initialize(r),n}return Object(K.a)(t,e),Object(F.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={},this.program=this._createProgram(e),this.vertexArray=new Je(this.gl,{program:this.program}),this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this.setProps(e),this.setUniforms(Object.assign({},this.getModuleUniforms(),this.getModuleUniforms(e.moduleSettings))),this.isInstanced=e.isInstanced||e.instanced,this.onBeforeRender=e.onBeforeRender||function(){},this.onAfterRender=e.onAfterRender||function(){},Object(N.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(e){Object.assign(this.props,e),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"uniforms"in e&&this.setUniforms(e.uniforms,e.samplers),"pickable"in e&&(this.pickable=e.pickable),"timerQueryEnabled"in e&&(this.timerQueryEnabled=e.timerQueryEnabled&&Ge.isSupported(this.gl,["timers"]),e.timerQueryEnabled&&!this.timerQueryEnabled&&v.g.warn("GPU timer not supported")()),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers),"_animationProps"in e&&this._setAnimationProps(e._animationProps),"_animationLoop"in e&&(this.animationLoop=e._animationLoop)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();var t;this.program.delete(),this.vertexArray.delete(),t=this.id,delete vn[t],hn.a.deleteItem("luma.gl",t)}},{key:"destroy",value:function(){this.delete()}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0!==t&&t,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,this.geometry&&(r=r||this.geometry.getNeedsRedraw({clearRedrawFlags:n})),this.animated&&(r=r||"animated model ".concat(this.id)),r}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getProgram",value:function(){return this.program}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getUniforms",value:function(){return this.program.getUniforms}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"setDrawMode",value:function(e){return this.props.drawMode=Pt(e),this}},{key:"setVertexCount",value:function(e){return Object(N.a)(Number.isFinite(e)),this.props.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return Object(N.a)(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){this.geometry=e;var t=this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes());return this.vertexArray.setAttributes(t),this.setNeedsRedraw(),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(v.d)(e))return this;Object.assign(this.attributes,e);var t=this._createBuffersFromAttributeDescriptors(e);return this.vertexArray.setAttributes(t),this.setNeedsRedraw(),this}},{key:"setUniforms",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({},t),pn(this.id,t),t=this._extractAnimatedUniforms(t),this.program.setUniforms(t,n,(function(){e._checkForDeprecatedUniforms(t),e.setNeedsRedraw()}))}},{key:"_setAnimationProps",value:function(e){var t=this;if(this.animated){Object(N.a)(e,"Model.draw(): animated uniforms but no animationProps");var n=this._evaluateAnimateUniforms(e);this.program.setUniforms(n,{},(function(){t._checkForDeprecatedUniforms(n),t.setNeedsRedraw()}))}}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function(e){return le(this.program.gl,e),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleSettings,n=void 0===t?null:t,r=e.framebuffer,i=e.uniforms,a=void 0===i?{}:i,o=e.attributes,s=void 0===o?{}:o,u=e.samplers,c=void 0===u?{}:u,l=e.transformFeedback,f=void 0===l?this.transformFeedback:l,d=e.parameters,h=void 0===d?{}:d,g=e.vertexArray,b=void 0===g?this.vertexArray:g,m=e.animationProps;gn(this),this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(a,c),this._refreshAnimationProps(m);var p=this._logDrawCallStart(2),y=this.vertexArray.getDrawParams(this.props);y.isInstanced&&!this.isInstanced&&v.g.warn("Found instanced attributes on non-instanced model",this.id)();var _=y.isIndexed,O=y.indexType,E=this.isInstanced,j=this.instanceCount;return this.onBeforeRender(),this._timerQueryStart(),this.program.draw(Object.assign({},e,{logPriority:p,uniforms:null,framebuffer:r,parameters:h,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:b,transformFeedback:f,isIndexed:_,indexType:O,isInstanced:E,instanceCount:j})),this._timerQueryEnd(),this.onAfterRender(),this.setNeedsRedraw(!1),this._logDrawCallEnd(p,b,r),this}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.discard,n=void 0===t||t,r=e.feedbackBuffers,i=e.unbindModels,a=void 0===i?[]:i,o=e.parameters;r&&this._setFeedbackBuffers(r),n&&(o=Object.assign({},o,Object(L.a)({},35977,n))),a.forEach((function(e){return e.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},e,{parameters:o}))}finally{a.forEach((function(e){return e.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(N.a)(arguments.length<=1),this.draw({uniforms:e})}},{key:"_createProgram",value:function(e){var t=e.vs,n=void 0===t?null:t,r=e.fs,i=void 0===r?null:r,a=e.modules,o=void 0===a?null:a,s=e.defines,u=void 0===s?{}:s,c=e.inject,l=void 0===c?{}:c,f=e.shaderCache,d=void 0===f?null:f,h=e.varyings,g=void 0===h?null:h,b=e.bufferMode,m=void 0===b?35981:b,p=e.program,y=void 0===p?null:p;this.getModuleUniforms=function(e){};var _=this.id;if(!y){n=n||Ft,i=i||It;var O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.vs,r=t.fs,i=Ct(t.modules||[]);return{gl:e,vs:en(e,Object.assign({},t,{source:n,type:"vs",modules:i})),fs:en(e,Object.assign({},t,{source:r,type:"fs",modules:i})),getUniforms:tn(i),modules:nn(i)}}(this.gl,{vs:n,fs:i,modules:o,inject:l,defines:u,log:v.g});n=O.vs,i=O.fs,y=d?d.getProgram(this.gl,{id:_,vs:n,fs:i}):new De(this.gl,{id:_,vs:n,fs:i,varyings:g,bufferMode:m}),this.getModuleUniforms=O.getUniforms||function(e){}}return Object(N.a)(y instanceof De,"Model needs a program"),y}},{key:"_checkForDeprecatedUniforms",value:function(e){wn.forEach((function(t){t in e&&v.g.deprecated(t,"use picking shader module and Model class updateModuleSettings()")()}))}},{key:"_refreshAnimationProps",value:function(e){(e=e||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(e)}},{key:"_evaluateAnimateUniforms",value:function(e){if(!this.animated)return{};var t={};for(var n in this.animatedUniforms){var r=this.animatedUniforms[n];t[n]=r(e)}return t}},{key:"_extractAnimatedUniforms",value:function(e){var t=!1;for(var n in e){var r=e[n];"function"==typeof r?(this.animatedUniforms[n]=r,t=!0):delete this.animatedUniforms[n]}if(this.animated=!Object(v.d)(this.animatedUniforms),!t)return e;var i={};for(var a in e)this.animatedUniforms[a]||(i[a]=e[a]);return i}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(v.d)(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new ze(t,{program:this.program}),this.transformFeedback.setBuffers(e),this.setNeedsRedraw(),this}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new Ge(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var e=this.timeElapsedQuery.getResult();this.stats.lastFrameTime=e,this.stats.accumulatedFrameTime+=e,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,v.g.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_createBuffersFromAttributeDescriptors",value:function(e){var t=this.program.gl,n={};for(var r in e){var i=e[r],a=this._attributes[r];i instanceof Tt?a=i:i instanceof X.a?(a=a||new Tt(t,Object.assign({},i,i.layout,{id:r}))).update({buffer:i}):a?a.update(i):a=new Tt(t,Object.assign({},i,{id:r})),this._attributes[r]=a,n[r]=a.getValue()}return n}},{key:"_logDrawCallStart",value:function(e){var t=e>3?0:1e4;if(!(v.g.priority<e||Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),v.g.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:v.g.priority<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,t,n,r){if(void 0!==e){var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,n=e.header,r=void 0===n?"Attributes":n;if(!t.configuration)return{};var i={};t.elements&&(i.ELEMENT_ARRAY_BUFFER=On(t,t.elements,null,r));var a=t.values;for(var o in a){var s=t._getAttributeInfo(o);if(s){var u="".concat(o,": ").concat(s.name),c=t.accessors[s.location];c&&(u="".concat(o,": ").concat(En(s.name,c))),i[u]=On(t,a[o],c,r)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),a=yn({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),o=a.table,s=a.unusedTable,u=a.unusedCount,c=yn({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),l=c.table;c.count>0&&v.g.log("MISSING UNIFORMS",Object.keys(l))(),u>0&&v.g.log("UNUSED UNIFORMS",Object.keys(s))();var f=function(e){var t={},n="Accessors for ".concat(e.id),r=!0,i=!1,a=void 0;try{for(var o,s=e.attributeInfos[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(u){var c=jn(u);t["in ".concat(c)]=Object(L.a)({},n,JSON.stringify(u.accessor))}}}catch(m){i=!0,a=m}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var l=!0,f=!1,d=void 0;try{for(var h,v=e.varyingInfos[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){var g=h.value;if(g){var b=jn(g);t["out ".concat(b)]=Object(L.a)({},n,JSON.stringify(g.accessor))}}}catch(m){f=!0,d=m}finally{try{l||null==v.return||v.return()}finally{if(f)throw d}}return t}(this.vertexArray.configuration);v.g.table(e,i)(),v.g.table(e,o)(),v.g.table(e+1,f)(),function(e,t){if(hn.a.isReady()&&!hn.a.throttle("luma.gl:".concat(e.id),1e3)){var n=e.geometry?Object.assign({},e.geometry.attributes,e.attributes):e.attributes,r=Object.assign({},e.uniforms,t);hn.a.multiUpdate("luma.gl",e.id,[{path:"objects.uniforms",data:r},{path:"objects.attributes",data:n}])}}(this,n),r&&r.log({priority:2,message:"Rendered to ".concat(r.id)}),v.g.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}},{key:"vertexCount",get:function(){return Number.isFinite(this.props.vertexCount)?this.props.vertexCount:this.geometry&&this.geometry.getVertexCount()}},{key:"drawMode",get:function(){return Number.isFinite(this.props.drawMode)?this.props.drawMode:this.geometry&&this.geometry.drawMode}}]),t}(kt),An=n("U8pU"),kn={preserveDrawingBuffer:!0},Tn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,e);var n=t.onCreateContext,r=void 0===n?function(e){return C(e)}:n,i=t.onAddHTML,a=void 0===i?null:i,o=t.onInitialize,s=void 0===o?function(){}:o,u=t.onRender,c=void 0===u?function(){}:u,l=t.onFinalize,f=void 0===l?function(){}:l,d=t.gl,h=void 0===d?null:d,g=t.glOptions,b=void 0===g?{}:g,m=t.debug,p=void 0!==m&&m,y=t.createFramebuffer,_=void 0!==y&&y,E=t.autoResizeViewport,j=void 0===E||E,w=t.autoResizeDrawingBuffer,x=void 0===w||w,A=t.useDevicePixels,k=void 0===A||A;return"useDevicePixelRatio"in t&&(v.g.deprecated("useDevicePixelRatio","useDevicePixels")(),k=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:a,onInitialize:s,onRender:c,onFinalize:f,gl:h,glOptions:b,debug:p,createFramebuffer:_},this.gl=h,this.needsRedraw=null,this._initialized=!1,this._running=!1,this._animationFrameId=null,this._startPromise=null,this.setProps({autoResizeViewport:j,autoResizeDrawingBuffer:x,useDevicePixels:k}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this),this}return Object(F.a)(e,[{key:"setNeedsRedraw",value:function(e){return Object(N.a)("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running||(this._running=!0,this._startPromise=m().then((function(){if(!e._running||e._initialized)return null;e._createWebGLContext(t),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport();var n=e.onInitialize(e.animationProps);return e._initialized=!0,n})).then((function(t){e._running&&(e._addCallbackData(t||{}),!1!==t&&e._startLoop())}))),this}},{key:"redraw",value:function(){return this._setupFrame(),this._updateCallbackData(),this.onRender(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),Object(l.f)(this._animationFrameId),this._animationFrameId=null,this._running=!1),this}},{key:"onCreateContext",value:function(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(e);return n?Number(n.value):t}},{key:"setViewParameters",value:function(){return v.g.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var e=this;Object(l.f)(this._animationFrameId),this._animationFrameId=Object(l.p)((function t(){e._running&&(e.redraw(),e._animationFrameId=Object(l.p)(t))}))}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),time:0,tick:0,tock:0,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var e=this._getSizeAndAspect(),t=e.width,n=e.height,r=e.aspect;t===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.time=Date.now()-this.animationProps.startTime,this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(e){"object"===Object(An.a)(e)&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}},{key:"_createWebGLContext",value:function(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,kn,this.props.glOptions),this.gl=this.props.gl||this.onCreateContext(e),!Object(l.m)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");this.props.debug&&(this.gl=w(this.gl)),Object(U.a)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);var n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas,i=r.clientWidth,a=r.clientHeight;return i>=0&&a>=0?n=t>0?i/a:1:e>0&&t>0&&(n=e/t),{width:e,height:t,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){var n=t.useDevicePixels&&window.devicePixelRatio||1,r="width"in t?t.width:e.canvas.clientWidth,i="height"in t?t.height:e.canvas.clientHeight;return e.canvas.width=r*n,void(e.canvas.height=i*n)}var a=e.getExtension("STACKGL_resize_drawingbuffer");a&&"width"in t&&"height"in t&&a.resize(t.width,t.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new ve(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_startEventHandling",value:function(){this.gl.canvas.addEventListener("mousemove",this._onMousemove),this.gl.canvas.addEventListener("mouseleave",this._onMouseleave)}},{key:"_onMousemove",value:function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function(e){this.animationProps._mousePosition=null}}]),e}();new Uint8Array([0,0,0]);var Sn;Sn={},Object(L.a)(Sn,10241,9728),Object(L.a)(Sn,10240,9728),Object(L.a)(Sn,10242,33071),Object(L.a)(Sn,10243,33071);var Pn=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,t);var n=e.id,r=void 0===n?Object(v.i)("cube-geometry"):n;return Object(q.a)(this,Object(Q.a)(t).call(this,Object.assign({},e,{id:r,attributes:Nn()})))}return Object(K.a)(t,e),t}(Lt),Ln=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Fn=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),In=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),Rn=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]);function Nn(){return{indices:new Uint16Array(Ln),positions:new Float32Array(Fn),normals:new Float32Array(In),texCoords:new Float32Array(Rn)}}var Mn=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(O.a)(this,t);var r=n.id,i=void 0===r?Object(v.i)("cube"):r;return Object(q.a)(this,Object(Q.a)(t).call(this,e,Object.assign({},n,{id:i,geometry:new Pn(n)})))}return Object(K.a)(t,e),t}(xn);n("tVzf");n("0vGO"),n("r9/M"),n("i4fG"),n("mnC6");n("c8wm");var Bn="undefined"!=typeof window,Cn=new At,Dn=new Tn({createFramebuffer:!0,onInitialize:function(e){var t=e.gl;return Object(U.b)(t,{clearColor:[0,0,0,1],clearDepth:1,depthTest:!0,depthFunc:t.LEQUAL}),{cube:Un(t)}},onFinalize:function(e){e.gl;e.cube.delete()},onRender:function(e){var t=e.gl,n=e.tick,r=e.aspect,i=e.cube;e.framebuffer;try{Cn=(new At).perspective({fov:st(60),aspect:r,near:1,far:2048})}catch(a){}i.setUniforms({uTime:.1*n,uProjection:Cn,uView:(new At).lookAt({center:[0,0,0],eye:[0,64*Math.sin(.006*n)/2,32]}),uLightDirection:[64*Math.cos(.001*n)/2,64*Math.sin(.001*n)/2,128],uModel:(new At).rotateX(.01*n).rotateY(.013*n)}),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),i.render()}});function Un(e){for(var t=[],n=0;n<64;n++)for(var r=3*n-94.5,i=0;i<64;i++){var a=3*i-94.5;t.push(r,a)}t=new Float32Array(t);var o=new Float32Array(12288).map((function(e){return[.06640625,.04296875,.1640625][e%3]}));return new Mn(e,{vs:"attribute vec3 positions;\nattribute vec3 normals;\nattribute vec2 instanceOffsets;\nattribute vec3 instanceColors;\n\nuniform mat4 uModel;\nuniform mat4 uView;\nuniform mat4 uProjection;\nuniform float uTime;\n\nuniform vec3 uLightDirection;\n\nvarying vec3 color;\n\nvoid main(void) {\n  vec3 normal = vec3(uModel * vec4(normals, 1.0));\n\n  // Set up data for modules\n  color = instanceColors;\n  project_setNormal(normal);\n\n  // Vertex position (z coordinate undulates with time), and model rotates around center\n  float delta = length(instanceOffsets);\n  vec4 offset = vec4(instanceOffsets, sin((uTime + delta) * 0.1) * 16.0, 0);\n  gl_Position = uProjection * uView * (uModel * vec4(positions, 1.0) + offset);\n}\n",fs:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 color;\n\nvoid main(void) {\n  gl_FragColor = vec4(color, 0.9);\n  gl_FragColor = dirlight_filterColor(gl_FragColor);\n}\n",modules:[ln],isInstanced:1,instanceCount:4096,attributes:{instanceOffsets:{value:t,size:2,instanced:1},instanceColors:{value:o,size:3,instanced:1}}})}var Gn=function(e){function t(){return e.apply(this,arguments)||this}Object(o.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._animationStop()},n._animationStart=function(){Dn.start({canvas:"lumagl-canvas"})},n._animationStop=function(){Dn.stop({canvas:"lumagl-canvas"})},n.render=function(){return i.a.createElement("div",{id:"hero"},Bn?i.a.createElement(u.a,{onEnter:this._animationStart,onLeave:this._animationStop},i.a.createElement("canvas",{id:"lumagl-canvas",style:{position:"absolute",height:"500px",top:0,width:"100vw",zIndex:-1}})):null,i.a.createElement("div",{className:"main"},"Large scale ",i.a.createElement("em",null,"geospatial")," data visualization"),i.a.createElement("div",{className:"secondary"},"Promoting Industry Collaboration through Open Source and Open Governance"))},t}(r.Component),zn=n("vOnD"),Wn=Object(zn.c)(s.b).withConfig({displayName:"manifesto-section__TitleSection",componentId:"ri1oz7-0"})(["font-family:",";line-height:150%;background:url(",") no-repeat;min-height:300px;padding-left:200px;margin-top:50px;padding-top:50px;"],(function(e){return e.theme.fontFamilyLight}),(function(e){return e.backgroundImg})),Vn=zn.c.div.withConfig({displayName:"manifesto-section__ContributorContainer",componentId:"ri1oz7-1"})(["display:flex;flex-direction:row;justify-content:flex-start;"]),Hn=zn.c.div.withConfig({displayName:"manifesto-section__OpenGovContainer",componentId:"ri1oz7-2"})([".image{margin-top:50px;}"]),Xn=zn.c.div.withConfig({displayName:"manifesto-section__ContributorSection",componentId:"ri1oz7-3"})(["display:flex;flex-direction:column;.logo-title{font-size:14px;line-height:110%;color:",";font-family:",";}.logo{margin-top:30px;a{margin-right:100px;}}.logo.tall{margin-top:20px;margin-left:-18px;}:not(:first-child){border-left:1px solid ",";padding-left:40px;}"],(function(e){return e.theme.gray}),(function(e){return e.theme.fontFamilyLight}),(function(e){return e.theme.gray})),qn=zn.c.div.withConfig({displayName:"manifesto-section__SectionContainer",componentId:"ri1oz7-4"})(["display:flex;flex-direction:row;justify-content:space-between;"]),Qn=zn.c.div.withConfig({displayName:"manifesto-section__SectionTitle",componentId:"ri1oz7-5"})(["width:264px;margin-right:20px;font-size:18px;line-height:20px;font-family:",";flex-shrink:0;"],(function(e){return e.theme.fontFamilyMedium})),Kn=zn.c.div.withConfig({displayName:"manifesto-section__SectionContent",componentId:"ri1oz7-6"})(["flex-grow:1;"]),Yn=zn.c.div.withConfig({displayName:"manifesto-section__ListTitle",componentId:"ri1oz7-7"})(["font-size:16px;margin-top:18px;font-family:",";:first-child{margin-top:0;}"],(function(e){return e.theme.fontFamilyMedium})),Jn=zn.c.div.withConfig({displayName:"manifesto-section__ListItem",componentId:"ri1oz7-8"})(["font-size:16px;color:",";"],(function(e){return e.theme.gray}));function Zn(e){var t=e.imageResolver;return console.log(t),i.a.createElement("div",null,i.a.createElement(s.a,null,i.a.createElement(Wn,{backgroundImg:t["logos/vis-logo.png"]},"Vis.gl is a suite of composable, interoperable open source geospatial visualization frameworks centered around"," ",i.a.createElement("a",{href:"https://deck.gl"},"deck.gl"),".")),i.a.createElement(s.a,null,i.a.createElement(qn,null,i.a.createElement(Qn,null,"Contribution"),i.a.createElement(Kn,null,i.a.createElement(Vn,null,i.a.createElement(Xn,null,i.a.createElement("div",{className:"logo-title"},"Lead Contributors"),i.a.createElement("div",{className:"logo"},i.a.createElement("a",{href:"https://unfolded.ai"},i.a.createElement("img",{height:"40",src:t["logos/unfolded-logo.png"]})),i.a.createElement("a",{href:"https://carto.com"},i.a.createElement("img",{height:"40",src:t["logos/CARTO-logo-positive.png"]})))),i.a.createElement(Xn,null,i.a.createElement("div",{className:"logo-title"},"Created By"),i.a.createElement("div",{className:"logo tall"},i.a.createElement("a",{href:"https://uber.com/"},i.a.createElement("img",{height:"60",src:t["logos/uber-logo-black.jpg"]})))))))),i.a.createElement(s.a,null,i.a.createElement(qn,null,i.a.createElement(Qn,null,"Open Governance"),i.a.createElement(Kn,null,i.a.createElement(Hn,null,i.a.createElement(s.f,null,"vis.gl is under open governance, and anyone can join the open planning meetings. Contributor status is available and technical steering committee membership is available to major contributors."),i.a.createElement("div",{className:"image"},i.a.createElement("a",{href:"https://www.linuxfoundation.org//"},i.a.createElement("img",{height:"40",src:t["logos/linux-foundation.svg"]})),i.a.createElement("span",{style:{padding:50}}),i.a.createElement("a",{href:"https://uc.foundation/"},i.a.createElement("img",{height:"40",src:t["logos/ucf-color-hztl.svg"]}))))))),i.a.createElement(s.a,null,i.a.createElement(qn,null,i.a.createElement(Qn,null,"Frameworks"),i.a.createElement(Kn,null,i.a.createElement(Hn,null,i.a.createElement(s.f,null,"The ",i.a.createElement("a",{href:"/frameworks"},"vis.gl Framework Catalog")," provides an overview of the various frameworks in the vis.gl framework suite."),i.a.createElement("img",{src:t["frameworks.jpg"],width:"100%"}))))),i.a.createElement(s.a,null,i.a.createElement(qn,null,i.a.createElement(Qn,null,"Releases"),i.a.createElement(Kn,null,i.a.createElement(s.d,null,"vis.gl 8.4"),i.a.createElement(s.f,null,i.a.createElement(Yn,null,"Release Date: Jan 31, 2021"),i.a.createElement(Yn,null,"deck.gl 8.4"),i.a.createElement(Jn,null,i.a.createElement("a",{href:"https://deck.gl/docs/whats-new"},"Release Notes")),i.a.createElement("div",{style:{marginTop:5}}),i.a.createElement(s.e,null,i.a.createElement(Jn,null,"MVTLayer - 2x performance via binary mode. TileJSON. Query Features."),i.a.createElement(Jn,null,"HeatmapLayer - GPU aggregations now include MEAN and SUM"),i.a.createElement(Jn,null,"BitmapLayer - pixel picking"),i.a.createElement(Jn,null,"All Layers - performance, rendering edge cases"),i.a.createElement(Jn,null,"Interaction - mobile improvments, new gesture for 3D interaction, inertia"),i.a.createElement(Jn,null,"loaders.gl integration - More control of loader autoselection"),i.a.createElement(Jn,null,"@deck.gl/carto - enables data-driven map visualizations using CARTOColors")),i.a.createElement(Yn,null,"luma.gl 8.4"),i.a.createElement(Jn,null,i.a.createElement("a",{href:"https://luma.gl/docs/whats-new"},"Release Notes")),i.a.createElement("div",{style:{marginTop:5}}),i.a.createElement(s.e,null,i.a.createElement(Jn,null,i.a.createElement("b",null,"TypeScript")," - types are now exported")),i.a.createElement(Yn,null,"react-map-gl v6.1"),i.a.createElement(Jn,null,i.a.createElement("a",{href:"https://visgl.github.io/react-map-gl/docs/whats-new"},"Release Notes")),i.a.createElement("div",{style:{marginTop:5}}),i.a.createElement(s.e,null,i.a.createElement(Jn,null,"Choose your mapbox API compatible rendering library: Mapbox GL JS v2, Mapbox GL JS v1, MapLibre."),i.a.createElement(Jn,null,i.a.createElement("b",null,"TypeScript")," - types are now exported")),i.a.createElement(Yn,null,"math.gl 3.4"),i.a.createElement(Jn,null,i.a.createElement("a",{href:"https://math.gl/docs/whats-new"},"Release Notes")),i.a.createElement("div",{style:{marginTop:5}}),i.a.createElement(s.e,null,i.a.createElement(Jn,null,"@math.gl/geoid - New module for working with Earth Gravity Models"),i.a.createElement(Jn,null,"@math.gl/polygon - Improved support for binary polygons")),i.a.createElement(Yn,null,"loaders.gl 2.3"),i.a.createElement(Jn,null,i.a.createElement("a",{href:"https://loaders.gl/docs/whats-new"},"Release Notes")),i.a.createElement("div",{style:{marginTop:5}}),i.a.createElement(s.e,null,i.a.createElement(Jn,null,"loaders.gl is still on v2.3. The big 3.0 release is targeting vis.gl 8.5.")))))),i.a.createElement(s.a,null,i.a.createElement(qn,null,i.a.createElement(Qn,null,"History"),i.a.createElement(Kn,null,i.a.createElement(Yn,null,"2020"),i.a.createElement(s.e,null,i.a.createElement(Jn,null,"vis.gl Open Governance meetings started, under the auspices of the Linux Foundation and the UCF."),i.a.createElement(Jn,null,"Uber transferred a set of core vis.gl frameworks to the UCF.")),i.a.createElement(Yn,null,"2019"),i.a.createElement(s.e,null,i.a.createElement(Jn,null,"Uber created the Urban Computing Foundation (a sub-foundation of the Linux Foundation), transferring kepler.gl.")),i.a.createElement(Yn,null,"2018"),i.a.createElement(s.e,null,i.a.createElement(Jn,null,"Uber open sourced kepler.gl"),i.a.createElement(Jn,null,"loaders.gl and nebula.gl were created.")),i.a.createElement(Yn,null,"2017"),i.a.createElement(s.e,null,i.a.createElement(Jn,null,"math.gl was created."),i.a.createElement(Jn,null,"probe.gl was created.")),i.a.createElement(Yn,null,"2016"),i.a.createElement(Jn,null,"luma.gl was created."),i.a.createElement(Yn,null,"2015"),i.a.createElement(s.e,null,i.a.createElement(Jn,null,"The core deck.gl framework was open sourced by Uber."),i.a.createElement(Jn,null,"The core deck.gl framework was developed by Uber to support a wide range of geospatial visualization use cases across the company."))))))}t.default=function(e){var t=e.data.allFile.edges.reduce((function(e,t){return e[t.node.relativePath]=t.node.publicURL,e}),{});return i.a.createElement(a.a,{page:"home"},i.a.createElement("div",{id:"home"},i.a.createElement(Gn,null),i.a.createElement(Zn,{imageResolver:t})))}},"SR+o":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("1OyB"),i=n("md7G"),a=n("foSv"),o=n("vuIU"),s=n("Ji7U"),u=n("JX7q"),c=n("6Sts"),l=n("xo4u"),f=function(e){function t(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,t),Object(l.e)(e),(n=Object(i.a)(this,Object(a.a)(t).call(this,e,Object.assign({},o,{target:3553})))).initialize(o),Object.seal(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(t,e),Object(o.a)(t,null,[{key:"isSupported",value:function(e,t){return c.a.isSupported(e,t)}}]),Object(o.a)(t,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,t.activeTexture(33984+e),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return e.activeTexture(33984+this.textureUnit),e.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}}]),t}(c.a)},Sr2d:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return d}));var r=n("ODXe"),i=n("KQm4"),a=n("r+5q"),o=n("62Ki");n.d(t,"a",(function(){return o.c}));var s=n("ket5"),u=n("lvHR"),c={framebuffer:function(e,t){var n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)},blend:function(e,t){return t?e.enable(3042):e.disable(3042)},blendColor:function(e,t){return e.blendColor.apply(e,Object(i.a)(t))},blendEquation:function(e,t){t=l(t)?t:[t,t],e.blendEquationSeparate.apply(e,Object(i.a)(t))},blendFunc:function(e,t){t=l(t)&&2===t.length?Object(i.a)(t).concat(Object(i.a)(t)):t,e.blendFuncSeparate.apply(e,Object(i.a)(t))},clearColor:function(e,t){return e.clearColor.apply(e,Object(i.a)(t))},clearDepth:function(e,t){return e.clearDepth(t)},clearStencil:function(e,t){return e.clearStencil(t)},colorMask:function(e,t){return e.colorMask.apply(e,Object(i.a)(t))},cull:function(e,t){return t?e.enable(2884):e.disable(2884)},cullFace:function(e,t){return e.cullFace(t)},depthTest:function(e,t){return t?e.enable(2929):e.disable(2929)},depthFunc:function(e,t){return e.depthFunc(t)},depthMask:function(e,t){return e.depthMask(t)},depthRange:function(e,t){return e.depthRange.apply(e,Object(i.a)(t))},dither:function(e,t){return t?e.enable(3024):e.disable(3024)},derivativeHint:function(e,t){e.hint(35723,t)},frontFace:function(e,t){return e.frontFace(t)},mipmapHint:function(e,t){return e.hint(33170,t)},lineWidth:function(e,t){return e.lineWidth(t)},polygonOffsetFill:function(e,t){return t?e.enable(32823):e.disable(32823)},polygonOffset:function(e,t){return e.polygonOffset.apply(e,Object(i.a)(t))},sampleCoverage:function(e,t){return e.sampleCoverage.apply(e,Object(i.a)(t))},scissorTest:function(e,t){return t?e.enable(3089):e.disable(3089)},scissor:function(e,t){return e.scissor.apply(e,Object(i.a)(t))},stencilTest:function(e,t){return t?e.enable(2960):e.disable(2960)},stencilMask:function(e,t){var n=t=l(t)?t:[t,t],i=Object(r.a)(n,2),a=i[0],o=i[1];e.stencilMaskSeparate(1028,a),e.stencilMaskSeparate(1029,o)},stencilFunc:function(e,t){var n=t=l(t)&&3===t.length?Object(i.a)(t).concat(Object(i.a)(t)):t,a=Object(r.a)(n,6),o=a[0],s=a[1],u=a[2],c=a[3],f=a[4],d=a[5];e.stencilFuncSeparate(1028,o,s,u),e.stencilFuncSeparate(1029,c,f,d)},stencilOp:function(e,t){var n=t=l(t)&&3===t.length?Object(i.a)(t).concat(Object(i.a)(t)):t,a=Object(r.a)(n,6),o=a[0],s=a[1],u=a[2],c=a[3],f=a[4],d=a[5];e.stencilOpSeparate(1028,o,s,u),e.stencilOpSeparate(1029,c,f,d)},viewport:function(e,t){return e.viewport.apply(e,Object(i.a)(t))}};function l(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function f(e,t){for(var n in Object(o.d)(e,t),t){var r=c[n];r&&r(e,t[n],n)}}function d(e,t,n){if(Object(s.d)(t))return n(e);var r,i=t.nocatch,o=void 0===i||i;if(Object(u.a)(!t.frameBuffer),Object(a.c)(e),f(e,t),o)r=n(e),Object(a.b)(e);else try{r=n(e)}finally{Object(a.b)(e)}return r}},TjS6:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,i=n("rePB"),a=function(e){return s(e)?void 0:0},o=(r={},Object(i.a)(r,3074,(function(e){return s(e)?void 0:36064})),Object(i.a)(r,35723,(function(e){return s(e)?void 0:4352})),Object(i.a)(r,35977,a),Object(i.a)(r,32937,a),Object(i.a)(r,36795,(function(e,t){var n=s(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0})),Object(i.a)(r,37445,(function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_VENDOR_WEBGL||7936)})),Object(i.a)(r,37446,(function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_RENDERER_WEBGL||7937)})),Object(i.a)(r,34047,(function(e,t){var n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),Object(i.a)(r,32883,a),Object(i.a)(r,35071,a),Object(i.a)(r,37447,a),Object(i.a)(r,36063,(function(e,t){if(!s(e)){var n=e.getExtension("WEBGL_draw_buffers");return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),Object(i.a)(r,35379,a),Object(i.a)(r,35374,a),Object(i.a)(r,35377,a),Object(i.a)(r,34852,(function(e){if(!s(e)){var t=e.getExtension("WEBGL_draw_buffers");return t?t.MAX_DRAW_BUFFERS_WEBGL:0}})),Object(i.a)(r,36203,(function(e){return e.getExtension("OES_element_index")?2147483647:65535})),Object(i.a)(r,33001,(function(e){return e.getExtension("OES_element_index")?16777216:65535})),Object(i.a)(r,33e3,(function(e){return 16777216})),Object(i.a)(r,37157,a),Object(i.a)(r,35373,a),Object(i.a)(r,35657,a),Object(i.a)(r,36183,a),Object(i.a)(r,37137,a),Object(i.a)(r,34045,a),Object(i.a)(r,35978,a),Object(i.a)(r,35979,a),Object(i.a)(r,35968,a),Object(i.a)(r,35376,a),Object(i.a)(r,35375,a),Object(i.a)(r,35659,a),Object(i.a)(r,37154,a),Object(i.a)(r,35371,a),Object(i.a)(r,35658,a),Object(i.a)(r,35076,a),Object(i.a)(r,35077,a),Object(i.a)(r,35380,a),r);function s(e){return e&&!0}function u(e,t,n){var r=o[n],i="function"==typeof r?r(e,t,n):r;return void 0!==i?i:t(n)}},U8pU:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return r}))},WsjP:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n("JD4l"),i=n("lvHR");function a(e){return Boolean(e&&(e instanceof r.c||34962===e.ARRAY_BUFFER))}function o(e){return Boolean(e&&(e instanceof r.a||32874===e.TEXTURE_BINDING_3D))}function s(e){Object(i.a)(a(e),"Invalid WebGLRenderingContext")}function u(e){Object(i.a)(o(e),"Requires WebGL2")}},Y3Mf:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return d}));var r=n("vOnD"),i=n("v5f6"),a=r.c.div.attrs({className:"container-lg"}).withConfig({displayName:"components__ContainerLg",componentId:"tmnxop-0"})(["max-width:","px;margin:0 auto;display:flex;justify-content:center;flex-direction:column;position:relative;overflow:hidden;","{margin:0px 40px;&.no-margin{margin:0 0;}}"],(function(e){return e.theme.containerMaxWidth}),i.b.xl),o=Object(r.c)(a).attrs({className:"container-sm"}).withConfig({displayName:"components__ContainerSm",componentId:"tmnxop-1"})(["max-width:1100px;margin-top:100px;:last-child{margin-bottom:100px}"]),s=r.c.div.attrs({className:"content-title"}).withConfig({displayName:"components__Headline",componentId:"tmnxop-2"})(["font-family:",";font-size:",";line-height:",";letter-spacing:",";font-weight:",";"],(function(e){return e.theme.fontFamilySemiBold}),(function(e){return e.theme.fontSizeUltraHeading}),(function(e){return e.theme.lineHeightUltraHeading}),(function(e){return e.theme.letterSpacingUltraHeading}),(function(e){return e.theme.fontWeightUltraHeading})),u=Object(r.c)(s).attrs({className:"content-title h1"}).withConfig({displayName:"components__H1",componentId:"tmnxop-3"})(["font-size:",";font-family:",";line-height:",";color:",";letter-spacing:",";margin:4px 0 24px;"],(function(e){return e.theme.fontSizeH1}),(function(e){return e.theme.fontFamilyMedium}),(function(e){return e.theme.lineHeightH1}),(function(e){return e.theme.darkBlue}),(function(e){return e.theme.letterSpacingH1})),c=Object(r.c)(s).attrs({className:"content-title h2"}).withConfig({displayName:"components__H2",componentId:"tmnxop-4"})(["font-size:",";line-height:",";font-family:",";margin:24px 0 16px;"],(function(e){return e.theme.fontSizeH2}),(function(e){return e.theme.lineHeightH2}),(function(e){return e.theme.fontFamilyMedium})),l=Object(r.c)(s).attrs({className:"content-title h3"}).withConfig({displayName:"components__H3",componentId:"tmnxop-5"})(["font-weight:normal;font-family:",";font-size:",";line-height:",";"],(function(e){return e.theme.fontFamily}),(function(e){return e.theme.fontSizeH3}),(function(e){return e.theme.lineHeightH3})),f=(Object(r.c)(l).attrs({className:"content-title h4"}).withConfig({displayName:"components__H4",componentId:"tmnxop-6"})(["font-family:",";font-size:",";line-height:",";"],(function(e){return e.theme.fontFamily}),(function(e){return e.theme.fontSizeH4}),(function(e){return e.theme.lineHeightH4})),r.c.p.attrs({className:"content-paragraph"}).withConfig({displayName:"components__Paragraph",componentId:"tmnxop-7"})(["font-family:",";font-size:",";line-height:",";margin:0 0 16px;"],(function(e){return e.theme.fontFamily}),(function(e){return e.theme.fontSizeP1}),(function(e){return e.theme.lineHeightP1}))),d=r.c.ul.withConfig({displayName:"components__List",componentId:"tmnxop-8"})(["margin:0 0 12px;"]);r.c.li.withConfig({displayName:"components__ListItem",componentId:"tmnxop-9"})(["margin-bottom:4px;"]),r.c.code.withConfig({displayName:"components__InlineCode",componentId:"tmnxop-10"})(["background-color:#f7f7f7;border-radius:4px;padding:0 5px;font-family:Consolas,Menlo,Monaco,'Andale Mono WT','Andale Mono','Lucida Console','Lucida Sans Typewriter','DejaVu Sans Mono','Bitstream Vera Sans Mono','Liberation Mono','Nimbus Mono L','Courier New',Courier,monospace;font-size:0.9em;margin:1px 0;line-height:calc(1.5em / 0.9 - 2px);display:inline-block;vertical-align:top;"]),r.c.div.withConfig({displayName:"components__SubTitle",componentId:"tmnxop-11"})(["color:",";font-size:14px;"],(function(e){return e.theme.gray}))},c8wm:function(e,t,n){"use strict";n.r(t),n.d(t,"global",(function(){return i.a}));var r=n("r9/M"),i=n("oWct"),a=n("0vGO");n("0z1g");if(i.a.luma&&"6.4.3"!==i.a.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(i.a.luma.VERSION," vs ").concat("6.4.3"));i.a.luma||(r.a&&a.a.log(0,"luma.gl ".concat("6.4.3"," - ").concat("set luma.log.priority=1 (or higher) to trace rendering"))(),i.a.luma=i.a.luma||{VERSION:"6.4.3",version:"6.4.3",log:a.a,stats:{},globals:{modules:{},nodeIO:{}}});t.default=i.a.luma},foSv:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},gBGw:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("SR+o"),i=n("A2OQ"),a=n("Nx27"),o=n("9lTW"),s=n.n(o);function u(e,t){s()(e instanceof r.a||e instanceof i.a||e instanceof a.a);var n=e.constructor,o=e.gl,u=e.width,c=e.height,l=e.format,f=e.type,d=e.dataFormat,h=e.border,v=e.mipmaps;return new n(o,Object.assign({width:u,height:c,format:l,type:f,dataFormat:d,border:h,mipmaps:v},t))}},ggbK:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s}));var r=n("lvHR"),i=n("0vGO");function a(e,t){if("string"!=typeof t)return t;var n=Number(t);if(!isNaN(n))return n;var i=e[t=t.replace(/^.*\./,"")];return Object(r.a)(void 0!==i,"Accessing undefined constant GL.".concat(t)),i}function o(e,t){for(var n in t=Number(t),e)if(e[n]===t)return"GL.".concat(n);return String(t)}function s(e,t){return void 0===t&&i.a.removed("glKey(value)","glKey(gl, value)","6.0")(),o(e,t)}},"hf/P":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,r.installParameterDefinitions)(),console.log("luma.gl: WebGL debug support installed")};var r=n("NhK1"),i=n("t/Hr");(void 0!==e?e:window).WebGLDebug=i,console.log("luma.gl: WebGL debug support imported")}).call(this,n("yLpj"))},i4fG:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("oWct");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.b.navigator||{},n=e.userAgent||t.userAgent||"",i=-1!==n.indexOf("MSIE "),a=-1!==n.indexOf("Trident/");return i||a}},kLp3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="undefined"!=typeof window&&window.addEventListener,a=new Map,o=function(){return i&&window.__SEER_INITIALIZED__},s=function(e,t){var n=a.get(e),r=Date.now();return!!(n&&r-n<t)||(a.set(e,r),!1)},u=function(e){return function(t,n){if(!n||"object"!==(void 0===n?"undefined":r(n))||!e.has(n))return e.add(n),Object.prototype.toString.call(n).slice(8,-1).includes("Array")?Array.prototype.slice.call(n,0,20):n}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i&&o()){var n=new Set,r=JSON.stringify(t,u(n));try{window.postMessage({type:e,payload:r,source:"seer-agent"},"*")}catch(a){if(s("seer-log",2e3))return;console.log(a)}}},l=new Map,f=function(e){if(e&&e.data&&"seer-core"===e.data.source){var t=e.data,n=t.type,r=t.payload,i=l.get(n);i&&i.forEach((function(e){return e(r)}))}},d=function(){i&&!window.__SEER_LISTENER__&&(window.addEventListener("message",f),window.__SEER_LISTENER__=!0)};t.default={send:c,throttle:s,isReady:o,list:function(e,t){return c("LIST",{key:e,data:t})},listItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c("LIST_ITEM",{key:e,itemKey:t,data:n})},updateItem:function(e,t,n,r){return c("UPDATE_ITEM",{key:e,itemKey:t,path:n,data:r})},multiUpdate:function(e,t,n){return c("MULTI_UPDATE_ITEM",{key:e,itemKey:t,array:n})},deleteItem:function(e,t){return c("DELETE_ITEM",{key:e,itemKey:t})},addLog:function(e,t,n){return c("ADD_LOG",{key:e,itemKey:t,msg:n})},listeners:l,listenFor:function(e,t){if(i){if(!e||!t)throw new Error("Please provide a type and callback");l.has(e)||l.set(e,[]),window.__SEER_LISTENER__||d(),l.get(e).push(t)}},removeListener:function(e){l.forEach((function(t,n){l.set(n,t.filter((function(t){return t!==e})))}))},init:d,clean:function(){i&&window.__SEER_LISTENER__&&(window.removeEventListener("message",f),delete window.__SEER_LISTENER__)}}},ket5:function(e,t,n){"use strict";n.d(t,"c",(function(){return r.a})),n.d(t,"e",(function(){return i.a})),n.d(t,"i",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return l.a})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return a.a})),n.d(t,"h",(function(){return h.a}));var r=n("r9/M"),i=n("i4fG");var a=n("lvHR"),o={};function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";o[e]=o[e]||1;var t=o[e]++;return"".concat(e,"-").concat(t)}function u(e){return Object(a.a)("number"==typeof e,"Input must be a number"),e&&0==(e&e-1)}function c(e){var t=!0;for(var n in e){t=!1;break}return t}var l=n("0vGO");function f(e,t){for(var n=t.maxElts,r=void 0===n?16:n,i=t.size,a=void 0===i?1:i,o="[",s=0;s<e.length&&s<r;++s)s>0&&(o+=",".concat(s%a==0?" ":"")),o+=d(e[s],t);var u=e.length>r?"...":"]";return"".concat(o).concat(u)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=1e-16,r=t.isInteger,i=void 0!==r&&r;if(Array.isArray(e)||ArrayBuffer.isView(e))return f(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<n)return i?"0":"0.";if(i)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var a=e.toPrecision(2),o=a.indexOf(".0");return o===a.length-2?a.slice(0,-1):a}var h=n("mnC6")},lSNA:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},lvHR:function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}n.d(t,"a",(function(){return r}))},md7G:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("cDf5"),i=n.n(r),a=n("JX7q");function o(e,t){return!t||"object"!==i()(t)&&"function"!=typeof t?Object(a.a)(e):t}},mnC6:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("0vGO");function i(e,t,n,i){var a="See luma.gl ".concat(n," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),o=Object.getPrototypeOf(e);i.forEach((function(e){o.methodName||(o[e]=function(){throw r.a.removed("Calling removed method ".concat(t,".").concat(e,": "),a),new Error(e)})}))}},oWct:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},i=r.window||r.self||r.global,a=r.global||r.self||r.window}).call(this,n("yLpj"))},"r+5q":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return g}));var r=n("1OyB"),i=n("vuIU"),a=n("rePB"),o=n("62Ki"),s=n("lvHR"),u=function(e,t){var n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return e===t},c={enable:function(e,t){return e(Object(a.a)({},t,!0))},disable:function(e,t){return e(Object(a.a)({},t,!1))},pixelStorei:function(e,t,n){return e(Object(a.a)({},t,n))},hint:function(e,t,n){return e(Object(a.a)({},t,n))},bindFramebuffer:function(e,t,n){var r;switch(t){case 36160:return e((r={},Object(a.a)(r,36006,n),Object(a.a)(r,36010,n),r));case 36009:return e(Object(a.a)({},36006,n));case 36008:return e(Object(a.a)({},36010,n));default:return null}},blendColor:function(e,t,n,r,i){return e(Object(a.a)({},32773,new Float32Array([t,n,r,i])))},blendEquation:function(e,t){var n;return e((n={},Object(a.a)(n,32777,t),Object(a.a)(n,34877,t),n))},blendEquationSeparate:function(e,t,n){var r;return e((r={},Object(a.a)(r,32777,t),Object(a.a)(r,34877,n),r))},blendFunc:function(e,t,n){var r;return e((r={},Object(a.a)(r,32969,t),Object(a.a)(r,32968,n),Object(a.a)(r,32971,t),Object(a.a)(r,32970,n),r))},blendFuncSeparate:function(e,t,n,r,i){var o;return e((o={},Object(a.a)(o,32969,t),Object(a.a)(o,32968,n),Object(a.a)(o,32971,r),Object(a.a)(o,32970,i),o))},clearColor:function(e,t,n,r,i){return e(Object(a.a)({},3106,new Float32Array([t,n,r,i])))},clearDepth:function(e,t){return e(Object(a.a)({},2931,t))},clearStencil:function(e,t){return e(Object(a.a)({},2961,t))},colorMask:function(e,t,n,r,i){return e(Object(a.a)({},3107,[t,n,r,i]))},cullFace:function(e,t){return e(Object(a.a)({},2885,t))},depthFunc:function(e,t){return e(Object(a.a)({},2932,t))},depthRange:function(e,t,n){return e(Object(a.a)({},2928,new Float32Array([t,n])))},depthMask:function(e,t){return e(Object(a.a)({},2930,t))},frontFace:function(e,t){return e(Object(a.a)({},2886,t))},lineWidth:function(e,t){return e(Object(a.a)({},2849,t))},polygonOffset:function(e,t,n){var r;return e((r={},Object(a.a)(r,32824,t),Object(a.a)(r,10752,n),r))},sampleCoverage:function(e,t,n){var r;return e((r={},Object(a.a)(r,32938,t),Object(a.a)(r,32939,n),r))},scissor:function(e,t,n,r,i){return e(Object(a.a)({},3088,new Int32Array([t,n,r,i])))},stencilMask:function(e,t){var n;return e((n={},Object(a.a)(n,2968,t),Object(a.a)(n,36005,t),n))},stencilMaskSeparate:function(e,t,n){return e(Object(a.a)({},1028===t?2968:36005,n))},stencilFunc:function(e,t,n,r){var i;return e((i={},Object(a.a)(i,2962,t),Object(a.a)(i,2967,n),Object(a.a)(i,2963,r),Object(a.a)(i,34816,t),Object(a.a)(i,36003,n),Object(a.a)(i,36004,r),i))},stencilFuncSeparate:function(e,t,n,r,i){var o;return e((o={},Object(a.a)(o,1028===t?2962:34816,n),Object(a.a)(o,1028===t?2967:36003,r),Object(a.a)(o,1028===t?2963:36004,i),o))},stencilOp:function(e,t,n,r){var i;return e((i={},Object(a.a)(i,2964,t),Object(a.a)(i,2965,n),Object(a.a)(i,2966,r),Object(a.a)(i,34817,t),Object(a.a)(i,34818,n),Object(a.a)(i,34819,r),i))},stencilOpSeparate:function(e,t,n,r,i){var o;return e((o={},Object(a.a)(o,1028===t?2964:34817,n),Object(a.a)(o,1028===t?2965:34818,r),Object(a.a)(o,1028===t?2966:34819,i),o))},viewport:function(e,t,n,r,i){return e(Object(a.a)({},2978,new Int32Array([t,n,r,i])))}};function l(e,t){var n=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=n.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:n.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function f(e,t,n){var r=e[t].bind(e);e[t]=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s,u=n.apply(void 0,[e.state._updateCache].concat(a)),c=u.valueChanged,l=u.oldValue;c&&((s=e.state).log.apply(s,["gl.".concat(t)].concat(a)),r.apply(void 0,a));return l},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}var d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.copyState,a=void 0!==i&&i,s=n.log,u=void 0===s?function(){}:s;Object(r.a)(this,e),this.gl=t,this.stateStack=[],this.enable=!0,this.cache=a?Object(o.b)(t):Object.assign({},o.a),this.log=u,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(i.a)(e,[{key:"push",value:function(){this.stateStack.push({})}},{key:"pop",value:function(){Object(s.a)(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Object(o.d)(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in e)Object(s.a)(void 0!==i),u(e[i],this.cache[i])||(n=!0,t=this.cache[i],r&&!(i in r)&&(r[i]=this.cache[i]),this.cache[i]=e[i]);return{valueChanged:n,oldValue:t}}}]),e}();function h(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enable,i=void 0===r||r,a=n.copyState;if(Object(s.a)(void 0!==a),!t.state){var o=void 0!==e?e:window;for(var u in o.polyfillContext&&o.polyfillContext(t),t.state=new d(t,{copyState:a,enable:i}),c){var h=c[u];f(t,u,h)}l(t,"getParameter"),l(t,"isEnabled")}return t.state.enable=i,t}function v(e){e.state||h(e,{copyState:!1}),e.state.push()}function g(e){Object(s.a)(e.state),e.state.pop()}}).call(this,n("yLpj"))},"r9/M":function(e,t,n){"use strict";(function(e){var r=n("U8pU"),i=n("AyRc"),a=!("object"===(void 0===e?"undefined":Object(r.a)(e))&&"[object process]"===String(e)&&!e.browser)||i.a;t.a=a}).call(this,n("8oxB"))},rePB:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},"t/Hr":function(e,t,n){(function(t){WebGLDebugUtils=function(){var e;void 0===e&&(e=t);var n=function(t){e.console&&e.console.error?e.console.error(t):function(t){e.console&&e.console.log&&e.console.log(t)}(t)},r={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},bindBuffer:{2:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}},bufferData:{3:{0:!0,2:!0},4:{0:!0,2:!0},5:{0:!0,2:!0}},bufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},copyBufferSubData:{5:{0:!0,1:!0}},getBufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},blitFramebuffer:{10:{8:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]},9:!0}},framebufferTextureLayer:{5:{0:!0,1:!0}},invalidateFramebuffer:{2:{0:!0}},invalidateSubFramebuffer:{6:{0:!0}},readBuffer:{1:{0:!0}},getInternalformatParameter:{3:{0:!0,1:!0,2:!0}},renderbufferStorageMultisample:{5:{0:!0,2:!0}},texStorage2D:{5:{0:!0,2:!0}},texStorage3D:{6:{0:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0},10:{0:!0,2:!0,6:!0,7:!0}},texImage3D:{10:{0:!0,2:!0,7:!0,8:!0},11:{0:!0,2:!0,7:!0,8:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0},10:{0:!0,6:!0,7:!0}},texSubImage3D:{11:{0:!0,8:!0,9:!0},12:{0:!0,8:!0,9:!0}},copyTexSubImage3D:{9:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0},8:{0:!0,2:!0},9:{0:!0,2:!0}},compressedTexImage3D:{8:{0:!0,2:!0},9:{0:!0,2:!0},10:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0},9:{0:!0,6:!0},10:{0:!0,6:!0}},compressedTexSubImage3D:{10:{0:!0,8:!0},11:{0:!0,8:!0},12:{0:!0,8:!0}},vertexAttribIPointer:{5:{2:!0}},drawArraysInstanced:{4:{0:!0}},drawElementsInstanced:{5:{0:!0,2:!0}},drawRangeElements:{6:{0:!0,4:!0}},readPixels:{7:{4:!0,5:!0},8:{4:!0,5:!0}},clearBufferfv:{3:{0:!0},4:{0:!0}},clearBufferiv:{3:{0:!0},4:{0:!0}},clearBufferuiv:{3:{0:!0},4:{0:!0}},clearBufferfi:{4:{0:!0}},beginQuery:{2:{0:!0}},endQuery:{1:{0:!0}},getQuery:{2:{0:!0,1:!0}},getQueryParameter:{2:{1:!0}},samplerParameteri:{3:{1:!0,2:!0}},samplerParameterf:{3:{1:!0}},getSamplerParameter:{2:{1:!0}},fenceSync:{2:{0:!0,1:{enumBitwiseOr:[]}}},clientWaitSync:{3:{1:{enumBitwiseOr:["SYNC_FLUSH_COMMANDS_BIT"]}}},waitSync:{3:{1:{enumBitwiseOr:[]}}},getSyncParameter:{2:{1:!0}},bindTransformFeedback:{2:{0:!0}},beginTransformFeedback:{1:{0:!0}},transformFeedbackVaryings:{3:{2:!0}},bindBufferBase:{3:{0:!0}},bindBufferRange:{5:{0:!0}},getIndexedParameter:{2:{0:!0}},getActiveUniforms:{3:{2:!0}},getActiveUniformBlockParameter:{3:{2:!0}}},i=null,a=null;function o(e){if(null==i)for(var t in i={},a={},e)"number"==typeof e[t]&&(i[e[t]]=t,a[t]=e[t])}function s(){if(null==i)throw"WebGLDebugUtils.init(ctx) not called"}function u(e){s();var t=i[e];return void 0!==t?"gl."+t:"/*UNKNOWN WebGL ENUM*/ 0x"+e.toString(16)}function c(e,t,n,i){var o;if(void 0!==(o=r[e])&&(void 0!==(o=o[t])&&o[n])){if("object"==typeof o[n]&&void 0!==o[n].enumBitwiseOr){for(var s=o[n].enumBitwiseOr,c=0,l=[],f=0;f<s.length;++f){var d=a[s[f]];0!=(i&d)&&(c|=d,l.push(u(d)))}return c===i?l.join(" | "):u(i)}return u(i)}return null===i?"null":void 0===i?"undefined":i.toString()}function l(e,t,n){e.__defineGetter__(n,(function(){return t[n]})),e.__defineSetter__(n,(function(e){t[n]=e}))}function f(e){var t=!!e.createTransformFeedback;t&&e.bindVertexArray(null);var n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);for(var i=0;i<n;++i)e.disableVertexAttribArray(i),e.vertexAttribPointer(i,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(i,0),t&&e.vertexAttribDivisor(i,0);e.deleteBuffer(r);var a=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(i=0;i<a;++i)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null),t&&(e.bindTexture(e.TEXTURE_2D_ARRAY,null),e.bindTexture(e.TEXTURE_3D,null),e.bindSampler(i,null));if(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT),t){e.drawBuffers([e.BACK]),e.readBuffer(e.BACK),e.bindBuffer(e.COPY_READ_BUFFER,null),e.bindBuffer(e.COPY_WRITE_BUFFER,null),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.bindBuffer(e.PIXEL_UNPACK_BUFFER,null);var o=e.getParameter(e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);for(i=0;i<o;++i)e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,i,null);var s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);for(i=0;i<s;++i)e.bindBufferBase(e.UNIFORM_BUFFER,i,null);e.disable(e.RASTERIZER_DISCARD),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.pixelStorei(e.UNPACK_ROW_LENGTH,0),e.pixelStorei(e.UNPACK_SKIP_ROWS,0),e.pixelStorei(e.UNPACK_SKIP_PIXELS,0),e.pixelStorei(e.PACK_ROW_LENGTH,0),e.pixelStorei(e.PACK_SKIP_ROWS,0),e.pixelStorei(e.PACK_SKIP_PIXELS,0),e.hint(e.FRAGMENT_SHADER_DERIVATIVE_HINT,e.DONT_CARE)}for(;e.getError(););}return{init:o,mightBeEnum:function(e){return s(),void 0!==i[e]},glEnumToString:u,glFunctionArgToString:c,glFunctionArgsToString:function(e,t){for(var n="",r=t.length,i=0;i<r;++i)n+=(0==i?"":", ")+c(e,r,i,t[i]);return n},makeDebugContext:function e(t,r,i,a){a=a||t,o(t),r=r||function(e,t,r){for(var i="",a=r.length,o=0;o<a;++o)i+=(0==o?"":", ")+c(t,a,o,r[o]);n("WebGL error "+u(e)+" in "+t+"("+i+")")};var s={};function f(e,t){return function(){i&&i(t,arguments);var n=e[t].apply(e,arguments),o=a.getError();return 0!=o&&(s[o]=!0,r(o,t,arguments)),n}}var d={};for(var h in t)if("function"==typeof t[h])if("getExtension"!=h)d[h]=f(t,h);else{var v=f(t,h);d[h]=function(){var n=v.apply(t,arguments);return n?e(n,r,i,a):null}}else l(d,t,h);return d.getError=function(){for(var e in s)if(s.hasOwnProperty(e)&&s[e])return s[e]=!1,e;return t.NO_ERROR},d},makeLostContextSimulatingCanvas:function(t){var n,r,i,a=[],o=[],s={},u=1,c=!1,d=[],h=0,v=0,g=!1,b=0,m={};function p(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}t.getContext=(i=t.getContext,function(){var a=i.apply(t,arguments);if(a instanceof WebGLRenderingContext||e.WebGL2RenderingContext&&a instanceof WebGL2RenderingContext){if(a!=n){if(n)throw"got different context";r=e.WebGL2RenderingContext&&a instanceof WebGL2RenderingContext,s=w(n=a)}return s}return a});var y=function(e){a.push(p(e))},_=function(e){o.push(p(e))};function O(){++v,c||h==v&&t.loseContext()}function E(e,t){var n=e[t];return function(){if(O(),!c){var t=n.apply(e,arguments);return t}}}function j(e){return{statusMessage:e,preventDefault:function(){g=!0}}}return function(e){var t=e.addEventListener;e.addEventListener=function(n,r,i){switch(n){case"webglcontextlost":y(r);break;case"webglcontextrestored":_(r);break;default:t.apply(e,arguments)}}}(t),t.loseContext=function(){if(!c){for(c=!0,h=0,++u;n.getError(););!function(){for(var e=Object.keys(m),t=0;t<e.length;++t)delete m[e[t]]}(),m[n.CONTEXT_LOST_WEBGL]=!0;var e=j("context lost"),r=a.slice();setTimeout((function(){for(var n=0;n<r.length;++n)r[n](e);b>=0&&setTimeout((function(){t.restoreContext()}),b)}),0)}},t.restoreContext=function(){c&&o.length&&setTimeout((function(){if(!g)throw"can not restore. webglcontestlost listener did not call event.preventDefault";!function(){for(var e=0;e<d.length;++e){var t=d[e];t instanceof WebGLBuffer?n.deleteBuffer(t):t instanceof WebGLFramebuffer?n.deleteFramebuffer(t):t instanceof WebGLProgram?n.deleteProgram(t):t instanceof WebGLRenderbuffer?n.deleteRenderbuffer(t):t instanceof WebGLShader?n.deleteShader(t):t instanceof WebGLTexture?n.deleteTexture(t):r&&(t instanceof WebGLQuery?n.deleteQuery(t):t instanceof WebGLSampler?n.deleteSampler(t):t instanceof WebGLSync?n.deleteSync(t):t instanceof WebGLTransformFeedback?n.deleteTransformFeedback(t):t instanceof WebGLVertexArrayObject&&n.deleteVertexArray(t))}}(),f(n),c=!1,v=0,g=!1;for(var e=o.slice(),t=j("context restored"),i=0;i<e.length;++i)e[i](t)}),0)},t.loseContextInNCalls=function(e){if(c)throw"You can not ask a lost contet to be lost";h=v+e},t.getNumCalls=function(){return v},t.setRestoreTimeout=function(e){b=e},t;function w(e){for(var t in e)"function"==typeof e[t]?s[t]=E(e,t):l(s,e,t);s.getError=function(){if(O(),!c)for(;e=n.getError();)m[e]=!0;for(var e in m)if(m[e])return delete m[e],e;return s.NO_ERROR};var i=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];r&&i.push("createQuery","createSampler","fenceSync","createTransformFeedback","createVertexArray");for(var a=0;a<i.length;++a){var o=i[a];s[o]=function(t){return function(){if(O(),c)return null;var n=t.apply(e,arguments);return n.__webglDebugContextLostId__=u,d.push(n),n}}(e[o])}var f=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];r&&f.push("getInternalformatParameter","getQuery","getQueryParameter","getSamplerParameter","getSyncParameter","getTransformFeedbackVarying","getIndexedParameter","getUniformIndices","getActiveUniforms","getActiveUniformBlockParameter","getActiveUniformBlockName");for(a=0;a<f.length;++a){o=f[a];s[o]=function(t){return function(){return O(),c?null:t.apply(e,arguments)}}(s[o])}var h=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];r&&h.push("isQuery","isSampler","isSync","isTransformFeedback","isVertexArray");for(a=0;a<h.length;++a){o=h[a];s[o]=function(t){return function(){return O(),!c&&t.apply(e,arguments)}}(s[o])}return s.checkFramebufferStatus=function(t){return function(){return O(),c?s.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(s.checkFramebufferStatus),s.getAttribLocation=function(t){return function(){return O(),c?-1:t.apply(e,arguments)}}(s.getAttribLocation),s.getVertexAttribOffset=function(t){return function(){return O(),c?0:t.apply(e,arguments)}}(s.getVertexAttribOffset),s.isContextLost=function(){return c},r&&(s.getFragDataLocation=function(t){return function(){return O(),c?-1:t.apply(e,arguments)}}(s.getFragDataLocation),s.clientWaitSync=function(t){return function(){return O(),c?s.WAIT_FAILED:t.apply(e,arguments)}}(s.clientWaitSync),s.getUniformBlockIndex=function(t){return function(){return O(),c?s.INVALID_INDEX:t.apply(e,arguments)}}(s.getUniformBlockIndex)),s}},resetToInitialState:f}}(),e.exports=WebGLDebugUtils}).call(this,n("yLpj"))},tVzf:function(e,t,n){e.exports=n("hf/P")},uuth:function(e,t,n){"use strict";(function(e){var r=n("q1tI"),i=n.n(r),a=n("1TsT"),o=n("TOwV");function s(e,t){var n,r=(n=e,!isNaN(parseFloat(n))&&isFinite(n)?parseFloat(n):"px"===n.slice(-2)?parseFloat(n.slice(0,-2)):void 0);if("number"==typeof r)return r;var i=function(e){if("%"===e.slice(-1))return parseFloat(e.slice(0,-1))/100}(e);return"number"==typeof i?i*t:void 0}var u="above",c="inside",l="below",f="invisible";function d(e){if(e)try{i.a.Children.only(e)}catch(t){throw new Error("<Waypoint> expected to receive a single React element child.\n\nSee https://goo.gl/LrBNgw for more info.")}}function h(e){return"string"==typeof e.type}var v=void 0,g=[];function b(e){g.push(e),v||(v=setTimeout((function(){v=null;for(var e=void 0;e=g.shift();)e()}),0));var t=!0;return function(){if(t){t=!1;var n=g.indexOf(e);-1!==n&&(g.splice(n,1),!g.length&&v&&(clearTimeout(v),v=null))}}}var m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var p={topOffset:"0px",bottomOffset:"0px",horizontal:!1,onEnter:function(){},onLeave:function(){},onPositionChange:function(){},fireOnRapidScroll:!0},y=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.refElement=function(e){return t._ref=e},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),m(n,[{key:"componentWillMount",value:function(){d(this.props.children)}},{key:"componentDidMount",value:function(){var e=this;n.getWindow()&&(this.cancelOnNextTick=b((function(){e.cancelOnNextTick=null,function(e,t){if(e&&!h(e)&&!t)throw new Error("<Waypoint> needs a DOM element to compute boundaries. The child you passed is neither a DOM element (e.g. <div>) nor does it use the innerRef prop.\n\nSee https://goo.gl/LrBNgw for more info.")}(e.props.children,e._ref),e._handleScroll=e._handleScroll.bind(e),e.scrollableAncestor=e._findScrollableAncestor(),e.scrollEventListenerUnsubscribe=Object(a.a)(e.scrollableAncestor,"scroll",e._handleScroll,{passive:!0}),e.resizeEventListenerUnsubscribe=Object(a.a)(window,"resize",e._handleScroll,{passive:!0}),e._handleScroll(null)})))}},{key:"componentWillReceiveProps",value:function(e){d(e.children)}},{key:"componentDidUpdate",value:function(){var e=this;n.getWindow()&&this.scrollableAncestor&&(this.cancelOnNextTick||(this.cancelOnNextTick=b((function(){e.cancelOnNextTick=null,e._handleScroll(null)}))))}},{key:"componentWillUnmount",value:function(){n.getWindow()&&(this.scrollEventListenerUnsubscribe&&this.scrollEventListenerUnsubscribe(),this.resizeEventListenerUnsubscribe&&this.resizeEventListenerUnsubscribe(),this.cancelOnNextTick&&this.cancelOnNextTick())}},{key:"_findScrollableAncestor",value:function(){var t=this.props,n=t.horizontal,r=t.scrollableAncestor;if(r)return function(t){return"window"===t?e.window:t}(r);for(var i=this._ref;i.parentNode;){if((i=i.parentNode)===document.body)return window;var a=window.getComputedStyle(i),o=(n?a.getPropertyValue("overflow-x"):a.getPropertyValue("overflow-y"))||a.getPropertyValue("overflow");if("auto"===o||"scroll"===o)return i}return window}},{key:"_handleScroll",value:function(e){if(this._ref){var t=this._getBounds(),n=function(e){return e.viewportBottom-e.viewportTop==0?f:e.viewportTop<=e.waypointTop&&e.waypointTop<=e.viewportBottom||e.viewportTop<=e.waypointBottom&&e.waypointBottom<=e.viewportBottom||e.waypointTop<=e.viewportTop&&e.viewportBottom<=e.waypointBottom?c:e.viewportBottom<e.waypointTop?l:e.waypointTop<e.viewportTop?u:f}(t),r=this._previousPosition;if(this._previousPosition=n,r!==n){var i={currentPosition:n,previousPosition:r,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom};this.props.onPositionChange.call(this,i),n===c?this.props.onEnter.call(this,i):r===c&&this.props.onLeave.call(this,i);var a=r===l&&n===u,o=r===u&&n===l;this.props.fireOnRapidScroll&&(a||o)&&(this.props.onEnter.call(this,{currentPosition:c,previousPosition:r,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}),this.props.onLeave.call(this,{currentPosition:n,previousPosition:c,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}))}}}},{key:"_getBounds",value:function(){var e=this.props.horizontal,t=this._ref.getBoundingClientRect(),n=t.left,r=t.top,i=t.right,a=t.bottom,o=e?n:r,u=e?i:a,c=void 0,l=void 0;this.scrollableAncestor===window?(c=e?window.innerWidth:window.innerHeight,l=0):(c=e?this.scrollableAncestor.offsetWidth:this.scrollableAncestor.offsetHeight,l=e?this.scrollableAncestor.getBoundingClientRect().left:this.scrollableAncestor.getBoundingClientRect().top);var f=this.props,d=f.bottomOffset;return{waypointTop:o,waypointBottom:u,viewportTop:l+s(f.topOffset,c),viewportBottom:l+c-s(d,c)}}},{key:"render",value:function(){var e=this,t=this.props.children;if(!t)return i.a.createElement("span",{ref:this.refElement,style:{fontSize:0}});if(h(t)||Object(o.isForwardRef)(t.type)){var n=function(n){e.refElement(n),t.ref&&("function"==typeof t.ref?t.ref(n):t.ref.current=n)};return i.a.cloneElement(t,{ref:n})}return i.a.cloneElement(t,{innerRef:this.refElement})}}]),n}(void 0!==i.a.PureComponent?i.a.PureComponent:i.a.Component);y.above=u,y.below=l,y.inside=c,y.invisible=f,y.getWindow=function(){if("undefined"!=typeof window)return window},y.defaultProps=p,y.displayName="Waypoint",t.a=y}).call(this,n("yLpj"))},vuIU:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},xo4u:function(e,t,n){"use strict";n.d(t,"c",(function(){return r.c})),n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"m",(function(){return i.c})),n.d(t,"n",(function(){return i.d})),n.d(t,"e",(function(){return i.b})),n.d(t,"d",(function(){return i.a})),n.d(t,"p",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"o",(function(){return u})),n.d(t,"k",(function(){return s})),n.d(t,"h",(function(){return f.a})),n.d(t,"q",(function(){return f.d})),n.d(t,"j",(function(){return d.b})),n.d(t,"i",(function(){return d.a})),n.d(t,"l",(function(){return h})),n.d(t,"g",(function(){return v.a}));var r=n("JD4l"),i=n("WsjP");function a(e){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function o(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=e.match(n);return r?r[1]:t}function u(e,t,n,r){for(var i=e.split(/\r?\n/),a={},o={},u=r||s(t)||"(unnamed)",f="".concat(function(e){switch(e){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(u),d=0;d<i.length;d++){var h=i[d];if(!(h.length<=1)){var v=h.split(":"),g=v[0],b=parseInt(v[2],10);if(isNaN(b))throw new Error("GLSL compilation error in ".concat(f,": ").concat(e));"WARNING"!==g?a[b]=h:o[b]=h}}var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=e.split(/\r?\n/),i=String(r.length+t-1).length;return r.map((function(e,r){var a=r+t,o=String(a).length;return l(a,i-o)+n+e}))}(t);return{shaderName:f,errors:c(a,m),warnings:c(o,m)}}function c(e,t){for(var n="",r=0;r<t.length;r++){var i=t[r];if((e[r+3]||e[r+2]||e[r+1])&&(n+="".concat(i,"\n"),e[r+1])){var a=e[r+1],o=a.split(":",3),s=o[0],u=parseInt(o[1],10)||0,c=a.substring(o.join(":").length+1).trim();n+=l("^^^ ".concat(s,": ").concat(c,"\n\n"),u)}}return n}function l(e,t){for(var n="",r=0;r<t;++r)n+=" ";return"".concat(n).concat(e)}var f=n("7pNt"),d=n("ggbK");function h(e){var t=100,n=e.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(t=r)}return t}var v=n("gBGw")}}]);
//# sourceMappingURL=component---src-pages-index-js-db7c55893288d6563c66.js.map